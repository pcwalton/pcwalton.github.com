function triggerFloatingAd(a){return a>5||TNY.utils.cookie.read("tny_gen")&&!location.search.match(/floater/)?void 0:"undefined"==typeof pageAds.AMS_NYR_POPUP_FLOATINGAD?void("undefined"==typeof pageAds&&(a++,setTimeout(function(){triggerFloatingAd(a)},2e3))):void(jQuery("#floatingAd")&&jQuery("#AMS_NYR_POPUP_FLOATINGAD").find("a")&&(jQuery("#floatingAd").css("display","block"),jQuery("#floatingAd .close").on("click",function(){jQuery("#floatingAd").css("display","none")}),setTimeout(function(){jQuery("#floatingAd").css("display","none")},1e4),TNY.utils.cookie.create("tny_gen",!0,1)))}function EuGetIt(a,b){var c=document.getElementById(a);xmlhttp&&(xmlhttp.open("GET",b,!1),xmlhttp.send(null),c.innerHTML=xmlhttp.responseText)}function TNYmodalviews(){var a={tbc:"CONTINUE",completed:"FINISH"};TNYmodalviews.prototype.barrierHalf=function(){return'<style>\n.barrier-type{\n    background:#efb425!important;\n    background-color:#efb425!important;\n    height:635px;\n    width:520px;\n    max-width:none!important;\n    position:fixed;\n}\n.learn-more-button{\ncursor:pointer\n}\n</style>\n<div id="CM-notification-unit">\n    <img class="b-notification-image" src="/wp-content/assets/img/notifications/halfway.png" />\n    <h1 class="notification-heading-text">\n        <div class="begin-notification-msg">YOU&#39;VE</div>\n        READ HALF</h1>\n    <h3 class="notification-heading-subtext">\n        <div class="begin-notification-msg">of your complimentary</div>articles for the month.</h3>\n    <h4 class="subscribe-notifcation-subtext">Subscribe Now &#8208; just $1 a week.</h4>\n    <span class="cm-button-placement"><a class="center-modal-button learn-more-button" href="<TARGET_URL>" target="_blank">LEARN MORE</a>\n    </span>\n    <div class="remind-later-text">Not today, thanks.</div>\n</div>'},TNYmodalviews.prototype.barrierHalfMobile=function(){return'<style>\n.barrier-type{\nposition:absolute;\ntop:5%!important;\nleft:5%!important;\nmax-width:90%;\nmin-height:100%;\ntext-align:center;\nbackground:#efb425!important;\nbackground-color:#efb425!important;\n  display: -webkit-box;\n    display: -moz-box;\n    display: -ms-flexbox;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-direction: normal;\n    -moz-box-direction: normal;\n    -webkit-box-orient: vertical;\n    -moz-box-orient: vertical;\n    -webkit-flex-direction: column;\n    -ms-flex-direction: column;\n    flex-direction: column;\n    -webkit-flex-wrap: nowrap;\n    -ms-flex-wrap: nowrap;\n    flex-wrap: nowrap;\n    -webkit-box-pack: justify;\n    -moz-box-pack: justify;\n    -webkit-justify-content: space-around;\n    -ms-flex-pack: distribute;\n    justify-content: space-around;\n    -webkit-align-content: space-around;\n    -ms-flex-line-pack: distribute;\n    align-content: space-around;\n    -webkit-box-align: stretch;\n    -moz-box-align: stretch;\n    -webkit-align-items: stretch;\n    -ms-flex-align: stretch;\n    align-items: stretch;\ntext-align: center;\n}\n.mob-message-container{\ndisplay:flex;\ndisplay:-webkit-flex;\n}\n.mob-notification-container{\n    position:absolute;\n    bottom:0;\n    background-color:#000;\n    color:#FFF;\n    text-align:center;\n    min-height: 58px;\n    margin: 0 auto auto auto;\n    margin-top:8%;\n    width:100%;\n    left:0;\n}\n\n.notification-b{\nposition: absolute!important;\ntop: -10px!important;\nleft: 95%!important;\n}\n.modal-close{\nheight:30px;\nwidth:30px;\nleft:0;\nbackground-repeat:no-repeat;\nbackground-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAA8pJREFUeNrUmc1rXFUYxp/z+SYT4iIINUtXUgtuohUdXWSZjgvtqi5KFjKhJkNxK9JFKRSabkqIITRdt8WN/gMlC1Hxo1kEYnAtMiRINiE6597z4cK5MDPNzJx756PJC3c155753XPe97nvfQ7DACGJSgDmAXwohHhHCPGGc+5V5xwBgBDCCCH+ds794Zz7FcD3ALatMf8U+T9WELLMOV9hjH3inJvIc68QohFC+NZ7/7U15oeRwUqiy1LKB9ba9zCEkFL+ZK39whrzy9BgJRHjnG94729gBME53/TeL1tjwkCwkkhqrXeTJLmIEYbWej9JkresMbYQrCTSSql6mqYzGEMopY7SNJ21xiS5YCWRllIeWWunMMaQUp5Ya2dOA+bdtl4pVR83KABYa6eUUnVJJPvCSiKmtd4d19afFmmazmitdyUR6wnLOd8YdTHFRJIkFznnG11zVhJdBvAzzla8m+kw70juB3lm+fTaNSxVq9Hjl6rVXOO7MkmisiQKsdf1xcVgrQ3e+7Bcq/Udv1yrBe999PiOq9wuypOTT/KCZtEPIAONHd956cnJx23dE5VK/xYB7QfQCVoEuMlWynJ2PrZ7mp6eBucvyjNjDOtra205uVStYn1tDYyxgSqsyTYvAIBL+RmAD2JufL6zg4PDQ1xZWHgBgjGGKwsLODg8xNzcXFfQEAJqN2/i4dZWHuY/AQBUKj3LmfBdtzfb4l6/FSiwQKXSMwEANDFx1zn3Sp7H7LfCQ1zRrMnRAgCYEHdDCDLvBL2AhwnaDBKSiIUQ7hSdIQZ4CKAIIUiOcxTCOwdF9GWRNIiVp1aVeL6zUwxUCJMV2I28BZZXRwcFVkodZDpbCSG8PirQIQH/9r8acP5m7EuhH2hWTHt7eyiXy0MDDiF8k/UGlVhx/nxlJVrw762uhm5R4OVQydRgWwjRiHnCer2ONE2j5OmrW7ewev/+qfN473F8fBzt4gDYbm0RH8c+5cdXrwZjTPQqda6wtTZcX1ws1iIWab4z4NjtzIDzgrY2320VMjE19WMeH+ujSgWzs7PYevQoavyd27fx+/4+njx9mssPa5ycvH/uPhhFW9I795fU+rUQwttngZJzvpk2Gg+72kdNk2PvZXsHTaPuUquzyHrYRwcvy5VpGnQXOh3F82/MAYA1JrHWziiljsa5ot1Ae8JmwGmaXtBa748jR5tbn3QtuL4WpDE2SZJLnPPNUVZ9s5jswGcKrTp85g9ATvPFBjxa+s57vz7So6VToHse2nHOjZRyaId2o5EfItbpWg8j/hsA8sXWme5MYAYAAAAASUVORK5CYII=)!important;\n}\n.center-modal-button{\nline-height:.15;\npadding:0 0 0 0;\n}\n.mob-message-item{\n  display:block;\n}\n.mob-message-item:nth-child(1){\n  margin-top:60px\n}\n.mob-notification-item:nth-child(1){\nmargin:0 auto;\n}\n.mob-notification-item:nth-child(3){\nmargin:0 auto;\n}\n.learn-more-button{\nposition:static;\nline-height:5rem;\n}\ndiv#PAYWALL_BARRIER_wrapper{\nmin-height:340px;\n}\n</style>\n    <div id="CM-notification-unit">\n        <div class="mob-message-container">\n            <div style="width:100%">\n                <div class="mob-message-item">YOU&#39;VE\n                    <br/>READ HALF\n                    <div class="mob-message-item-nest">OF YOUR COMPLIMENTARY ARTICLES FOR THE MONTH.</div>\n                </div>\n                <div class="mob-message-item" style="display:none"></div>\n                <div class="mob-message-item" id="subscribe-text-container">Subscribe Now &#8208; just $1 a week.\n                    <div class="mob-message-item" style="margin-top:9%">\n                        <div class="center-modal-button">\n                            <a class="learn-more-button" href="<TARGET_URL>" target="_blank">LEARN MORE</a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>'},TNYmodalviews.prototype.barrierFullMobile=function(){return'<style>\n  div#CM-nofication-home-link{\n  display:block;\n    a{\n        font-family:"neutra-face-text","Helvetica Neue",Helvetica,Segoe,"Segoe UI","Segoe WP",Calibri,Arial,clean,sans-serif;\n        color:#000;\n        font-size:12px;\n        text-transform:uppercase;\n        float:none;\n        position: relative;\n                top: -20px;\n    }\n\n}\n.barrier-type{\nposition:absolute;\ntop:0!important;\nleft:0!important;\nmax-width:100%;\nwidth:100%;\nmin-height:100%;\ntext-align:center;\nbackground:#efb425!important;\nbackground-color:#efb425!important;\n  display: -webkit-box;\n    display: -moz-box;\n    display: -ms-flexbox;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-direction: normal;\n    -moz-box-direction: normal;\n    -webkit-box-orient: vertical;\n    -moz-box-orient: vertical;\n    -webkit-flex-direction: column;\n    -ms-flex-direction: column;\n    flex-direction: column;\n    -webkit-flex-wrap: nowrap;\n    -ms-flex-wrap: nowrap;\n    flex-wrap: nowrap;\n    -webkit-box-pack: justify;\n    -moz-box-pack: justify;\n    -webkit-justify-content: space-around;\n    -ms-flex-pack: distribute;\n    justify-content: space-around;\n    -webkit-align-content: space-around;\n    -ms-flex-line-pack: distribute;\n    align-content: space-around;\n    -webkit-box-align: stretch;\n    -moz-box-align: stretch;\n    -webkit-align-items: stretch;\n    -ms-flex-align: stretch;\n    align-items: stretch;\ntext-align: center;\n}\n.mob-message-container{\ndisplay:flex;\ndisplay:-webkit-flex;\n}\n.mob-notification-container{\n    position:absolute;\n    bottom:0;\n    background-color:#000;\n    color:#FFF;\n    text-align:center;\n    min-height: 58px;\n    margin: 0 auto auto auto;\n    margin-top:8%;\n    width:100%;\n    left:0;\n}\n\n.notification-b{\nposition: absolute!important;\ntop: 0!important;\nleft: 89%!important;\n}\n.modal-close{\nheight:35px;\nwidth:35px;\nleft:;\ndisplay:none;\n}\n.center-modal-button{\nline-height:1.3rem;\npadding:0 0 0 0;\n}\n.mob-message-item-nest{\nmargin-left:5%;\nmargin-right:5%;\n}\n.mob-message-item{\n  display:block;\n}\n.mob-notification-item:nth-child(1){\nmargin:0 auto;\n}\n.mob-notification-item:nth-child(3){\nmargin:0 auto;\n}\n</style>\n    <div id="CM-notification-unit">\n        <div class="mob-message-container">\n            <div style="width:100%">\n                <div class="mob-message-item">YOU&#39;VE\n                    <br class="main-mobi-break"/>READ ALL\n                    <div class="mob-message-item-nest">OF YOUR COMPLIMENTARY ARTICLES FOR THE MONTH.</div>\n                </div>\n                <div class="mob-message-item" style="display:none"></div>\n                <div class="mob-message-item" id="reg-subtext-link">Try <i>The New Yorker</i> for only $1 a week.\n                    <div class="mob-message-item" id="learn-more-mobi-button" style="margin-top:9%;margin-bottom:9%">\n                        <div class="center-modal-button">\n                            <a class="learn-more-button" href="<TARGET_URL>" target="_blank">LEARN MORE</a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>'},TNYmodalviews.prototype.barrierFull=function(){return'<style>\n.b-notification-image{\nmargin-top: 45px;\n}\n.learn-more-button{\ncursor:pointer\n}\n.barrier-type{\n    position:fixed!important;\n    background:#efb425!important;\n    background-color:#efb425!important;\n    height:635px;\n    width:520px;\n    max-width:none!important\n}\n.notification-heading-text{\nmargin-top:18px!important;\n\n}\n\n</style>\n<!-- begin CM unit call -->\n<div id="CM-notification-unit">\n    <img class="b-notification-image" src="/wp-content/assets/img/notifications/cartoonbrick.png" />\n    <h1 class="notification-heading-text tiny-heading-marg">\n        <div class="begin-notification-msg">YOU&#39;VE HIT THE WALL.</div>\n    </h1>\n    <h3 class="notification-heading-subtext tiny-heading-marg">\n        <div class="begin-notification-msg tiny-heading-marg">You&#39;ve read your last complimentary article.</div>\n    </h3>\n\n    <h4 class="subscribe-notifcation-subtext">Subscribe Now &#8212; just $1 a week.</h4>\n    <span class="cm-button-placement"><a class="center-modal-button learn-more-button" href="<TARGET_URL>" target="_blank">LEARN MORE</a>\n    </span>\n</div>'},TNYmodalviews.prototype.signIn=function(){var a=TNY.account.determineConfig("signInModal","account");EuGetIt("signin-view",a)},TNYmodalviews.prototype.LYS=function(){var a=TNY.account.determineConfig("LYSModal","account");EuGetIt("link-subscription-modal",a)},TNYmodalviews.prototype.thanks=function(){return'<div class="modal-inner thanks-step">\n                    <div id="close-thanks-modal" class="modal-close-thanks-link"></div><div id="wrapper" class="thanks-wrapper">\n                <div class="modal-content">\n                    <div style="text-align:center">\n                        <h2 class="modal-label">Thank You</h2>\n                        <div class="input-spacer"></div>\n                        <div class="confirmation-modal-text">Your subscription is now linked and you are signed in to newyorker.com. <div>\n                       </div> </div>\n                    </div>\n                                   </div>\n            </div>\n    </div>'},TNYmodalviews.prototype.helpFooter=function(){return'<div class="help-gray-border"></div><div class="modal-intro" style="margin-bottom:3px"><div class="mob-breakln signin-sub">Need help? </div> Call <a href="tel:+18004447570">1-800-444-7570</a> &nbsp;&nbsp;|&nbsp;&nbsp; <a href="javascript:void(0)" onclick="javascript:window.open(\'http://cricket.bamboocricket.com:8080/ersweb/chatClientLogin?email=cdsusa_nyr@inbound2.bamboocricket.com\',\'\',\'height=520, width=500,toolbar=no,top=100,left=100, menubar=no, scrollbars=no, resizable=no, location=no, status=no\');"><b>Live Chat</b></a> &nbsp;&nbsp;|&nbsp;&nbsp; <span id="email-link"><b><a href="mailto:help@newyorker.com">E-mail</a></b></span></div><span class="modal-intro signin-sub">We are available Mon&#8211;Fri,  8 am - 12 am E.T., and Sat&#8211;Sun, 9 am - 7 pm E.T. </span>'},TNYmodalviews.prototype.createLogin=function(b){var c=JSON.stringify(b.acctNumber);return'<div id="create-serv-resp-reg"></div><form id="login"><div class="sign-in-from-modal">Thank you &ndash; we found your subscription. Please provide your e-mail address below. You\'ll use this information to sign in to newyorker.com in the future. <div style="font-size:11px;font-size: 12px;"><div class="already-sign-in-text">Already have an account?</div> <span id="sign-in-from-link"><b>Sign In</b>.</span><div></div><input id="useremail1" class="create-login-fields" type="email" placeholder= "E-mail address" /><div id="email-msg-1-reg"></div><div><input id="useremail2" type="email" class="create-login-fields" placeholder= "Confirm e-mail address" /></div><div id="email-msg-1-confirm"></div><div><input id="createpass1" type="password" class="create-login-fields"  placeholder="Password" /></div><div id="pass-msg-1"></div><div><input id="createpass2" type="password" class="create-login-fields" placeholder="Confirm password" /><div id="pass-msg-1-confirm"></div><div style="margin-top: 10px">Creating a login consitutes acceptance of our <b><a href="https://www.condenast.com/services/privacy">user agreement </b></a>and <b><a href="https://www.condenast.com/services/privacy">privacy policy</a></b>.</div><input id="fromLink" name="fromLink" value="true" type="hidden"/><input id="fromAcct" name="fromAcct"value="'+c+'" type="hidden"/><input name="fromLinkAddy1" value="true" type="hidden"/><input name="fromLinkAddy2" value="true" type="hidden"/><input name="fromLinkAddyCity" value="true" type="hidden"/><input name="fromLinkAddyState" value="true" type="hidden"/><input name="fromLinkAddyZip" value="true" type="hidden"/></div><div id="pass-msg-2"></div><div class="create-login-disclaimer"><div style="min-height:16px;"></div><div id="spinWrap-create-login"><input id="createLogin" value="'+a.completed+'" type="button"/></div></div></form>'},TNYmodalviews.prototype.signInLink=function(b){return'<div id="create-serv-resp"></div><form id="login"><div class="sign-in-modal-text-wrapper">Please sign in to your newyorker.com account to link your subscription to a login.<div></div><div class="already-sign-in-text no-login-wrapper"><br/>&nbsp;&nbsp; Don\'t have a login? <span id="reg-link">Create one now</span>.</div><br/><div class="link-process-input-wrapper link-selection-field-wrapper"><input placeholder="E-mail address" name="username_link" type="email" id="username-link" required> </div></div><div id="email-msg-1"></div><div class="link-process-input-wrapper link-selection-field-wrapper" style="margin-bottom: 9px;"><br/><input placeholder="Password" type="password" id="userpass-link" required/><br/></div></div><div id="pass-msg-2"></div><div style="position: relative;left: -2px;"><span class="rememberme" ><input id="rememberme-link" type="checkbox"/> Remember me<span class="forgot-spacer-mini"></span>  <span class="forgotpasslink" id="forgotpassWord" ><a href ='+TNY.account.determineConfig("forgot-password","account")+' target="_blank">Forgot password?</a></span></span></div><div style="margin-bottom:8px"></div><div style="min-height:16px;"></div><div id="spinWrap-signin-link"><input type="button" value="'+a.completed+'"  id="signIn-link"  /></div><input id="fromAcctLink" name="fromAcctLink"value="'+b+'" type="hidden"/></div></form>'},TNYmodalviews.prototype.forgotPass=function(){return'<h2 class="forgot-header">Forgot <div class="breakForgot"></div>Password?</h2><div id="final-step"></div><fieldset class="signin-modal" id="forgot-pass-body"><div class="forgot-info">Please enter the e-mail address associated with your newyorker.com account. We\'ll send you instructions to reset your password.</div><div class="pass-err-msg" id="forgot-resp-msg"></div><input id="forgot-field" placeholder="E-mail address" type="email"/></div><div class="signInBorder"><input type="button" value="SUBMIT" id="forgotPass"/> </div></div><div class="modal-intro"><div class="forgot-mini-spacer"></div><div class="modal-intro"><div class="mob-breakln signin-sub">Need help? </div> Call 1-800-444-7570 &nbsp;&nbsp;|&nbsp;&nbsp; <b><a href="javascript:void(0)" onclick="javascript:window.open(\'http://cricket.bamboocricket.com:8080/ersweb/chatClientLogin?email=cdsusa_nyr@inbound2.bamboocricket.com\',\'\',\'height=520, width=500,toolbar=no,top=100,left=100, menubar=no, scrollbars=no, resizable=no, location=no, status=no\');">Live chat</a></b> &nbsp;&nbsp;|&nbsp;&nbsp; <span id="email-link"><b><a href="mailto:help@newyorker.com">Email</a></b></span></div><span class="modal-intro signin-sub"><div class="forgot-subtext-spacer"></div>We are available Mon&#8211;Fri,  8 am - 12 am E.T., and Sat&#8211;Sun, 9 am - 7 pm E.T. </span></fieldset>'},TNYmodalviews.prototype.zipCode=function(){return'<div><input type="text" placeholder="Zip Code"/></div>'},TNYmodalviews.prototype.nameAddress=function(){return'<div><input type="text" id="fullname" name="fullname" placeholder="Name"/><div id="name-msg"></div>\n<input type="text" id="address1" name="address1"  placeholder="Address"/><div id="address-msg"></div>\n<input type="text" id="address2" name="address2"  placeholder="Address 2"/><input type="text" id="city" name="city" placeholder="City"/><div id="city-msg"></div>\n<input type="text" id="state" name="state"  placeholder="State"/><div id="state-msg"></div>\n<input type="text" id="zip" name="zip"  placeholder="Zip/Postal code"/><div id="zip-msg"></div>\n<input type="button" id="submit-link-address-lookup" value="Submit"/></div>'},TNYmodalviews.prototype.subAcct=function(){return'<div><input id="link-account-numb" input type="number" placeholder="Account Number" /></div>\n  <div id="acct-msg"></div>\n                          <div><input id="link-zip" type="number" placeholder="Zip Code" /></div>\n      <div id="zip-msg"></div>\n                      <div><input id="linkbutton" type="button" value="'+a.completed+'"/></div>\n'},TNYmodalviews.prototype.sisterSites=function(){return'<b>It appears that the e-mail address you\'ve entered is already in use. </b><div></div><div style="color:#000">If you have previously registered on newyorker.com or another <b id="cn-site-info-box">Cond&eacute; Nast</b><div class="cn-site-box-popover"><div class="closeErrBox"></div><div style="display:inline-block;width:35%;vertical-align: top;margin-right:18px"><li><a href="www.allure.com">allure.com</a></li><li><a href="www.architecturaldigest.com">architecturaldigest.com</a></li><li><a href="www.bonappetit.com">bonappetit.com</a></li><li><a href="www.brides.com">brides.com</a></li><li><a href="www.concierge.com">concierge.com</a></li><li><a href="www.details.com">details.com</a></li><li><a href="www.epicurious.com">epicurious.com</a></li><li><a href="www.glamour.com">glamour.com</a></li><li><a href="www.golfdigest.com">gourmet.com</a></li><li><a href="www.gourmet.com">gourmet.com</a></li><li><a href="www.gq.com">gq.com</a></li></div><div style="min-width:35px;display:inline-block"></div><div style="display:inline-block;width:35%;"><li><a href="www.luckymag.com">luckymag.com</a></li><li><a href="www.newyorker.com">newyorker.com</a></li><li><a href="www.nytritionaldata.com">nutritionaldata.com</a></li><li><a href="www.self.com">self.com</a></li><li><a href="www.style.com">style.com</a></li><li><a href="www.teenvogue.com">teenvouge.com</a></li><li><a href="www.vanityfair.com">vanityfair.com</a></li><li><a href="www.vogue.com">vogue.com</a></li><li><a href="www.wmagazine.com">wmagazine.com</a></li><li><a href="www.wired.com">wired.com</a></li><li><a href="www.wired.co.uk">wired.co.uk</a></li></div></div> site, you already have a login.</div>'}}!function(){function a(a,h){a=a||"",h=h||{};for(var i in b)b.hasOwnProperty(i)&&(h.autoFix&&(h["fix_"+i]=!0),h.fix=h.fix||h["fix_"+i]);var j=[],k=function(b){a+=b},l=function(b){a=b+a},m={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s>]/i,startTag:/^</,chars:/^[^<]/},n={comment:function(){var b=a.indexOf("-->");return b>=0?{content:a.substr(4,b),length:b+3}:void 0},endTag:function(){var b=a.match(d);return b?{tagName:b[1],length:b[0].length}:void 0},atomicTag:function(){var b=n.startTag();if(b){var c=a.slice(b.length);if(c.match(new RegExp("</\\s*"+b.tagName+"\\s*>","i"))){var d=c.match(new RegExp("([\\s\\S]*?)</\\s*"+b.tagName+"\\s*>","i"));if(d)return{tagName:b.tagName,attrs:b.attrs,content:d[1],length:d[0].length+b.length}}}},startTag:function(){var b=a.match(c);if(b){var d={};return b[2].replace(e,function(a,b){var c=arguments[2]||arguments[3]||arguments[4]||f.test(b)&&b||null;d[b]=c}),{tagName:b[1],attrs:d,unary:!!b[3],length:b[0].length}}},chars:function(){var b=a.indexOf("<");return{length:b>=0?b:a.length}}},o=function(){for(var b in m)if(m[b].test(a)){g&&console.log("suspected "+b);var c=n[b]();return c?(g&&console.log("parsed "+b,c),c.type=c.type||b,c.text=a.substr(0,c.length),a=a.slice(c.length),c):null}},p=function(a){for(var b;b=o();)if(a[b.type]&&a[b.type](b)===!1)return},q=function(){var b=a;return a="",b},r=function(){return a};return h.fix&&!function(){var b=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,c=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i,d=[];d.last=function(){return this[this.length-1]},d.lastTagNameEq=function(a){var b=this.last();return b&&b.tagName&&b.tagName.toUpperCase()===a.toUpperCase()},d.containsTagName=function(a){for(var b,c=0;b=this[c];c++)if(b.tagName===a)return!0;return!1};var e=function(a){return a&&"startTag"===a.type&&(a.unary=b.test(a.tagName)||a.unary),a},f=o,g=function(){var b=a,c=e(f());return a=b,c},i=function(){var a=d.pop();l("</"+a.tagName+">")},j={startTag:function(a){var b=a.tagName;"TR"===b.toUpperCase()&&d.lastTagNameEq("TABLE")?(l("<TBODY>"),m()):h.fix_selfClose&&c.test(b)&&d.containsTagName(b)?d.lastTagNameEq(b)?i():(l("</"+a.tagName+">"),m()):a.unary||d.push(a)},endTag:function(a){var b=d.last();b?h.fix_tagSoup&&!d.lastTagNameEq(a.tagName)?i():d.pop():h.fix_tagSoup&&k()}},k=function(){f(),m()},m=function(){var a=g();a&&j[a.type]&&j[a.type](a)};o=function(){return m(),e(f())}}(),{append:k,readToken:o,readTokens:p,clear:q,rest:r,stack:j}}var b=function(){var a,b={},c=this.document.createElement("div");return a="<P><I></P></I>",c.innerHTML=a,b.tagSoup=c.innerHTML!==a,c.innerHTML="<P><i><P></P></i></P>",b.selfClose=2===c.childNodes.length,b}(),c=/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,d=/^<\/([\-A-Za-z0-9_]+)[^>]*>/,e=/([\-A-Za-z0-9_]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,f=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i,g=!1;a.supports=b,a.tokenToString=function(a){var b={comment:function(a){return"<--"+a.content+"-->"},endTag:function(a){return"</"+a.tagName+">"},atomicTag:function(a){return console.log(a),b.startTag(a)+a.content+b.endTag(a)},startTag:function(a){var b="<"+a.tagName;for(var c in a.attrs){var d=a.attrs[c];b+=" "+c+'="'+(d?d.replace(/(^|[^\\])"/g,'$1\\"'):"")+'"'}return b+(a.unary?"/>":">")},chars:function(a){return a.text}};return b[a.type](a)},a.escapeAttributes=function(a){var b={};for(var c in a){var d=a[c];b[c]=d&&d.replace(/(^|[^\\])"/g,'$1\\"')}return b};for(var h in b)a.browserHasFlaw=a.browserHasFlaw||!b[h]&&h;this.htmlParser=a}(),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){if(void 0===this||null===this)throw new TypeError('"this" is null or not defined');var c=this.length>>>0;for(b=+b||0,Math.abs(b)===1/0&&(b=0),0>b&&(b+=c,0>b&&(b=0));c>b;b++)if(this[b]===a)return b;return-1}),window.matchMedia||(window.matchMedia=function(a){"use strict";var b=a.document,c=b.documentElement,d=[],e=0,f="",g={},h=/\s*(only|not)?\s*(screen|print|[a-z\-]+)\s*(and)?\s*/i,i=/^\s*\(\s*(-[a-z]+-)?(min-|max-)?([a-z\-]+)\s*(:?\s*([0-9]+(\.[0-9]+)?|portrait|landscape)(px|em|dppx|dpcm|rem|%|in|cm|mm|ex|pt|pc|\/([0-9]+(\.[0-9]+)?))?)?\s*\)\s*$/,j=0,k=function(a){var b=-1!==a.indexOf(",")&&a.split(",")||[a],c=b.length-1,d=c,e=null,j=null,k="",l=0,m=!1,n="",o="",p=null,q=0,r=0,s=null,t="",u="",v="",w="",x="",y=!1;if(""===a)return!0;do if(e=b[d-c],m=!1,j=e.match(h),j&&(k=j[0],l=j.index),!j||-1===e.substring(0,l).indexOf("(")&&(l||!j[3]&&k!==j.input))y=!1;else{if(o=e,m="not"===j[1],l||(n=j[2],o=e.substring(k.length)),y=n===f||"all"===n||""===n,p=-1!==o.indexOf(" and ")&&o.split(" and ")||[o],q=p.length-1,r=q,y&&q>=0&&""!==o)do{if(s=p[q].match(i),!s||!g[s[3]]){y=!1;break}if(t=s[2],u=s[5],w=u,v=s[7],x=g[s[3]],v&&(w="px"===v?Number(u):"em"===v||"rem"===v?16*u:s[8]?(u/s[8]).toFixed(2):"dppx"===v?96*u:"dpcm"===v?.3937*u:Number(u)),y="min-"===t&&w?x>=w:"max-"===t&&w?w>=x:w?x===w:!!x,!y)break}while(q--);if(y)break}while(c--);return m?!y:y},l=function(){var b=a.innerWidth||c.clientWidth,d=a.innerHeight||c.clientHeight,e=a.screen.width,f=a.screen.height,h=a.screen.colorDepth,i=a.devicePixelRatio;g.width=b,g.height=d,g["aspect-ratio"]=(b/d).toFixed(2),g["device-width"]=e,g["device-height"]=f,g["device-aspect-ratio"]=(e/f).toFixed(2),g.color=h,g["color-index"]=Math.pow(2,h),g.orientation=d>=b?"portrait":"landscape",g.resolution=i&&96*i||a.screen.deviceXDPI||96,g["device-pixel-ratio"]=i||1},m=function(){clearTimeout(j),j=setTimeout(function(){var b=null,c=e-1,f=c,g=!1;if(c>=0){l();do if(b=d[f-c],b&&(g=k(b.mql.media),(g&&!b.mql.matches||!g&&b.mql.matches)&&(b.mql.matches=g,b.listeners)))for(var h=0,i=b.listeners.length;i>h;h++)b.listeners[h]&&b.listeners[h].call(a,b.mql);while(c--)}},10)},n=function(){var c=b.getElementsByTagName("head")[0],d=b.createElement("style"),e=null,g=["screen","print","speech","projection","handheld","tv","braille","embossed","tty"],h=0,i=g.length,j="#mediamatchjs { position: relative; z-index: 0; }",k="",n=a.addEventListener||(k="on")&&a.attachEvent;for(d.type="text/css",d.id="mediamatchjs",c.appendChild(d),e=a.getComputedStyle&&a.getComputedStyle(d)||d.currentStyle;i>h;h++)j+="@media "+g[h]+" { #mediamatchjs { position: relative; z-index: "+h+" } }";d.styleSheet?d.styleSheet.cssText=j:d.textContent=j,f=g[1*e.zIndex||0],c.removeChild(d),l(),n(k+"resize",m),n(k+"orientationchange",m)};return n(),function(a){var b=e,c={matches:!1,media:a,addListener:function(a){d[b].listeners||(d[b].listeners=[]),a&&d[b].listeners.push(a)},removeListener:function(a){var c=d[b],e=0,f=0;if(c)for(f=c.listeners.length;f>e;e++)c.listeners[e]===a&&c.listeners.splice(e,1)}};return""===a?(c.matches=!0,c):(c.matches=k(a),e=d.push({mql:c,listeners:null}),c)}}(window)),function(){function a(a,h){a=a||"",h=h||{};for(var i in b)b.hasOwnProperty(i)&&(h.autoFix&&(h["fix_"+i]=!0),h.fix=h.fix||h["fix_"+i]);var j=[],k=function(a){return"string"==typeof a?a.replace(/(&#\d{1,4};)/gm,function(a){var b=a.substring(2,a.length-1);return String.fromCharCode(b)}):a},l=function(b){a+=b},m=function(b){a=b+a},n={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},o={comment:function(){var b=a.indexOf("-->");return b>=0?{content:a.substr(4,b),length:b+3}:void 0},endTag:function(){var b=a.match(d);return b?{tagName:b[1],length:b[0].length}:void 0},atomicTag:function(){var b=o.startTag();if(b){var c=a.slice(b.length);if(c.match(new RegExp("</\\s*"+b.tagName+"\\s*>","i"))){var d=c.match(new RegExp("([\\s\\S]*?)</\\s*"+b.tagName+"\\s*>","i"));if(d)return{tagName:b.tagName,attrs:b.attrs,content:d[1],length:d[0].length+b.length}}}},startTag:function(){var b=a.match(c);if(b){var d={};return b[2].replace(e,function(a,b){var c=arguments[2]||arguments[3]||arguments[4]||f.test(b)&&b||null;d[b]=k(c)}),{tagName:b[1],attrs:d,unary:!!b[3],length:b[0].length}}},chars:function(){var b=a.indexOf("<");return{length:b>=0?b:a.length}}},p=function(){for(var b in n)if(n[b].test(a)){g&&console.log("suspected "+b);var c=o[b]();

return c?(g&&console.log("parsed "+b,c),c.type=c.type||b,c.text=a.substr(0,c.length),a=a.slice(c.length),c):null}},q=function(a){for(var b;b=p();)if(a[b.type]&&a[b.type](b)===!1)return},r=function(){var b=a;return a="",b},s=function(){return a};return h.fix&&!function(){var b=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,c=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i,d=[];d.last=function(){return this[this.length-1]},d.lastTagNameEq=function(a){var b=this.last();return b&&b.tagName&&b.tagName.toUpperCase()===a.toUpperCase()},d.containsTagName=function(a){for(var b,c=0;b=this[c];c++)if(b.tagName===a)return!0;return!1};var e=function(a){return a&&"startTag"===a.type&&(a.unary=b.test(a.tagName)||a.unary),a},f=p,g=function(){var b=a,c=e(f());return a=b,c},i=function(){var a=d.pop();m("</"+a.tagName+">")},j={startTag:function(a){var b=a.tagName;"TR"===b.toUpperCase()&&d.lastTagNameEq("TABLE")?(m("<TBODY>"),l()):h.fix_selfClose&&c.test(b)&&d.containsTagName(b)?d.lastTagNameEq(b)?i():(m("</"+a.tagName+">"),l()):a.unary||d.push(a)},endTag:function(a){var b=d.last();b?h.fix_tagSoup&&!d.lastTagNameEq(a.tagName)?i():d.pop():h.fix_tagSoup&&k()}},k=function(){f(),l()},l=function(){var a=g();a&&j[a.type]&&j[a.type](a)};p=function(){return l(),e(f())}}(),{append:l,readToken:p,readTokens:q,clear:r,rest:s,stack:j}}var b=function(){var a,b={},c=this.document.createElement("div");return a="<P><I></P></I>",c.innerHTML=a,b.tagSoup=c.innerHTML!==a,c.innerHTML="<P><i><P></P></i></P>",b.selfClose=2===c.childNodes.length,b}(),c=/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,d=/^<\/([\-A-Za-z0-9_]+)[^>]*>/,e=/([\-A-Za-z0-9_]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,f=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i,g=!1;a.supports=b,a.tokenToString=function(a){var b={comment:function(a){return"<--"+a.content+"-->"},endTag:function(a){return"</"+a.tagName+">"},atomicTag:function(a){return console.log(a),b.startTag(a)+a.content+b.endTag(a)},startTag:function(a){var b="<"+a.tagName;for(var c in a.attrs){var d=a.attrs[c];b+=" "+c+'="'+(d?d.replace(/(^|[^\\])"/g,'$1\\"'):"")+'"'}return b+(a.unary?"/>":">")},chars:function(a){return a.text}};return b[a.type](a)},a.escapeAttributes=function(a){var b={};for(var c in a){var d=a[c];b[c]=d&&d.replace(/(^|[^\\])"/g,'$1\\"')}return b};for(var h in b)a.browserHasFlaw=a.browserHasFlaw||!b[h]&&h;this.htmlParser=a}(),function(){function a(){}function b(a){return a!==m&&null!==a}function c(a){return"function"==typeof a}function d(a,b,c){var d,e=a&&a.length||0;for(d=0;e>d;d++)b.call(c,a[d],d)}function e(a,b,c){var d;for(d in a)a.hasOwnProperty(d)&&b.call(c,d,a[d])}function f(a,b){return e(b,function(b,c){a[b]=c}),a}function g(a,c){return a=a||{},e(c,function(c,d){b(a[c])||(a[c]=d)}),a}function h(a){try{return o.call(a)}catch(b){var c=[];return d(a,function(a){c.push(a)}),c}}function i(a){return a&&"tagName"in a?!!~a.tagName.toLowerCase().indexOf("script"):!1}function j(a){return a&&"tagName"in a?!!~a.tagName.toLowerCase().indexOf("style"):!1}var k={afterAsync:a,afterDequeue:a,afterStreamStart:a,afterWrite:a,beforeEnqueue:a,beforeWrite:function(a){return a},done:a,error:function(a){throw a},releaseAsync:!1},l=this,m=void 0;if(!l.postscribe){var n=!1,o=Array.prototype.slice,p=function(a){return a[a.length-1]},q=function(){function a(a,c,d){var e=k+c;if(2===arguments.length){var f=a.getAttribute(e);return b(f)?String(f):f}b(d)&&""!==d?a.setAttribute(e,d):a.removeAttribute(e)}function g(b,c){var d=b.ownerDocument;f(this,{root:b,options:c,win:d.defaultView||d.parentWindow,doc:d,parser:htmlParser("",{autoFix:!0}),actuals:[b],proxyHistory:"",proxyRoot:d.createElement(b.nodeName),scriptStack:[],writeQueue:[]}),a(this.proxyRoot,"proxyof",0)}var k="data-ps-";return g.prototype.write=function(){[].push.apply(this.writeQueue,arguments);for(var a;!this.deferredRemote&&this.writeQueue.length;)a=this.writeQueue.shift(),c(a)?this.callFunction(a):this.writeImpl(a)},g.prototype.callFunction=function(a){var b={type:"function",value:a.name||a.toString()};this.onScriptStart(b),a.call(this.win,this.doc),this.onScriptDone(b)},g.prototype.writeImpl=function(a){this.parser.append(a);for(var b,c,d,e=[];(b=this.parser.readToken())&&!(c=i(b))&&!(d=j(b));)e.push(b);this.writeStaticTokens(e),c&&this.handleScriptToken(b),d&&this.handleStyleToken(b)},g.prototype.writeStaticTokens=function(a){var b=this.buildChunk(a);if(b.actual)return b.html=this.proxyHistory+b.actual,this.proxyHistory+=b.proxy,this.proxyRoot.innerHTML=b.html,n&&(b.proxyInnerHTML=this.proxyRoot.innerHTML),this.walkChunk(),n&&(b.actualInnerHTML=this.root.innerHTML),b},g.prototype.buildChunk=function(a){var b=this.actuals.length,c=[],e=[],f=[];return d(a,function(a){if(c.push(a.text),a.attrs){if(!/^noscript$/i.test(a.tagName)){var d=b++;e.push(a.text.replace(/(\/?>)/," "+k+"id="+d+" $1")),"ps-script"!==a.attrs.id&&"ps-style"!==a.attrs.id&&f.push("atomicTag"===a.type?"":"<"+a.tagName+" "+k+"proxyof="+d+(a.unary?" />":">"))}}else e.push(a.text),f.push("endTag"===a.type?a.text:"")}),{tokens:a,raw:c.join(""),actual:e.join(""),proxy:f.join("")}},g.prototype.walkChunk=function(){for(var c,d=[this.proxyRoot];b(c=d.shift());){var e=1===c.nodeType,f=e&&a(c,"proxyof");if(!f){e&&(this.actuals[a(c,"id")]=c,a(c,"id",null));var g=c.parentNode&&a(c.parentNode,"proxyof");g&&this.actuals[g].appendChild(c)}d.unshift.apply(d,h(c.childNodes))}},g.prototype.handleScriptToken=function(a){var b=this.parser.clear();b&&this.writeQueue.unshift(b),a.src=a.attrs.src||a.attrs.SRC,a.src&&this.scriptStack.length?this.deferredRemote=a:this.onScriptStart(a);var c=this;this.writeScriptToken(a,function(){c.onScriptDone(a)})},g.prototype.handleStyleToken=function(a){var b=this.parser.clear();b&&this.writeQueue.unshift(b),a.type=a.attrs.type||a.attrs.TYPE||"text/css",this.writeStyleToken(a),b&&this.write()},g.prototype.writeStyleToken=function(a){var b=this.buildStyle(a);this.insertStyle(b),a.content&&(b.styleSheet&&!b.sheet?b.styleSheet.cssText=a.content:b.appendChild(this.doc.createTextNode(a.content)))},g.prototype.buildStyle=function(a){var b=this.doc.createElement(a.tagName);return b.setAttribute("type",a.type),e(a.attrs,function(a,c){b.setAttribute(a,c)}),b},g.prototype.insertStyle=function(a){this.writeImpl('<span id="ps-style"/>');var b=this.doc.getElementById("ps-style");b.parentNode.replaceChild(a,b)},g.prototype.onScriptStart=function(a){a.outerWrites=this.writeQueue,this.writeQueue=[],this.scriptStack.unshift(a)},g.prototype.onScriptDone=function(a){return a!==this.scriptStack[0]?void this.options.error({message:"Bad script nesting or script finished twice"}):(this.scriptStack.shift(),this.write.apply(this,a.outerWrites),void(!this.scriptStack.length&&this.deferredRemote&&(this.onScriptStart(this.deferredRemote),this.deferredRemote=null)))},g.prototype.writeScriptToken=function(a,b){var c=this.buildScript(a),d=this.shouldRelease(c),e=this.options.afterAsync;a.src&&(c.src=a.src,this.scriptLoadHandler(c,d?e:function(){b(),e()}));try{this.insertScript(c),(!a.src||d)&&b()}catch(f){this.options.error(f),b()}},g.prototype.buildScript=function(a){var b=this.doc.createElement(a.tagName);return e(a.attrs,function(a,c){b.setAttribute(a,c)}),a.content&&(b.text=a.content),b},g.prototype.insertScript=function(a){this.writeImpl('<span id="ps-script"/>');var b=this.doc.getElementById("ps-script");b.parentNode.replaceChild(a,b)},g.prototype.scriptLoadHandler=function(a,b){function c(){a=a.onload=a.onreadystatechange=a.onerror=null}function d(){c(),b()}function e(a){c(),g(a),b()}var g=this.options.error;f(a,{onload:function(){d()},onreadystatechange:function(){/^(loaded|complete)$/.test(a.readyState)&&d()},onerror:function(){e({message:"remote script failed "+a.src})}})},g.prototype.shouldRelease=function(a){var b=/^script$/i.test(a.nodeName);return!b||!!(this.options.releaseAsync&&a.src&&a.hasAttribute("async"))},g}();l.postscribe=function(){function b(){var a,b=j.shift();b&&(a=p(b),a.afterDequeue(),b.stream=d.apply(null,b),a.afterStreamStart())}function d(c,d,g){function j(a){a=g.beforeWrite(a),m.write(a),g.afterWrite(a)}m=new q(c,g),m.id=i++,m.name=g.name||m.id,e.streams[m.name]=m;var k=c.ownerDocument,l={close:k.close,open:k.open,write:k.write,writeln:k.writeln};f(k,{close:a,open:a,write:function(){return j(h(arguments).join(""))},writeln:function(){return j(h(arguments).join("")+"\n")}});var n=m.win.onerror||a;return m.win.onerror=function(a,b,c){g.error({msg:a+" - "+b+":"+c}),n.apply(m.win,arguments)},m.write(d,function(){f(k,l),m.win.onerror=n,g.done(),m=null,b()}),m}function e(d,e,f){c(f)&&(f={done:f}),f=g(f,k),d=/^#/.test(d)?l.document.getElementById(d.substr(1)):d.jquery?d[0]:d;var h=[d,e,f];return d.postscribe={cancel:function(){h.stream?h.stream.abort():h[1]=a}},f.beforeEnqueue(h),j.push(h),m||b(),d.postscribe}var i=0,j=[],m=null;return f(e,{streams:{},queue:j,WriteStream:q})}()}}(),!function(a,b){"undefined"!=typeof module?module.exports=b():"function"==typeof define&&"object"==typeof define.amd?define(b):this[a]=b()}("domready",function(a){function b(a){for(n=1;a=d.shift();)a()}var c,d=[],e=!1,f=document,g=f.documentElement,h=g.doScroll,i="DOMContentLoaded",j="addEventListener",k="onreadystatechange",l="readyState",m=h?/^loaded|^c/:/^loaded|c/,n=m.test(f[l]);return f[j]&&f[j](i,c=function(){f.removeEventListener(i,c,e),b()},e),h&&f.attachEvent(k,c=function(){/^c/.test(f[l])&&(f.detachEvent(k,c),b())}),a=h?function(b){self!=top?n?b():d.push(b):function(){try{g.doScroll("left")}catch(c){return setTimeout(function(){a(b)},50)}b()}()}:function(a){n?a():d.push(a)}}),function(){function a(){e===!0&&window.console&&(a=Function.prototype.bind?Function.prototype.bind.call(console.log,console):function(){Function.prototype.apply.call(console.log,console,arguments)},a.apply(this,arguments))}function b(a,b){var c,d,e,f;return function(){e=this,d=[].slice.call(arguments,0),f=new Date;var g=function(){var h=new Date-f;b>h?c=setTimeout(g,b-h):(c=null,a.apply(e,d))};c||(c=setTimeout(g,b))}}function c(a,b,c){b.addEventListener?b.addEventListener(a,c,!1):b.attachEvent?b.attachEvent("on"+a,c):b["on"+a]=c}var d,e=!1,f={containerElement:"div",containerClass:"ad"};window.LazyAds=LazyAds={},"".trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")});var g=function(a,b,c){var d,e,f,g,h,i=[],c=c||document;if(g="classList"in document.createElement("_"),h="querySelectorAll"in document)d=a,d+=b?"."+b:"",i=c.querySelectorAll(d);else for(q=c.getElementsByTagName(a),f=0;f<q.length;f++)e=q[f],b===!1?i.push(e):g?e.classList.contains(b)&&i.push(e):e.className&&-1!==e.className.split(/\s/).indexOf(b)&&i.push(e);return i},h=function(){for(var a,b=g(f.containerElement,f.containerClass),c=!1,d=[],e=0;e<b.length;e++)a=b[e],c=null!==a.getAttribute("data-lazyad"),c===!0&&d.push(a);return d},i=function(a){for(var b,c,d=g("script",!1,a),e=[],f=0;f<d.length;f++)b=d[f],c=b.getAttribute("type"),c&&"text/lazyad"===c&&e.push(b);return e},j=function(a){return a=a.replace(/^\s+|\s+$/g,""),a.replace("<!--","").replace("-->","").trim()},k=function(b,c){a("Injecting lazy-loaded Ad",b),c=j(c),setTimeout(function(){postscribe(b,c)},0),b.setAttribute("data-lazyad-loaded",!0)},l=function(a){for(var b,c,d,e,f,g,h,j,l,n,o=0,p=0;p<a.length;p++){b=a[p],j=b.getAttribute("data-matchmedia")||!1,g=parseInt(b.getAttribute("data-adwidth"),0)||!1,h=parseInt(b.getAttribute("data-adheight"),0)||!1,c=i(b);for(var q=0;q<c.length;q++){if(d=c[q],n="true"===b.getAttribute("data-lazyad-loaded"),(g||h)&&(e=b.offsetWidth,f=b.offsetHeight,l=!0,g&&g>e&&(l=!1),h&&h>f&&(l=!1),l===!1)){n&&m(b);break}if(j!==!1&&matchMedia(j).matches===!1){n&&m(b);break}n||(k(b,d.innerHTML),o++)}}return o},m=function(b){a("Unloading Ad:",b);for(var c=b.getElementsByTagName("*");c;){var d=c[c.length-1];if("script"===d.nodeName.toLowerCase()&&"text/lazyad"===d.type)break;d.parentNode.removeChild(d)}b.setAttribute("data-lazyad-loaded","false")};LazyAds.init=function(){var b,c,e=0;d=(new Date).getTime(),b=h(),b&&b.length>0&&(e=l(b)),c=(new Date).getTime()-d,c="~"+c+"ms",a("Lazy-loaded count: ",e,c)},domready(function(){c("resize",window,b(function(){LazyAds.init()},250)),LazyAds.init()})}(),function(a,b,c){function d(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function e(a,c,e,f,h,i){var j,k,m=b.createElement("script");f=f||l.errorTimeout,m.src=a;for(k in e)m.setAttribute(k,e[k]);c=i?g:c||s,m.onreadystatechange=m.onload=function(){!j&&d(m.readyState)&&(j=1,c(),m.onload=m.onreadystatechange=null)},n(function(){j||(j=1,c(1))},f),h?m.onload():o.parentNode.insertBefore(m,o)}function f(a,c,d,e,f,h){var i,j=b.createElement("link");e=e||l.errorTimeout,c=h?g:c||s,j.href=a,j.rel="stylesheet",j.type="text/css";for(i in d)j.setAttribute(i,d[i]);f||(o.parentNode.insertBefore(j,o),n(c,0))}function g(){var a=q.shift();r=1,a?a.t?n(function(){("c"==a.t?l.injectCss:l.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),g()):r=0}function h(a,c,e,f,h,i,j){function k(b){if(!p&&d(m.readyState)&&(t.r=p=1,!r&&g(),m.onload=m.onreadystatechange=null,b)){"img"!=a&&n(function(){v.removeChild(m)},50);for(var e in F[c])F[c].hasOwnProperty(e)&&F[c][e].onload()}}j=j||l.errorTimeout;var m=b.createElement(a),p=0,s=0,t={t:e,s:c,e:h,a:i,x:j};1===F[c]&&(s=1,F[c]=[]),"object"==a?m.data=c:(m.src=c,m.type=a),m.width=m.height="0",m.onerror=m.onload=m.onreadystatechange=function(){k.call(this,s)},q.splice(f,0,t),"img"!=a&&(s||2===F[c]?(v.insertBefore(m,u?null:o),n(k,j)):F[c].push(m))}function i(a,b,c,d,e){return r=0,b=b||"j",C(a)?h("c"==b?z:y,a,b,this.i++,c,d,e):(q.splice(this.i++,0,a),1==q.length&&g()),this}function j(){var a=l;return a.loader={load:i,i:0},a}var k,l,m=b.documentElement,n=a.setTimeout,o=b.getElementsByTagName("script")[0],p={}.toString,q=[],r=0,s=function(){},t="MozAppearance"in m.style,u=t&&!!b.createRange().compareNode,v=u?m:o.parentNode,w=a.opera&&"[object Opera]"==p.call(a.opera),x=!!b.attachEvent&&!w,y=t?"object":x?"script":"img",z=x?"script":y,A=Array.isArray||function(a){return"[object Array]"==p.call(a)},B=function(a){return Object(a)===a},C=function(a){return"string"==typeof a},D=function(a){return"[object Function]"==p.call(a)},E=[],F={},G={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}};l=function(a){function b(a){var b,c,d,e=a.split("!"),f=E.length,g=e.pop(),h=e.length,i={url:g,origUrl:g,prefixes:e};for(c=0;h>c;c++)d=e[c].split("="),b=G[d.shift()],b&&(i=b(i,d));for(c=0;f>c;c++)i=E[c](i);return i}function d(a){return a.split(".").pop().split("?").shift()}function e(a,e,f,g,h){{var i=b(a),k=i.autoCallback;d(i.url)}if(!i.bypass)return e&&(e=D(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(F[i.url]?i.noexec=!0:F[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==d(i.url)?"c":c,i.noexec,i.attrs,i.timeout),(D(e)||D(k))&&f.load(function(){j(),e&&e(i.origUrl,h,g),k&&k(i.origUrl,h,g),F[i.url]=2}),void 0)}function f(a,b){function c(a,c){if(a){if(C(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),e(a,j,b,0,g);else if(B(a)){d=function(){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c}();for(f in a)a.hasOwnProperty(f)&&(c||--d||(D(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[f]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[f])),e(a[f],j,b,f,g))}}else!c&&l()}var d,f,g=!!a.test,h=g?a.yep:a.nope,i=a.load||a.both,j=a.callback||s,k=j,l=a.complete||s;c(h,!!i),i&&c(i)}var g,h,i=this.yepnope.loader;if(C(a))e(a,0,i,0);else if(A(a))for(g=0;g<a.length;g++)h=a[g],C(h)?e(h,0,i,0):A(h)?l(h):B(h)&&f(h,i);else B(a)&&f(a,i)},l.addPrefix=function(a,b){G[a]=b},l.addFilter=function(a){E.push(a)},l.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",k=function(){b.removeEventListener("DOMContentLoaded",k,0),b.readyState="complete"},0)),a.yepnope=j(),a.yepnope.executeStack=g,a.yepnope.injectJs=e,a.yepnope.injectCss=f}(this,document),window.matchMedia||(window.matchMedia=function(){"use strict";var a=window.styleMedia||window.media;if(!a){var b=document.createElement("style"),c=document.getElementsByTagName("script")[0],d=null;b.type="text/css",b.id="matchmediajs-test",c.parentNode.insertBefore(b,c),d="getComputedStyle"in window&&window.getComputedStyle(b,null)||b.currentStyle,a={matchMedium:function(a){var c="@media "+a+"{ #matchmediajs-test { width: 1px; } }";return b.styleSheet?b.styleSheet.cssText=c:b.textContent=c,"1px"===d.width}}}return function(b){return{matches:a.matchMedium(b||"all"),media:b||"all"}}}()),function(a,b,c){"use strict";function d(a){var b,c,d,e,g,h=a||{};b=h.elements||f.getAllElements();for(var i=0,j=b.length;j>i;i++)if(c=b[i],d=c.parentNode,e=void 0,g=void 0,"IMG"===c.nodeName.toUpperCase()&&(c[f.ns]||(c[f.ns]={}),h.reevaluate||!c[f.ns].evaluated)){if("PICTURE"===d.nodeName.toUpperCase()){if(f.removeVideoShim(d),e=f.getMatch(c,d),e===!1)continue}else e=void 0;("PICTURE"===d.nodeName.toUpperCase()||c.srcset&&!f.srcsetSupported||!f.sizesSupported&&c.srcset&&c.srcset.indexOf("w")>-1)&&f.dodgeSrcset(c),e?(g=f.processSourceSet(e),f.applyBestCandidate(g,c)):(g=f.processSourceSet(c),(void 0===c.srcset||c[f.ns].srcset)&&f.applyBestCandidate(g,c)),c[f.ns].evaluated=!0}}function e(){function c(){var b;a._picturefillWorking||(a._picturefillWorking=!0,a.clearTimeout(b),b=a.setTimeout(function(){d({reevaluate:!0}),a._picturefillWorking=!1},60))}d();var e=setInterval(function(){return d(),/^loaded|^i|^c/.test(b.readyState)?void clearInterval(e):void 0},250);a.addEventListener?a.addEventListener("resize",c,!1):a.attachEvent&&a.attachEvent("onresize",c)}if(a.HTMLPictureElement)return void(a.picturefill=function(){});b.createElement("picture");var f={};f.ns="picturefill",function(){f.srcsetSupported="srcset"in c,f.sizesSupported="sizes"in c}(),f.trim=function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},f.endsWith=function(a,b){return a.endsWith?a.endsWith(b):-1!==a.indexOf(b,a.length-b.length)},f.restrictsMixedContent=function(){return"https:"===a.location.protocol},f.matchesMedia=function(b){return a.matchMedia&&a.matchMedia(b).matches},f.getDpr=function(){return a.devicePixelRatio||1},f.getWidthFromLength=function(a){a=a&&a.indexOf("%")>-1==!1&&(parseFloat(a)>0||a.indexOf("calc(")>-1)?a:"100vw",a=a.replace("vw","%"),f.lengthEl||(f.lengthEl=b.createElement("div"),f.lengthEl.style.cssText="border:0;display:block;font-size:1em;left:0;margin:0;padding:0;position:absolute;visibility:hidden"),f.lengthEl.style.width=a,b.body.appendChild(f.lengthEl),f.lengthEl.className="helper-from-picturefill-js",f.lengthEl.offsetWidth<=0&&(f.lengthEl.style.width=b.documentElement.offsetWidth+"px");var c=f.lengthEl.offsetWidth;return b.body.removeChild(f.lengthEl),c},f.types={},f.types["image/jpeg"]=!0,f.types["image/gif"]=!0,f.types["image/png"]=!0,f.types["image/svg+xml"]=b.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),f.types["image/webp"]=function(){var a="image/webp";c.onerror=function(){f.types[a]=!1,d()},c.onload=function(){f.types[a]=1===c.width,d()},c.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="},f.verifyTypeSupport=function(a){var b=a.getAttribute("type");return null===b||""===b?!0:"function"==typeof f.types[b]?(f.types[b](),"pending"):f.types[b]},f.parseSize=function(a){var b=/(\([^)]+\))?\s*(.+)/g.exec(a);return{media:b&&b[1],length:b&&b[2]}},f.findWidthFromSourceSize=function(a){for(var b,c=f.trim(a).split(/\s*,\s*/),d=0,e=c.length;e>d;d++){var g=c[d],h=f.parseSize(g),i=h.length,j=h.media;if(i&&(!j||f.matchesMedia(j))){b=i;break}}return f.getWidthFromLength(b)},f.parseSrcset=function(a){for(var b=[];""!==a;){a=a.replace(/^\s+/g,"");var c,d=a.search(/\s/g),e=null;if(-1!==d){c=a.slice(0,d);var f=c.slice(-1);if((","===f||""===c)&&(c=c.replace(/,+$/,""),e=""),a=a.slice(d+1),null===e){var g=a.indexOf(",");-1!==g?(e=a.slice(0,g),a=a.slice(g+1)):(e=a,a="")}}else c=a,a="";(c||e)&&b.push({url:c,descriptor:e})}return b},f.parseDescriptor=function(a,b){var c,d=b||"100vw",e=a&&a.replace(/(^\s+|\s+$)/g,""),g=f.findWidthFromSourceSize(d);if(e)for(var h=e.split(" "),i=h.length-1;i>=0;i--){var j=h[i],k=j&&j.slice(j.length-1);if("h"!==k&&"w"!==k||f.sizesSupported){if("x"===k){var l=j&&parseFloat(j,10);c=l&&!isNaN(l)?l:1}}else c=parseFloat(parseInt(j,10)/g)}return c||1},f.getCandidatesFromSourceSet=function(a,b){for(var c=f.parseSrcset(a),d=[],e=0,g=c.length;g>e;e++){var h=c[e];d.push({url:h.url,resolution:f.parseDescriptor(h.descriptor,b)})}return d},f.dodgeSrcset=function(a){a.srcset&&(a[f.ns].srcset=a.srcset,a.removeAttribute("srcset"))},f.processSourceSet=function(a){var b=a.getAttribute("srcset"),c=a.getAttribute("sizes"),d=[];return"IMG"===a.nodeName.toUpperCase()&&a[f.ns]&&a[f.ns].srcset&&(b=a[f.ns].srcset),b&&(d=f.getCandidatesFromSourceSet(b,c)),d},f.applyBestCandidate=function(a,b){var c,d,e;a.sort(f.ascendingSort),d=a.length,e=a[d-1];for(var g=0;d>g;g++)if(c=a[g],c.resolution>=f.getDpr()){e=c;break}if(e&&!f.endsWith(b.src,e.url))if(f.restrictsMixedContent()&&"http:"===e.url.substr(0,"http:".length).toLowerCase())void 0!==typeof console&&console.warn("Blocked mixed content image "+e.url);else{b.src=e.url,b.currentSrc=b.src;var h=b.style||{},i="webkitBackfaceVisibility"in h,j=h.zoom;i&&(h.zoom=".999",i=b.offsetWidth,h.zoom=j)}},f.ascendingSort=function(a,b){return a.resolution-b.resolution},f.removeVideoShim=function(a){var b=a.getElementsByTagName("video");if(b.length){for(var c=b[0],d=c.getElementsByTagName("source");d.length;)a.insertBefore(d[0],c);c.parentNode.removeChild(c)}},f.getAllElements=function(){for(var a=[],c=b.getElementsByTagName("img"),d=0,e=c.length;e>d;d++){var g=c[d];("PICTURE"===g.parentNode.nodeName.toUpperCase()||null!==g.getAttribute("srcset")||g[f.ns]&&null!==g[f.ns].srcset)&&a.push(g)}return a},f.getMatch=function(a,b){for(var c,d=b.childNodes,e=0,g=d.length;g>e;e++){var h=d[e];if(1===h.nodeType){if(h===a)return c;if("SOURCE"===h.nodeName.toUpperCase()){null!==h.getAttribute("src")&&void 0!==typeof console&&console.warn("The `src` attribute is invalid on `picture` `source` element; instead, use `srcset`.");var i=h.getAttribute("media");if(h.getAttribute("srcset")&&(!i||f.matchesMedia(i))){var j=f.verifyTypeSupport(h);if(j===!0){c=h;break}if("pending"===j)return!1}}}}return c},e(),d._=f,"object"==typeof module&&"object"==typeof module.exports?module.exports=d:"function"==typeof define&&define.amd?define(function(){return d}):"object"==typeof a&&(a.picturefill=d)}(this,this.document,new this.Image),function(a){function b(a){return"string"==typeof a}function c(a){var b=v.call(arguments,1);return function(){return a.apply(this,b.concat(v.call(arguments)))}}function d(a){return a.replace(r,"$2")}function e(a){return a.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function f(c,d,e,f,g){var h,k,m,n,o;return f!==i?(m=e.match(c?r:/^([^#?]*)\??([^#]*)(#?.*)/),o=m[3]||"",2===g&&b(f)?k=f.replace(c?q:G,""):(n=l(m[2]),f=b(f)?l[c?C:B](f):f,k=2===g?f:1===g?a.extend({},f,n):a.extend({},n,f),k=j(k),c&&(k=k.replace(s,w))),h=m[1]+(c?u:k||!m[1]?"?":"")+k+o):h=d(e!==i?e:location.href),h}function g(a,c,d){return c===i||"boolean"==typeof c?(d=c,c=x[a?C:B]()):c=b(c)?c.replace(a?q:G,""):c,l(c,d)}function h(c,d,e,f){return b(e)||"object"==typeof e||(f=e,e=d,d=i),this.each(function(){var b=a(this),g=d||p()[(this.nodeName||"").toLowerCase()]||"",h=g&&b.attr(g)||"";b.attr(g,x[c](h,e,f))})}var i,j,k,l,m,n,o,p,q,r,s,t,u,v=Array.prototype.slice,w=decodeURIComponent,x=a.param,y=a.bbq=a.bbq||{},z=a.event.special,A="hashchange",B="querystring",C="fragment",D="elemUrlAttr",E="href",F="src",G=/^.*\?|#.*$/g,H={};x[B]=c(f,0,e),x[C]=k=c(f,1,d),x.sorted=j=function(b,c){var d=[],e={};return a.each(x(b,c).split("&"),function(a,b){var c=b.replace(/(?:%5B|=).*$/,""),f=e[c];f||(f=e[c]=[],d.push(c)),f.push(b)}),a.map(d.sort(),function(a){return e[a]}).join("&")},k.noEscape=function(b){b=b||"";var c=a.map(b.split(""),encodeURIComponent);s=new RegExp(c.join("|"),"g")},k.noEscape(",/"),k.ajaxCrawlable=function(a){return a!==i&&(a?(q=/^.*(?:#!|#)/,r=/^([^#]*)(?:#!|#)?(.*)$/,u="#!"):(q=/^.*#/,r=/^([^#]*)#?(.*)$/,u="#"),t=!!a),t},k.ajaxCrawlable(0),a.deparam=l=function(b,c){var d={},e={"true":!0,"false":!1,"null":null};return a.each(b.replace(/\+/g," ").split("&"),function(b,f){var g,h=f.split("="),j=w(h[0]),k=d,l=0,m=j.split("]["),n=m.length-1;if(/\[/.test(m[0])&&/\]$/.test(m[n])?(m[n]=m[n].replace(/\]$/,""),m=m.shift().split("[").concat(m),n=m.length-1):n=0,2===h.length)if(g=w(h[1]),c&&(g=g&&!isNaN(g)?+g:"undefined"===g?i:e[g]!==i?e[g]:g),n)for(;n>=l;l++)j=""===m[l]?k.length:m[l],k=k[j]=n>l?k[j]||(m[l+1]&&isNaN(m[l+1])?{}:[]):g;else a.isArray(d[j])?d[j].push(g):d[j]=d[j]!==i?[d[j],g]:g;else j&&(d[j]=c?i:"")}),d},l[B]=c(g,0),l[C]=m=c(g,1),a[D]||(a[D]=function(b){return a.extend(H,b)})({a:E,base:E,iframe:F,img:F,input:F,form:"action",link:E,script:F}),p=a[D],a.fn[B]=c(h,B),a.fn[C]=c(h,C),y.pushState=n=function(a,c){b(a)&&/^#/.test(a)&&c===i&&(c=2);var d=a!==i,e=k(location.href,d?a:{},d?c:2);location.href=e},y.getState=o=function(a,b){return a===i||"boolean"==typeof a?m(a):m(b)[a]},y.removeState=function(b){var c={};b!==i&&(c=o(),a.each(a.isArray(b)?b:arguments,function(a,b){delete c[b]})),n(c,2)},z[A]=a.extend(z[A],{add:function(b){function c(a){var b=a[C]=k();a.getState=function(a,c){return a===i||"boolean"==typeof a?l(b,a):l(b,c)[a]},d.apply(this,arguments)}var d;return a.isFunction(b)?(d=b,c):(d=b.handler,void(b.handler=c))}})}(jQuery,this),function(a,b,c){function d(a){return a=a||location.href,"#"+a.replace(/^[^#]*#?(.*)$/,"$1")}var e,f="hashchange",g=document,h=a.event.special,i=g.documentMode,j="on"+f in b&&(i===c||i>7);a.fn[f]=function(a){return a?this.bind(f,a):this.trigger(f)},a.fn[f].delay=50,h[f]=a.extend(h[f],{setup:function(){return j?!1:void a(e.start)},teardown:function(){return j?!1:void a(e.stop)}}),e=function(){function e(){var c=d(),g=n(k);c!==k?(m(k=c,g),a(b).trigger(f)):g!==k&&(location.href=location.href.replace(/#.*/,"")+g),h=setTimeout(e,a.fn[f].delay)}var h,i={},k=d(),l=function(a){return a},m=l,n=l;return i.start=function(){h||e()},i.stop=function(){h&&clearTimeout(h),h=c},a.browser.msie&&!j&&function(){var b,c;i.start=function(){b||(c=a.fn[f].src,c=c&&c+d(),b=a('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){c||m(d()),e()}).attr("src",c||"javascript:0").insertAfter("body")[0].contentWindow,g.onpropertychange=function(){try{"title"===event.propertyName&&(b.document.title=g.title)}catch(a){}})},i.stop=l,n=function(){return d(b.location.href)},m=function(c,d){var e=b.document,h=a.fn[f].domain;c!==d&&(e.title=g.title,e.open(),h&&e.write('<script>document.domain="'+h+'"</script>'),e.close(),b.location.hash=c)}}(),i}()}(jQuery,this),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){var b,c,d=[],e=a(document),f=navigator.userAgent.toLowerCase(),g=a(window),h=[],i=null,j=/msie/.test(f)&&!/opera/.test(f),k=/opera/.test(f);b=j&&/msie 6./.test(f)&&"object"!=typeof window.XMLHttpRequest,c=j&&/msie 7.0/.test(f),a.modal=function(b,c){return a.modal.impl.init(b,c)},a.modal.close=function(){a.modal.impl.close()},a.modal.focus=function(b){a.modal.impl.focus(b)},a.modal.setContainerDimensions=function(){a.modal.impl.setContainerDimensions()},a.modal.setPosition=function(){a.modal.impl.setPosition()},a.modal.update=function(b,c){a.modal.impl.update(b,c)},a.fn.modal=function(b){return a.modal.impl.init(this,b)},a.modal.defaults={appendTo:"body",focus:!0,opacity:50,overlayId:"simplemodal-overlay",overlayCss:{},containerId:"simplemodal-container",containerCss:{},dataId:"simplemodal-data",dataCss:{},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:!1,autoPosition:!0,zIndex:1e3,close:!0,closeHTML:'<a class="modalCloseImg" title="Close"></a>',closeClass:"simplemodal-close",escClose:!0,overlayClose:!1,fixed:!0,position:null,persist:!1,modal:!0,onOpen:null,onShow:null,onClose:null},a.modal.impl={d:{},init:function(b,c){if(this.d.data)return!1;if(i=j&&!a.support.boxModel,this.o=a.extend({},a.modal.defaults,c),this.zIndex=this.o.zIndex,this.occb=!1,"object"==typeof b)b=b instanceof a?b:a(b),this.d.placeholder=!1,0<b.parent().parent().size()&&(b.before(a("<span></span>").attr("id","simplemodal-placeholder").css({display:"none"})),this.d.placeholder=!0,this.display=b.css("display"),!this.o.persist)&&(this.d.orig=b.clone(!0));else{if("string"!=typeof b&&"number"!=typeof b)return alert("SimpleModal Error: Unsupported data type: "+typeof b),this;b=a("<div></div>").html(b)}return this.create(b),this.open(),a.isFunction(this.o.onShow)&&this.o.onShow.apply(this,[this.d]),this},create:function(c){this.getDimensions(),this.o.modal&&b&&(this.d.iframe=a('<iframe src="javascript:false;"></iframe>').css(a.extend(this.o.iframeCss,{display:"none",opacity:0,position:"fixed",height:h[0],width:h[1],zIndex:this.o.zIndex,top:0,left:0})).appendTo(this.o.appendTo)),this.d.overlay=a("<div></div>").attr("id",this.o.overlayId).addClass("simplemodal-overlay").css(a.extend(this.o.overlayCss,{display:"none",opacity:this.o.opacity/100,height:this.o.modal?d[0]:0,width:this.o.modal?d[1]:0,position:"fixed",left:0,top:0,zIndex:this.o.zIndex+1})).appendTo(this.o.appendTo),this.d.container=a("<div></div>").attr("id",this.o.containerId).addClass("simplemodal-container").css(a.extend({position:this.o.fixed?"fixed":"absolute"},this.o.containerCss,{display:"none",zIndex:this.o.zIndex+2})).append(this.o.close&&this.o.closeHTML?a(this.o.closeHTML).addClass(this.o.closeClass):"").appendTo(this.o.appendTo),this.d.wrap=a("<div></div>").attr("tabIndex",-1).addClass("simplemodal-wrap").css({height:"100%",outline:0,width:"100%"}).appendTo(this.d.container),this.d.data=c.attr("id",c.attr("id")||this.o.dataId).addClass("simplemodal-data").css(a.extend(this.o.dataCss,{display:"none"})).appendTo("body"),this.setContainerDimensions(),this.d.data.appendTo(this.d.wrap),(b||i)&&this.fixIE()},bindEvents:function(){var c=this;a("."+c.o.closeClass).bind("click.simplemodal",function(a){a.preventDefault(),c.close()}),c.o.modal&&c.o.close&&c.o.overlayClose&&c.d.overlay.bind("click.simplemodal",function(a){a.preventDefault(),c.close()}),e.bind("keydown.simplemodal",function(a){c.o.modal&&9===a.keyCode?c.watchTab(a):c.o.close&&c.o.escClose&&27===a.keyCode&&(a.preventDefault(),c.close())}),g.bind("resize.simplemodal orientationchange.simplemodal",function(){c.getDimensions(),c.o.autoResize?c.setContainerDimensions():c.o.autoPosition&&c.setPosition(),b||i?c.fixIE():c.o.modal&&(c.d.iframe&&c.d.iframe.css({height:h[0],width:h[1]}),c.d.overlay.css({height:d[0],width:d[1]}))})},unbindEvents:function(){a("."+this.o.closeClass).unbind("click.simplemodal"),e.unbind("keydown.simplemodal"),g.unbind(".simplemodal"),this.d.overlay.unbind("click.simplemodal")},fixIE:function(){var b=this.o.position;a.each([this.d.iframe||null,this.o.modal?this.d.overlay:null,"fixed"===this.d.container.css("position")?this.d.container:null],function(a,c){if(c){var d=c[0].style;if(d.position="absolute",2>a)d.removeExpression("height"),d.removeExpression("width"),d.setExpression("height",'document.body.scrollHeight > document.body.clientHeight ? document.body.scrollHeight : document.body.clientHeight + "px"'),d.setExpression("width",'document.body.scrollWidth > document.body.clientWidth ? document.body.scrollWidth : document.body.clientWidth + "px"');else{var e,f;b&&b.constructor===Array?(e=b[0]?"number"==typeof b[0]?b[0].toString():b[0].replace(/px/,""):c.css("top").replace(/px/,""),e=-1===e.indexOf("%")?e+' + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"':parseInt(e.replace(/%/,""))+' * ((document.documentElement.clientHeight || document.body.clientHeight) / 100) + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"',
b[1]&&(f="number"==typeof b[1]?b[1].toString():b[1].replace(/px/,""),f=-1===f.indexOf("%")?f+' + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"':parseInt(f.replace(/%/,""))+' * ((document.documentElement.clientWidth || document.body.clientWidth) / 100) + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"')):(e='(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"',f='(document.documentElement.clientWidth || document.body.clientWidth) / 2 - (this.offsetWidth / 2) + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"'),d.removeExpression("top"),d.removeExpression("left"),d.setExpression("top",e),d.setExpression("left",f)}}})},focus:function(b){var c=this,b=b&&-1!==a.inArray(b,["first","last"])?b:"first",d=a(":input:enabled:visible:"+b,c.d.wrap);setTimeout(function(){0<d.length?d.focus():c.d.wrap.focus()},10)},getDimensions:function(){var a="undefined"==typeof window.innerHeight?g.height():window.innerHeight;d=[e.height(),e.width()],h=[a,g.width()]},getVal:function(a,b){return a?"number"==typeof a?a:"auto"===a?0:0<a.indexOf("%")?parseInt(a.replace(/%/,""))/100*("h"===b?h[0]:h[1]):parseInt(a.replace(/px/,"")):null},update:function(a,b){return this.d.data?(this.d.origHeight=this.getVal(a,"h"),this.d.origWidth=this.getVal(b,"w"),this.d.data.hide(),a&&this.d.container.css("height",a),b&&this.d.container.css("width",b),this.setContainerDimensions(),this.d.data.show(),this.o.focus&&this.focus(),this.unbindEvents(),void this.bindEvents()):!1},setContainerDimensions:function(){var a=b||c,d=this.d.origHeight?this.d.origHeight:k?this.d.container.height():this.getVal(a?this.d.container[0].currentStyle.height:this.d.container.css("height"),"h"),a=this.d.origWidth?this.d.origWidth:k?this.d.container.width():this.getVal(a?this.d.container[0].currentStyle.width:this.d.container.css("width"),"w"),e=this.d.data.outerHeight(!0),f=this.d.data.outerWidth(!0);this.d.origHeight=this.d.origHeight||d,this.d.origWidth=this.d.origWidth||a;var g=this.o.maxHeight?this.getVal(this.o.maxHeight,"h"):null,i=this.o.maxWidth?this.getVal(this.o.maxWidth,"w"):null,g=g&&g<h[0]?g:h[0],i=i&&i<h[1]?i:h[1],j=this.o.minHeight?this.getVal(this.o.minHeight,"h"):"auto",d=d?this.o.autoResize&&d>g?g:j>d?j:d:e?e>g?g:this.o.minHeight&&"auto"!==j&&j>e?j:e:j,g=this.o.minWidth?this.getVal(this.o.minWidth,"w"):"auto",a=a?this.o.autoResize&&a>i?i:g>a?g:a:f?f>i?i:this.o.minWidth&&"auto"!==g&&g>f?g:f:g;this.d.container.css({height:d,width:a}),this.d.wrap.css({overflow:e>d||f>a?"auto":"visible"}),this.o.autoPosition&&this.setPosition()},setPosition:function(){var a,b;a=h[0]/2-this.d.container.outerHeight(!0)/2,b=h[1]/2-this.d.container.outerWidth(!0)/2;var c="fixed"!==this.d.container.css("position")?g.scrollTop():0;this.o.position&&"[object Array]"===Object.prototype.toString.call(this.o.position)?(a=c+(this.o.position[0]||a),b=this.o.position[1]||b):a=c+a,this.d.container.css({left:b,top:a})},watchTab:function(b){0<a(b.target).parents(".simplemodal-container").length?(this.inputs=a(":input:enabled:visible:first, :input:enabled:visible:last",this.d.data[0]),(!b.shiftKey&&b.target===this.inputs[this.inputs.length-1]||b.shiftKey&&b.target===this.inputs[0]||0===this.inputs.length)&&(b.preventDefault(),this.focus(b.shiftKey?"last":"first"))):(b.preventDefault(),this.focus())},open:function(){this.d.iframe&&this.d.iframe.show(),a.isFunction(this.o.onOpen)?this.o.onOpen.apply(this,[this.d]):(this.d.overlay.show(),this.d.container.show(),this.d.data.show()),this.o.focus&&this.focus(),this.bindEvents()},close:function(){if(!this.d.data)return!1;if(this.unbindEvents(),a.isFunction(this.o.onClose)&&!this.occb)this.occb=!0,this.o.onClose.apply(this,[this.d]);else{if(this.d.placeholder){var b=a("#simplemodal-placeholder");this.o.persist?b.replaceWith(this.d.data.removeClass("simplemodal-data").css("display",this.display)):(this.d.data.hide().remove(),b.replaceWith(this.d.orig))}else this.d.data.hide().remove();this.d.container.hide().remove(),this.d.overlay.hide(),this.d.iframe&&this.d.iframe.hide().remove(),this.d.overlay.remove(),this.d={}}}}}),!function(a,b,c,d){function e(b,c){b.owlCarousel={name:"Owl Carousel",author:"Bartosz Wojciechowski",version:"2.0.0-beta.2.1"},this.settings=null,this.options=a.extend({},e.Defaults,c),this.itemData=a.extend({},m),this.dom=a.extend({},n),this.width=a.extend({},o),this.num=a.extend({},p),this.drag=a.extend({},q),this.state=a.extend({},r),this.e=a.extend({},s),this.plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=null,this.dom.el=b,this.dom.$el=a(b);for(var d in e.Plugins)this.plugins[d[0].toLowerCase()+d.slice(1)]=new e.Plugins[d](this);this.init()}function f(a){if(a.touches!==d)return{x:a.touches[0].pageX,y:a.touches[0].pageY};if(a.touches===d){if(a.pageX!==d)return{x:a.pageX,y:a.pageY};if(a.pageX===d)return{x:a.clientX,y:a.clientY}}}function g(a){var b,d,e=c.createElement("div"),f=a;for(b in f)if(d=f[b],"undefined"!=typeof e.style[d])return e=null,[d,b];return[!1]}function h(){return g(["transition","WebkitTransition","MozTransition","OTransition"])[1]}function i(){return g(["transform","WebkitTransform","MozTransform","OTransform","msTransform"])[0]}function j(){return g(["perspective","webkitPerspective","MozPerspective","OPerspective","MsPerspective"])[0]}function k(){return"ontouchstart"in b||!!navigator.msMaxTouchPoints}function l(){return b.navigator.msPointerEnabled}var m,n,o,p,q,r,s;m={index:!1,indexAbs:!1,posLeft:!1,clone:!1,active:!1,loaded:!1,lazyLoad:!1,current:!1,width:!1,center:!1,page:!1,hasVideo:!1,playVideo:!1},n={el:null,$el:null,stage:null,$stage:null,oStage:null,$oStage:null,$items:null,$oItems:null,$cItems:null,$content:null},o={el:0,stage:0,item:0,prevWindow:0,cloneLast:0},p={items:0,oItems:0,cItems:0,active:0,merged:[]},q={start:0,startX:0,startY:0,current:0,currentX:0,currentY:0,offsetX:0,offsetY:0,distance:null,startTime:0,endTime:0,updatedX:0,targetEl:null},r={isTouch:!1,isScrolling:!1,isSwiping:!1,direction:!1,inMotion:!1},s={_onDragStart:null,_onDragMove:null,_onDragEnd:null,_transitionEnd:null,_resizer:null,_responsiveCall:null,_goToLoop:null,_checkVisibile:null},e.Defaults={items:3,loop:!1,center:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:b,responsiveClass:!1,fallbackEasing:"swing",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",themeClass:"owl-theme",baseClass:"owl-carousel",itemClass:"owl-item",centerClass:"center",activeClass:"active"},e.Plugins={},e.prototype.init=function(){if(this.setResponsiveOptions(),this.trigger("initialize"),this.dom.$el.hasClass(this.settings.baseClass)||this.dom.$el.addClass(this.settings.baseClass),this.dom.$el.hasClass(this.settings.themeClass)||this.dom.$el.addClass(this.settings.themeClass),this.settings.rtl&&this.dom.$el.addClass("owl-rtl"),this.browserSupport(),this.settings.autoWidth&&this.state.imagesLoaded!==!0){var a,b,c;if(a=this.dom.$el.find("img"),b=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:d,c=this.dom.$el.children(b).width(),a.length&&0>=c)return this.preloadAutoWidthImages(a),!1}this.width.prevWindow=this.viewport(),this.createStage(),this.fetchContent(),this.eventsCall(),this.internalEvents(),this.dom.$el.addClass("owl-loading"),this.refresh(!0),this.dom.$el.removeClass("owl-loading").addClass("owl-loaded"),this.trigger("initialized"),this.addTriggerableEvents()},e.prototype.setResponsiveOptions=function(){if(this.options.responsive){var b=this.viewport(),c=this.options.responsive,d=-1;a.each(c,function(a){b>=a&&a>d&&(d=Number(a))}),this.settings=a.extend({},this.options,c[d]),delete this.settings.responsive,this.settings.responsiveClass&&this.dom.$el.attr("class",function(a,b){return b.replace(/\b owl-responsive-\S+/g,"")}).addClass("owl-responsive-"+d)}else this.settings=a.extend({},this.options)},e.prototype.optionsLogic=function(){this.dom.$el.toggleClass("owl-center",this.settings.center),this.settings.loop&&this.num.oItems<this.settings.items&&(this.settings.loop=!1),this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},e.prototype.createStage=function(){var b=c.createElement("div"),d=c.createElement(this.settings.stageElement);b.className="owl-stage-outer",d.className="owl-stage",b.appendChild(d),this.dom.el.appendChild(b),this.dom.oStage=b,this.dom.$oStage=a(b),this.dom.stage=d,this.dom.$stage=a(d),b=null,d=null},e.prototype.createItemContainer=function(){var b=c.createElement(this.settings.itemElement);return b.className=this.settings.itemClass,a(b)},e.prototype.fetchContent=function(b){this.dom.$content=b?b instanceof jQuery?b:a(b):this.settings.nestedItemSelector?this.dom.$el.find("."+this.settings.nestedItemSelector).not(".owl-stage-outer"):this.dom.$el.children().not(".owl-stage-outer"),this.num.oItems=this.dom.$content.length,0!==this.num.oItems&&this.initStructure()},e.prototype.initStructure=function(){this.createNormalStructure()},e.prototype.createNormalStructure=function(){var a,b;for(a=0;a<this.num.oItems;a++)b=this.createItemContainer(),this.initializeItemContainer(b,this.dom.$content[a]),this.dom.$stage.append(b);this.dom.$content=null},e.prototype.createCustomStructure=function(a){var b,c;for(b=0;a>b;b++)c=this.createItemContainer(),this.createItemContainerData(c),this.dom.$stage.append(c)},e.prototype.initializeItemContainer=function(a,b){this.trigger("change",{property:{name:"item",value:a}}),this.createItemContainerData(a),a.append(b),this.trigger("changed",{property:{name:"item",value:a}})},e.prototype.createItemContainerData=function(b,c){var d=a.extend({},this.itemData);c&&a.extend(d,c.data("owl-item")),b.data("owl-item",d)},e.prototype.cloneItemContainer=function(a){var b=a.clone(!0,!0).addClass("cloned");return this.createItemContainerData(b,b),b.data("owl-item").clone=!0,b},e.prototype.updateLocalContent=function(){var b,c;for(this.dom.$oItems=this.dom.$stage.find("."+this.settings.itemClass).filter(function(){return a(this).data("owl-item").clone===!1}),this.num.oItems=this.dom.$oItems.length,b=0;b<this.num.oItems;b++)c=this.dom.$oItems.eq(b),c.data("owl-item").index=b},e.prototype.loopClone=function(){if(!this.settings.loop||this.num.oItems<this.settings.items)return!1;var b,c,d,e=this.settings.items,f=this.num.oItems-1;for(this.settings.stagePadding&&1===this.settings.items&&(e+=1),this.num.cItems=2*e,d=0;e>d;d++)b=this.cloneItemContainer(this.dom.$oItems.eq(d)),c=this.cloneItemContainer(this.dom.$oItems.eq(f-d)),this.dom.$stage.append(b),this.dom.$stage.prepend(c);this.dom.$cItems=this.dom.$stage.find("."+this.settings.itemClass).filter(function(){return a(this).data("owl-item").clone===!0})},e.prototype.reClone=function(){null!==this.dom.$cItems&&(this.dom.$cItems.remove(),this.dom.$cItems=null,this.num.cItems=0),this.settings.loop&&this.loopClone()},e.prototype.calculate=function(){var a,b,c,d,e,f,g,h=0,i=0;for(this.width.el=this.dom.$el.width()-2*this.settings.stagePadding,this.width.view=this.dom.$el.width(),c=this.width.el-this.settings.margin*(1===this.settings.items?0:this.settings.items-1),this.width.el=this.width.el+this.settings.margin,this.width.item=(c/this.settings.items+this.settings.margin).toFixed(3),this.dom.$items=this.dom.$stage.find(".owl-item"),this.num.items=this.dom.$items.length,this.settings.autoWidth&&this.dom.$items.css("width",""),this._coordinates=[],this.num.merged=[],d=this.settings.rtl?this.settings.center?-(this.width.el/2):0:this.settings.center?this.width.el/2:0,this.width.mergeStage=0,a=0;a<this.num.items;a++)this.settings.merge?(g=this.dom.$items.eq(a).find("[data-merge]").attr("data-merge")||1,this.settings.mergeFit&&g>this.settings.items&&(g=this.settings.items),this.num.merged.push(parseInt(g)),this.width.mergeStage+=this.width.item*this.num.merged[a]):this.num.merged.push(1),f=this.width.item*this.num.merged[a],this.settings.autoWidth&&(f=this.dom.$items.eq(a).width()+this.settings.margin,this.settings.rtl?this.dom.$items[a].style.marginLeft=this.settings.margin+"px":this.dom.$items[a].style.marginRight=this.settings.margin+"px"),this._coordinates.push(d),this.dom.$items.eq(a).data("owl-item").posLeft=h,this.dom.$items.eq(a).data("owl-item").width=f,this.settings.rtl?(d+=f,h+=f):(d-=f,h-=f),i-=Math.abs(f),this.settings.center&&(this._coordinates[a]=this.settings.rtl?this._coordinates[a]+f/2:this._coordinates[a]-f/2);for(this.width.stage=Math.abs(this.settings.autoWidth?this.settings.center?i:d:i),e=this.num.oItems+this.num.cItems,b=0;e>b;b++)this.dom.$items.eq(b).data("owl-item").indexAbs=b;this.setSizes()},e.prototype.setSizes=function(){this.settings.stagePadding!==!1&&(this.dom.oStage.style.paddingLeft=this.settings.stagePadding+"px",this.dom.oStage.style.paddingRight=this.settings.stagePadding+"px"),this.settings.rtl?b.setTimeout(a.proxy(function(){this.dom.stage.style.width=this.width.stage+"px"},this),0):this.dom.stage.style.width=this.width.stage+"px";for(var c=0;c<this.num.items;c++)this.settings.autoWidth||(this.dom.$items[c].style.width=this.width.item-this.settings.margin+"px"),this.settings.rtl?this.dom.$items[c].style.marginLeft=this.settings.margin+"px":this.dom.$items[c].style.marginRight=this.settings.margin+"px",1===this.num.merged[c]||this.settings.autoWidth||(this.dom.$items[c].style.width=this.width.item*this.num.merged[c]-this.settings.margin+"px");this.width.stagePrev=this.width.stage},e.prototype.responsive=function(){if(!this.num.oItems)return!1;var a=this.isElWidthChanged();return a?this.trigger("resize").isDefaultPrevented()?!1:(this.state.responsive=!0,this.refresh(),this.state.responsive=!1,void this.trigger("resized")):!1},e.prototype.refresh=function(){var a=this.dom.$oItems&&this.dom.$oItems.eq(this.normalize(this.current(),!0));return this.trigger("refresh"),this.setResponsiveOptions(),this.updateLocalContent(),this.optionsLogic(),0===this.num.oItems?!1:(this.dom.$stage.addClass("owl-refresh"),this.reClone(),this.calculate(),this.dom.$stage.removeClass("owl-refresh"),a?this.reset(a.data("owl-item").indexAbs):(this.dom.oStage.scrollLeft=0,this.reset(this.dom.$oItems.eq(0).data("owl-item").indexAbs)),this.state.orientation=b.orientation,this.watchVisibility(),void this.trigger("refreshed"))},e.prototype.updateActiveItems=function(){this.trigger("change",{property:{name:"items",value:this.dom.$items}});var a,b,c,d,e,f;for(a=0;a<this.num.items;a++)this.dom.$items.eq(a).data("owl-item").active=!1,this.dom.$items.eq(a).data("owl-item").current=!1,this.dom.$items.eq(a).removeClass(this.settings.activeClass).removeClass(this.settings.centerClass);for(this.num.active=0,padding=2*this.settings.stagePadding,stageX=this.coordinates(this.current())+padding,view=this.settings.rtl?this.width.view:-this.width.view,b=0;b<this.num.items;b++)c=this.dom.$items.eq(b),d=c.data("owl-item").posLeft,e=c.data("owl-item").width,f=this.settings.rtl?d-e-padding:d-e+padding,(this.op(d,"<=",stageX)&&this.op(d,">",stageX+view)||this.op(f,"<",stageX)&&this.op(f,">",stageX+view))&&(this.num.active++,c.data("owl-item").active=!0,c.data("owl-item").current=!0,c.addClass(this.settings.activeClass),this.settings.lazyLoad||(c.data("owl-item").loaded=!0),this.settings.loop&&this.updateClonedItemsState(c.data("owl-item").index));this.settings.center&&(this.dom.$items.eq(this.current()).addClass(this.settings.centerClass).data("owl-item").center=!0),this.trigger("changed",{property:{name:"items",value:this.dom.$items}})},e.prototype.updateClonedItemsState=function(a){var b,c,d;for(this.settings.center&&(b=this.dom.$items.eq(this.current()).data("owl-item").index),d=0;d<this.num.items;d++)c=this.dom.$items.eq(d),c.data("owl-item").index===a&&(c.data("owl-item").current=!0,c.data("owl-item").index===b&&c.addClass(this.settings.centerClass))},e.prototype.eventsCall=function(){this.e._onDragStart=a.proxy(function(a){this.onDragStart(a)},this),this.e._onDragMove=a.proxy(function(a){this.onDragMove(a)},this),this.e._onDragEnd=a.proxy(function(a){this.onDragEnd(a)},this),this.e._transitionEnd=a.proxy(function(a){this.transitionEnd(a)},this),this.e._resizer=a.proxy(function(){this.responsiveTimer()},this),this.e._responsiveCall=a.proxy(function(){this.responsive()},this),this.e._preventClick=a.proxy(function(a){this.preventClick(a)},this)},e.prototype.responsiveTimer=function(){return this.viewport()===this.width.prevWindow?!1:(b.clearTimeout(this.resizeTimer),this.resizeTimer=b.setTimeout(this.e._responsiveCall,this.settings.responsiveRefreshRate),void(this.width.prevWindow=this.viewport()))},e.prototype.eventsRouter=function(a){var b=a.type;"mousedown"===b||"touchstart"===b?this.onDragStart(a):"mousemove"===b||"touchmove"===b?this.onDragMove(a):"mouseup"===b||"touchend"===b?this.onDragEnd(a):"touchcancel"===b&&this.onDragEnd(a)},e.prototype.internalEvents=function(){var c=(k(),l());this.settings.mouseDrag?(this.dom.$stage.on("mousedown",a.proxy(function(a){this.eventsRouter(a)},this)),this.dom.$stage.on("dragstart",function(){return!1}),this.dom.stage.onselectstart=function(){return!1}):this.dom.$el.addClass("owl-text-select-on"),this.settings.touchDrag&&!c&&this.dom.$stage.on("touchstart touchcancel",a.proxy(function(a){this.eventsRouter(a)},this)),this.transitionEndVendor&&this.on(this.dom.stage,this.transitionEndVendor,this.e._transitionEnd,!1),this.settings.responsive!==!1&&this.on(b,"resize",this.e._resizer,!1)},e.prototype.onDragStart=function(d){var e,g,h,i;if(e=d.originalEvent||d||b.event,3===e.which||this.state.isTouch)return!1;if("mousedown"===e.type&&this.dom.$stage.addClass("owl-grab"),this.trigger("drag"),this.drag.startTime=(new Date).getTime(),this.speed(0),this.state.isTouch=!0,this.state.isScrolling=!1,this.state.isSwiping=!1,this.drag.distance=0,g=f(e).x,h=f(e).y,this.drag.offsetX=this.dom.$stage.position().left-this.settings.stagePadding,this.drag.offsetY=this.dom.$stage.position().top,this.settings.rtl&&(this.drag.offsetX=this.dom.$stage.position().left+this.width.stage-this.width.el+this.settings.margin),this.state.inMotion&&this.support3d)i=this.getTransformProperty(),this.drag.offsetX=i,this.animate(i),this.state.inMotion=!0;else if(this.state.inMotion&&!this.support3d)return this.state.inMotion=!1,!1;this.drag.startX=g-this.drag.offsetX,this.drag.startY=h-this.drag.offsetY,this.drag.start=g-this.drag.startX,this.drag.targetEl=e.target||e.srcElement,this.drag.updatedX=this.drag.start,("IMG"===this.drag.targetEl.tagName||"A"===this.drag.targetEl.tagName)&&(this.drag.targetEl.draggable=!1),a(c).on("mousemove.owl.dragEvents mouseup.owl.dragEvents touchmove.owl.dragEvents touchend.owl.dragEvents",a.proxy(function(a){this.eventsRouter(a)},this))},e.prototype.onDragMove=function(a){var c,e,g,h,i,j;this.state.isTouch&&(this.state.isScrolling||(c=a.originalEvent||a||b.event,e=f(c).x,g=f(c).y,this.drag.currentX=e-this.drag.startX,this.drag.currentY=g-this.drag.startY,this.drag.distance=this.drag.currentX-this.drag.offsetX,this.drag.distance<0?this.state.direction=this.settings.rtl?"right":"left":this.drag.distance>0&&(this.state.direction=this.settings.rtl?"left":"right"),this.settings.loop?this.op(this.drag.currentX,">",this.coordinates(this.minimum()))&&"right"===this.state.direction?this.drag.currentX-=(this.settings.center&&this.coordinates(0))-this.coordinates(this.num.oItems):this.op(this.drag.currentX,"<",this.coordinates(this.maximum()))&&"left"===this.state.direction&&(this.drag.currentX+=(this.settings.center&&this.coordinates(0))-this.coordinates(this.num.oItems)):(h=this.coordinates(this.settings.rtl?this.maximum():this.minimum()),i=this.coordinates(this.settings.rtl?this.minimum():this.maximum()),j=this.settings.pullDrag?this.drag.distance/5:0,this.drag.currentX=Math.max(Math.min(this.drag.currentX,h+j),i+j)),(this.drag.distance>8||this.drag.distance<-8)&&(c.preventDefault!==d?c.preventDefault():c.returnValue=!1,this.state.isSwiping=!0),this.drag.updatedX=this.drag.currentX,(this.drag.currentY>16||this.drag.currentY<-16)&&this.state.isSwiping===!1&&(this.state.isScrolling=!0,this.drag.updatedX=this.drag.start),this.animate(this.drag.updatedX)))},e.prototype.onDragEnd=function(b){var d,e,f;if(this.state.isTouch){if("mouseup"===b.type&&this.dom.$stage.removeClass("owl-grab"),this.trigger("dragged"),this.drag.targetEl.removeAttribute("draggable"),this.state.isTouch=!1,this.state.isScrolling=!1,this.state.isSwiping=!1,0===this.drag.distance&&this.state.inMotion!==!0)return this.state.inMotion=!1,!1;this.drag.endTime=(new Date).getTime(),d=this.drag.endTime-this.drag.startTime,e=Math.abs(this.drag.distance),(e>3||d>300)&&this.removeClick(this.drag.targetEl),f=this.closest(this.drag.updatedX),this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(f),this.settings.pullDrag||this.drag.updatedX!==this.coordinates(f)||this.transitionEnd(),this.drag.distance=0,a(c).off(".owl.dragEvents")}},e.prototype.removeClick=function(c){this.drag.targetEl=c,a(c).on("click.preventClick",this.e._preventClick),b.setTimeout(function(){a(c).off("click.preventClick")},300)},e.prototype.preventClick=function(b){b.preventDefault?b.preventDefault():b.returnValue=!1,b.stopPropagation&&b.stopPropagation(),a(b.target).off("click.preventClick")},e.prototype.getTransformProperty=function(){var a,c;return a=b.getComputedStyle(this.dom.stage,null).getPropertyValue(this.vendorName+"transform"),a=a.replace(/matrix(3d)?\(|\)/g,"").split(","),c=16===a.length,c!==!0?a[4]:a[12]},e.prototype.closest=function(b){var c=0,d=30;return this.settings.freeDrag||a.each(this.coordinates(),a.proxy(function(a,e){b>e-d&&e+d>b?c=a:this.op(b,"<",e)&&this.op(b,">",this.coordinates(a+1)||e-this.width.el)&&(c="left"===this.state.direction?a+1:a)},this)),this.settings.loop||(this.op(b,">",this.coordinates(this.minimum()))?c=b=this.minimum():this.op(b,"<",this.coordinates(this.maximum()))&&(c=b=this.maximum())),c},e.prototype.animate=function(b){this.trigger("translate"),this.state.inMotion=this.speed()>0,this.support3d?this.dom.$stage.css({transform:"translate3d("+b+"px,0px, 0px)",transition:this.speed()/1e3+"s"}):this.state.isTouch?this.dom.$stage.css({left:b+"px"}):this.dom.$stage.animate({left:b},this.speed()/1e3,this.settings.fallbackEasing,a.proxy(function(){this.state.inMotion&&this.transitionEnd()},this))},e.prototype.current=function(a){if(a===d)return this._current;if(0===this.num.oItems)return d;if(a=this.normalize(a),this._current===a)this.animate(this.coordinates(this._current));else{var b=this.trigger("change",{property:{name:"position",value:a}});b.data!==d&&(a=this.normalize(b.data)),this._current=a,this.animate(this.coordinates(this._current)),this.updateActiveItems(),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},e.prototype.reset=function(a){this.suppress(["change","changed"]),this.speed(0),this.current(a),this.release(["change","changed"])},e.prototype.normalize=function(a,b){if(a===d||!this.dom.$items)return d;if(this.settings.loop){var c=this.dom.$items.length;a=(a%c+c)%c}else a=Math.max(this.minimum(),Math.min(this.maximum(),a));return b?this.dom.$items.eq(a).data("owl-item").index:a},e.prototype.maximum=function(){var b,c,d=this.settings;if(!d.loop&&d.center)b=this.num.oItems-1;else if(d.loop||d.center)if(d.loop||d.center)b=this.num.oItems+d.items;else{if(!d.autoWidth&&!d.merge)throw"Can not detect maximum absolute position.";revert=d.rtl?1:-1,c=this.dom.$stage.width()-this.$el.width(),a.each(this.coordinates(),function(a,d){return d*revert>=c?!1:void(b=a+1)})}else b=this.num.oItems-d.items;return b},e.prototype.minimum=function(){return this.dom.$oItems.eq(0).data("owl-item").indexAbs},e.prototype.speed=function(a){return a!==d&&(this._speed=a),this._speed},e.prototype.coordinates=function(a){return a!==d?this._coordinates[a]:this._coordinates},e.prototype.duration=function(a,b,c){return Math.min(Math.max(Math.abs(b-a),1),6)*Math.abs(c||this.settings.smartSpeed)},e.prototype.to=function(c,d){if(this.settings.loop){var e=c-this.normalize(this.current(),!0),f=this.current(),g=this.current(),h=this.current()+e,i=0>g-h?!0:!1;h<this.settings.items&&i===!1?(f=this.num.items-(this.settings.items-g)-this.settings.items,this.reset(f)):h>=this.num.items-this.settings.items&&i===!0&&(f=g-this.num.oItems,this.reset(f)),b.clearTimeout(this.e._goToLoop),this.e._goToLoop=b.setTimeout(a.proxy(function(){this.speed(this.duration(this.current(),f+e,d)),this.current(f+e)},this),30)}else this.speed(this.duration(this.current(),c,d)),this.current(c)},e.prototype.next=function(a){a=a||!1,this.to(this.normalize(this.current(),!0)+1,a)},e.prototype.prev=function(a){a=a||!1,this.to(this.normalize(this.current(),!0)-1,a)},e.prototype.transitionEnd=function(a){if(a!==d){a.stopPropagation();var b=a.target||a.srcElement||a.originalTarget;if(b!==this.dom.stage)return!1}this.state.inMotion=!1,this.trigger("translated")},e.prototype.isElWidthChanged=function(){var a=this.dom.$el.width()-this.settings.stagePadding,b=this.width.el+this.settings.margin;return a!==b},e.prototype.viewport=function(){var d;if(this.options.responsiveBaseElement!==b)d=a(this.options.responsiveBaseElement).width();else if(b.innerWidth)d=b.innerWidth;else{if(!c.documentElement||!c.documentElement.clientWidth)throw"Can not detect viewport width.";d=c.documentElement.clientWidth}return d},e.prototype.insertContent=function(a){this.dom.$stage.empty(),this.fetchContent(a),this.refresh()},e.prototype.add=function(a,b,c){var d=this.createItemContainer();b=b||0,this.initializeItemContainer(d,a),0===this.dom.$oItems.length?this.dom.$stage.append(d):c?this.dom.$oItems.eq(b).after(d):this.dom.$oItems.eq(b).before(d),this.refresh()},e.prototype.remove=function(a){this.dom.$oItems.eq(a).remove(),this.refresh()},e.prototype.addTriggerableEvents=function(){var b=a.proxy(function(b,c){return a.proxy(function(a){a.relatedTarget!==this&&(this.suppress([c]),b.apply(this,[].slice.call(arguments,1)),this.release([c]))},this)},this);a.each({next:this.next,prev:this.prev,to:this.to,destroy:this.destroy,refresh:this.refresh,replace:this.insertContent,add:this.add,remove:this.remove},a.proxy(function(a,c){this.dom.$el.on(a+".owl.carousel",b(c,a+".owl.carousel"))},this))},e.prototype.watchVisibility=function(){function c(a){return a.offsetWidth>0&&a.offsetHeight>0}function d(){c(this.dom.el)&&(this.dom.$el.removeClass("owl-hidden"),this.refresh(),b.clearInterval(this.e._checkVisibile))}c(this.dom.el)||(this.dom.$el.addClass("owl-hidden"),b.clearInterval(this.e._checkVisibile),this.e._checkVisibile=b.setInterval(a.proxy(d,this),500))},e.prototype.preloadAutoWidthImages=function(b){var c,d,e,f;c=0,d=this,b.each(function(g,h){e=a(h),f=new Image,f.onload=function(){c++,e.attr("src",f.src),e.css("opacity",1),c>=b.length&&(d.state.imagesLoaded=!0,d.init())},f.src=e.attr("src")||e.attr("data-src")||e.attr("data-src-retina")})},e.prototype.destroy=function(){this.dom.$el.hasClass(this.settings.themeClass)&&this.dom.$el.removeClass(this.settings.themeClass),this.settings.responsive!==!1&&this.off(b,"resize",this.e._resizer),this.transitionEndVendor&&this.off(this.dom.stage,this.transitionEndVendor,this.e._transitionEnd);for(var d in this.plugins)this.plugins[d].destroy();(this.settings.mouseDrag||this.settings.touchDrag)&&(this.dom.$stage.off("mousedown touchstart touchcancel"),a(c).off(".owl.dragEvents"),this.dom.stage.onselectstart=function(){},this.dom.$stage.off("dragstart",function(){return!1})),this.dom.$el.off(".owl"),null!==this.dom.$cItems&&this.dom.$cItems.remove(),this.e=null,this.dom.$el.data("owlCarousel",null),delete this.dom.el.owlCarousel,this.dom.$stage.unwrap(),this.dom.$items.unwrap(),this.dom.$items.contents().unwrap(),this.dom=null},e.prototype.op=function(a,b,c){var d=this.settings.rtl;switch(b){case"<":return d?a>c:c>a;case">":return d?c>a:a>c;case">=":return d?c>=a:a>=c;case"<=":return d?a>=c:c>=a}},e.prototype.on=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent("on"+b,c)},e.prototype.off=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent&&a.detachEvent("on"+b,c)},e.prototype.trigger=function(b,c,d){var e={item:{count:this.num.oItems,index:this.current()}},f=a.camelCase(a.grep(["on",b,d],function(a){return a}).join("-").toLowerCase()),g=a.Event([b,"owl",d||"carousel"].join(".").toLowerCase(),a.extend({relatedTarget:this},e,c));return this._supress[g.type]||(a.each(this.plugins,function(a,b){b.onTrigger&&b.onTrigger(g)}),this.dom.$el.trigger(g),"function"==typeof this.settings[f]&&this.settings[f].apply(this,g)),g},e.prototype.suppress=function(b){a.each(b,a.proxy(function(a,b){this._supress[b]=!0},this))},e.prototype.release=function(b){a.each(b,a.proxy(function(a,b){delete this._supress[b]},this))},e.prototype.browserSupport=function(){if(this.support3d=j(),this.support3d){this.transformVendor=i();var a=["transitionend","webkitTransitionEnd","transitionend","oTransitionEnd"];this.transitionEndVendor=a[h()],this.vendorName=this.transformVendor.replace(/Transform/i,""),this.vendorName=""!==this.vendorName?"-"+this.vendorName.toLowerCase()+"-":""}this.state.orientation=b.orientation},a.fn.owlCarousel=function(b){return this.each(function(){a(this).data("owlCarousel")||a(this).data("owlCarousel",new e(this,b))})},a.fn.owlCarousel.Constructor=e}(window.Zepto||window.jQuery,window,document),function(a,b){LazyLoad=function(b){this.owl=b,this.owl.options=a.extend({},LazyLoad.Defaults,this.owl.options),this.handlers={"changed.owl.carousel":a.proxy(function(a){"items"==a.property.name&&a.property.value&&!a.property.value.is(":empty")&&this.check()},this)},this.owl.dom.$el.on(this.handlers)},LazyLoad.Defaults={lazyLoad:!1},LazyLoad.prototype.check=function(){var a,c,d,e,f=b.devicePixelRatio>1?"data-src-retina":"data-src";for(d=0;d<this.owl.num.items;d++)e=this.owl.dom.$items.eq(d),e.data("owl-item").current===!0&&e.data("owl-item").loaded===!1&&(c=e.find(".owl-lazy"),a=c.attr(f),a=a||c.attr("data-src"),a&&(c.css("opacity","0"),this.preload(c,e)))},LazyLoad.prototype.preload=function(c,d){var e,f,g;c.each(a.proxy(function(c,h){this.owl.trigger("load",null,"lazy"),e=a(h),f=new Image,g=e.attr(b.devicePixelRatio>1?"data-src-retina":"data-src"),g=g||e.attr("data-src"),f.onload=a.proxy(function(){d.data("owl-item").loaded=!0,e.is("img")?e.attr("src",f.src):e.css("background-image","url("+f.src+")"),e.css("opacity",1),this.owl.trigger("loaded",null,"lazy")},this),f.src=g},this))},LazyLoad.prototype.destroy=function(){var a,b;for(a in this.handlers)this.owl.dom.$el.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.lazyLoad=LazyLoad}(window.Zepto||window.jQuery,window,document),function(a,b){AutoHeight=function(b){this.owl=b,this.owl.options=a.extend({},AutoHeight.Defaults,this.owl.options),this.handlers={"changed.owl.carousel":a.proxy(function(a){"position"==a.property.name&&this.owl.settings.autoHeight&&this.setHeight()},this)},this.owl.dom.$el.on(this.handlers)},AutoHeight.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},AutoHeight.prototype.setHeight=function(){var a,c=this.owl.dom.$items.eq(this.owl.current()),d=this.owl.dom.$oStage,e=0;this.owl.dom.$oStage.hasClass(this.owl.settings.autoHeightClass)||this.owl.dom.$oStage.addClass(this.owl.settings.autoHeightClass),a=b.setInterval(function(){e+=1,c.data("owl-item").loaded?(d.height(c.height()+"px"),clearInterval(a)):500===e&&clearInterval(a)},100)},AutoHeight.prototype.destroy=function(){var a,b;for(a in this.handlers)this.owl.dom.$el.off(a,this.handlers[a]);

for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.autoHeight=AutoHeight}(window.Zepto||window.jQuery,window,document),function(a,b,c){Video=function(b){this.owl=b,this.owl.options=a.extend({},Video.Defaults,this.owl.options),this.handlers={"resize.owl.carousel":a.proxy(function(a){this.owl.settings.video&&!this.isInFullScreen()&&a.preventDefault()},this),"refresh.owl.carousel changed.owl.carousel":a.proxy(function(){this.owl.state.videoPlay&&this.stopVideo()},this),"refresh.owl.carousel refreshed.owl.carousel":a.proxy(function(a){return this.owl.settings.video?void(this.refreshing="refresh"==a.type):!1},this),"changed.owl.carousel":a.proxy(function(a){this.refreshing&&"items"==a.property.name&&a.property.value&&!a.property.value.is(":empty")&&this.checkVideoLinks()},this)},this.owl.dom.$el.on(this.handlers),this.owl.dom.$el.on("click.owl.video",".owl-video-play-icon",a.proxy(function(a){this.playVideo(a)},this))},Video.Defaults={video:!1,videoHeight:!1,videoWidth:!1},Video.prototype.checkVideoLinks=function(){var a,b,c;for(c=0;c<this.owl.num.items;c++)b=this.owl.dom.$items.eq(c),b.data("owl-item").hasVideo||(a=b.find(".owl-video"),a.length&&(this.owl.state.hasVideos=!0,this.owl.dom.$items.eq(c).data("owl-item").hasVideo=!0,a.css("display","none"),this.getVideoInfo(a,b)))},Video.prototype.getVideoInfo=function(a,b){var c,d,e,f,g=a.data("vimeo-id"),h=a.data("youtube-id"),i=a.data("width")||this.owl.settings.videoWidth,j=a.data("height")||this.owl.settings.videoHeight,k=a.attr("href");if(g)d="vimeo",e=g;else if(h)d="youtube",e=h;else{if(!k)throw new Error("Missing video link.");e=k.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/),e[3].indexOf("youtu")>-1?d="youtube":e[3].indexOf("vimeo")>-1&&(d="vimeo"),e=e[6]}b.data("owl-item").videoType=d,b.data("owl-item").videoId=e,b.data("owl-item").videoWidth=i,b.data("owl-item").videoHeight=j,c={type:d,id:e},f=i&&j?'style="width:'+i+"px;height:"+j+'px;"':"",a.wrap('<div class="owl-video-wrapper"'+f+"></div>"),this.createVideoTn(a,c)},Video.prototype.createVideoTn=function(b,c){function d(a){f='<div class="owl-video-play-icon"></div>',e=k.settings.lazyLoad?'<div class="owl-video-tn '+j+'" '+i+'="'+a+'"></div>':'<div class="owl-video-tn" style="opacity:1;background-image:url('+a+')"></div>',b.after(e),b.after(f)}var e,f,g,h=b.find("img"),i="src",j="",k=this.owl;return this.owl.settings.lazyLoad&&(i="data-src",j="owl-lazy"),h.length?(d(h.attr(i)),h.remove(),!1):void("youtube"===c.type?(g="http://img.youtube.com/vi/"+c.id+"/hqdefault.jpg",d(g)):"vimeo"===c.type&&a.ajax({type:"GET",url:"http://vimeo.com/api/v2/video/"+c.id+".json",jsonp:"callback",dataType:"jsonp",success:function(a){g=a[0].thumbnail_large,d(g),k.settings.loop&&k.updateActiveItems()}}))},Video.prototype.stopVideo=function(){this.owl.trigger("stop",null,"video");var a=this.owl.dom.$items.eq(this.owl.state.videoPlayIndex);a.find(".owl-video-frame").remove(),a.removeClass("owl-video-playing"),this.owl.state.videoPlay=!1},Video.prototype.playVideo=function(b){this.owl.trigger("play",null,"video"),this.owl.state.videoPlay&&this.stopVideo();var c,d,e,f=a(b.target||b.srcElement),g=f.closest("."+this.owl.settings.itemClass);e=g.data("owl-item").videoType,id=g.data("owl-item").videoId,width=g.data("owl-item").videoWidth||Math.floor(g.data("owl-item").width-this.owl.settings.margin),height=g.data("owl-item").videoHeight||this.owl.dom.$stage.height(),"youtube"===e?c='<iframe width="'+width+'" height="'+height+'" src="http://www.youtube.com/embed/'+id+"?autoplay=1&v="+id+'" frameborder="0" allowfullscreen></iframe>':"vimeo"===e&&(c='<iframe src="http://player.vimeo.com/video/'+id+'?autoplay=1" width="'+width+'" height="'+height+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'),g.addClass("owl-video-playing"),this.owl.state.videoPlay=!0,this.owl.state.videoPlayIndex=g.data("owl-item").indexAbs,d=a('<div style="height:'+height+"px; width:"+width+'px" class="owl-video-frame">'+c+"</div>"),f.after(d)},Video.prototype.isInFullScreen=function(){var d=c.fullscreenElement||c.mozFullScreenElement||c.webkitFullscreenElement;return d&&a(d.parentNode).hasClass("owl-video-frame")&&(this.owl.speed(0),this.owl.state.isFullScreen=!0),d&&this.owl.state.isFullScreen&&this.owl.state.videoPlay?!1:this.owl.state.isFullScreen?(this.owl.state.isFullScreen=!1,!1):this.owl.state.videoPlay&&this.owl.state.orientation!==b.orientation?(this.owl.state.orientation=b.orientation,!1):!0},Video.prototype.destroy=function(){var a,b;this.owl.dom.$el.off("click.owl.video");for(a in this.handlers)this.owl.dom.$el.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.video=Video}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){Animate=function(b){this.core=b,this.core.options=a.extend({},Animate.Defaults,this.core.options),this.swapping=!0,this.previous=d,this.next=d,this.handlers={"change.owl.carousel":a.proxy(function(a){"position"==a.property.name&&(this.previous=this.core.current(),this.next=a.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":a.proxy(function(a){this.swapping="translated"==a.type},this),"translate.owl.carousel":a.proxy(function(){this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.dom.$el.on(this.handlers)},Animate.Defaults={animateOut:!1,animateIn:!1},Animate.prototype.swap=function(){if(1===this.core.settings.items&&this.core.support3d){this.core.speed(0);var b,c=a.proxy(this.clear,this),d=this.core.dom.$items.eq(this.previous),e=this.core.dom.$items.eq(this.next),f=this.core.settings.animateIn,g=this.core.settings.animateOut;this.core.current()!==this.previous&&(g&&(b=this.core.coordinates(this.previous)-this.core.coordinates(this.next),d.css({left:b+"px"}).addClass("animated owl-animated-out").addClass(g).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",c)),f&&e.addClass("animated owl-animated-in").addClass(f).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",c))}},Animate.prototype.clear=function(b){a(b.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.transitionEnd()},Animate.prototype.destroy=function(){var a,b;for(a in this.handlers)this.core.dom.$el.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Animate=Animate}(window.Zepto||window.jQuery,window,document),function(a,b,c){Autoplay=function(b){this.core=b,this.core.options=a.extend({},Autoplay.Defaults,this.core.options),this.handlers={"translated.owl.carousel refreshed.owl.carousel":a.proxy(function(){this.autoplay()},this),"play.owl.autoplay":a.proxy(function(a,b,c){this.play(b,c)},this),"stop.owl.autoplay":a.proxy(function(){this.stop()},this),"mouseover.owl.autoplay":a.proxy(function(){this.core.settings.autoplayHoverPause&&this.pause()},this),"mouseleave.owl.autoplay":a.proxy(function(){this.core.settings.autoplayHoverPause&&this.autoplay()},this)},this.core.dom.$el.on(this.handlers)},Autoplay.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},Autoplay.prototype.autoplay=function(){this.core.settings.autoplay&&!this.core.state.videoPlay?(b.clearInterval(this.interval),this.interval=b.setInterval(a.proxy(function(){this.play()},this),this.core.settings.autoplayTimeout)):b.clearInterval(this.interval)},Autoplay.prototype.play=function(){return c.hidden===!0||this.core.state.isTouch||this.core.state.isScrolling||this.core.state.isSwiping||this.core.state.inMotion?void 0:this.core.settings.autoplay===!1?void b.clearInterval(this.interval):void this.core.next(this.core.settings.autoplaySpeed)},Autoplay.prototype.stop=function(){b.clearInterval(this.interval)},Autoplay.prototype.pause=function(){b.clearInterval(this.interval)},Autoplay.prototype.destroy=function(){var a,c;b.clearInterval(this.interval);for(a in this.handlers)this.core.dom.$el.off(a,this.handlers[a]);for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)},a.fn.owlCarousel.Constructor.Plugins.autoplay=Autoplay}(window.Zepto||window.jQuery,window,document),function(a){"use strict";var b=function(c){this.core=c,this.initialized=!1,this.pages=[],this.controls={},this.template=null,this.$element=this.core.dom.$el,this.overrides={next:this.core.next,prev:this.core.prev,to:this.core.to},this.handlers={"changed.owl.carousel":a.proxy(function(b){"items"==b.property.name&&(this.initialized||(this.initialize(),this.initialized=!0),this.update(),this.draw()),this.filling&&(b.property.value.data("owl-item").dot=a(":first-child",b.property.value).find("[data-dot]").andSelf().data("dot"))},this),"change.owl.carousel":a.proxy(function(a){if("position"==a.property.name&&!this.core.state.revert&&!this.core.settings.loop&&this.core.settings.navRewind){var b=this.core.current(),c=this.core.maximum(),d=this.core.minimum();a.data=a.property.value>c?b>=c?d:c:a.property.value<d?c:a.property.value}this.filling=this.core.settings.dotsData&&"item"==a.property.name&&a.property.value&&a.property.value.is(":empty")},this),"refreshed.owl.carousel":a.proxy(function(){this.initialized&&(this.update(),this.draw())},this)},this.core.options=a.extend({},b.Defaults,this.core.options),this.$element.on(this.handlers)};b.Defaults={nav:!1,navRewind:!0,navText:["prev","next"],navSpeed:!1,navElement:"div",navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotData:!1,dotsSpeed:!1,dotsContainer:!1,controlsClass:"owl-controls"},b.prototype.initialize=function(){var b,c,d=this.core.settings;d.dotsData||(this.template=a("<div>").addClass(d.dotClass).append(a("<span>")).prop("outerHTML")),d.navContainer&&d.dotsContainer||(this.controls.$container=a("<div>").addClass(d.controlsClass).appendTo(this.$element)),this.controls.$indicators=d.dotsContainer?a(d.dotsContainer):a("<div>").hide().addClass(d.dotsClass).appendTo(this.controls.$container),this.controls.$indicators.on("click","div",a.proxy(function(b){var c=a(b.target).parent().is(this.controls.$indicators)?a(b.target).index():a(b.target).parent().index();b.preventDefault(),this.to(c,d.dotsSpeed)},this)),b=d.navContainer?a(d.navContainer):a("<div>").addClass(d.navContainerClass).prependTo(this.controls.$container),this.controls.$next=a("<"+d.navElement+">"),this.controls.$previous=this.controls.$next.clone(),this.controls.$previous.addClass(d.navClass[0]).html(d.navText[0]).hide().prependTo(b).on("click",a.proxy(function(){this.prev(d.navSpeed)},this)),this.controls.$next.addClass(d.navClass[1]).html(d.navText[1]).hide().appendTo(b).on("click",a.proxy(function(){this.next(d.navSpeed)},this));for(c in this.overrides)this.core[c]=a.proxy(this[c],this)},b.prototype.destroy=function(){var a,b,c,d;for(a in this.handlers)this.$element.off(a,this.handlers[a]);for(b in this.controls)this.controls[b].remove();for(d in this.overides)this.core[d]=this.overrides[d];for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)},b.prototype.update=function(){var a,b,c,d=this.core.settings,e=this.core.num.cItems/2,f=this.core.num.items-e,g=d.center||d.autoWidth||d.dotData?1:d.dotsEach||d.items;if("page"!==d.slideBy&&(d.slideBy=Math.min(d.slideBy,d.items)),d.dots)for(this.pages=[],a=e,b=0,c=0;f>a;a++)(b>=g||0===b)&&(this.pages.push({start:a-e,end:a-e+g-1}),b=0,++c),b+=this.core.num.merged[a]},b.prototype.draw=function(){var b,c,d="",e=this.core.settings,f=this.core.dom.$oItems,g=this.core.normalize(this.core.current(),!0);if(!e.nav||e.loop||e.navRewind||(this.controls.$previous.toggleClass("disabled",0>=g),this.controls.$next.toggleClass("disabled",g>=this.core.maximum())),this.controls.$previous.toggle(e.nav),this.controls.$next.toggle(e.nav),e.dots){if(b=this.pages.length-this.controls.$indicators.children().length,b>0){for(c=0;c<Math.abs(b);c++)d+=e.dotData?f.eq(c).data("owl-item").dot:this.template;this.controls.$indicators.append(d)}else 0>b&&this.controls.$indicators.children().slice(b).remove();this.controls.$indicators.find(".active").removeClass("active"),this.controls.$indicators.children().eq(a.inArray(this.current(),this.pages)).addClass("active")}this.controls.$indicators.toggle(e.dots)},b.prototype.onTrigger=function(b){var c=this.core.settings;b.page={index:a.inArray(this.current(),this.pages),count:this.pages.length,size:c.center||c.autoWidth||c.dotData?1:c.dotsEach||c.items}},b.prototype.current=function(){var b=this.core.normalize(this.core.current(),!0);return a.grep(this.pages,function(a){return a.start<=b&&a.end>=b}).pop()},b.prototype.getPosition=function(b){var c,d,e=this.core.settings;return"page"==e.slideBy?(c=a.inArray(this.current(),this.pages),d=this.pages.length,b?++c:--c,c=this.pages[(c%d+d)%d].start):(c=this.core.normalize(this.core.current(),!0),d=this.core.num.oItems,b?c+=e.slideBy:c-=e.slideBy),c},b.prototype.next=function(b){a.proxy(this.overrides.to,this.core)(this.getPosition(!0),b)},b.prototype.prev=function(b){a.proxy(this.overrides.to,this.core)(this.getPosition(!1),b)},b.prototype.to=function(b,c,d){var e;d?a.proxy(this.overrides.to,this.core)(b,c):(e=this.pages.length,a.proxy(this.overrides.to,this.core)(this.pages[(b%e+e)%e].start,c))},a.fn.owlCarousel.Constructor.Plugins.Navigation=b}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){"use strict";var e=function(c){this.core=c,this.hashes={},this.$element=this.core.dom.$el,this.handlers={"initialized.owl.carousel":a.proxy(function(){b.location.hash.substring(1)&&a(b).trigger("hashchange.owl.navigation")},this),"changed.owl.carousel":a.proxy(function(b){this.filling&&(b.property.value.data("owl-item").hash=a(":first-child",b.property.value).find("[data-hash]").andSelf().data("hash"),this.hashes[b.property.value.data("owl-item").hash]=b.property.value)},this),"change.owl.carousel":a.proxy(function(a){"position"==a.property.name&&this.core.current()===d&&"URLHash"==this.core.settings.startPosition&&(a.data=this.hashes[b.location.hash.substring(1)]),this.filling="item"==a.property.name&&a.property.value&&a.property.value.is(":empty")},this)},this.core.options=a.extend({},e.Defaults,this.core.options),this.$element.on(this.handlers),a(b).on("hashchange.owl.navigation",a.proxy(function(){var a=b.location.hash.substring(1),c=this.core.dom.$oItems,d=this.hashes[a]&&c.index(this.hashes[a])||0;return a?(this.core.dom.oStage.scrollLeft=0,void this.core.to(d,!1,!0)):!1},this))};e.Defaults={URLhashListener:!1},e.prototype.destroy=function(){var c,d;a(b).off("hashchange.owl.navigation");for(c in this.handlers)this.core.dom.$el.off(c,this.handlers[c]);for(d in Object.getOwnPropertyNames(this))"function"!=typeof this[d]&&(this[d]=null)},a.fn.owlCarousel.Constructor.Plugins.Hash=e}(window.Zepto||window.jQuery,window,document),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H;window.SmartUnderline={init:function(){},destroy:function(){}},window.getComputedStyle&&document.documentElement.getAttribute&&(a=1.618034,D="#b4d5fe",w="data-smart-underline-link-color",A="data-smart-underline-link-small",z="data-smart-underline-link-large",u="data-smart-underline-link-always",v="data-smart-underline-link-background-position",y="data-smart-underline-link-hover",g="data-smart-underline-container-id",B=[],G=function(){return+new Date},x={},H=function(){var a;return a=0,function(){return a+=1}}(),f=function(a,b){return b.clearRect(0,0,a.width,a.height)},d=function(a,b,c){var d,e,g,h,i,j,k,l,m,n;for(f(b,c),c.fillStyle="red",i=c.measureText(a).width,c.fillText(a,0,0),e=void 0,j=l=0;i>=0?i>=l:l>=i;j=i>=0?++l:--l)for(k=m=0,n=b.height;n>=0?n>=m:m>=n;k=n>=0?++m:--m)g=c.getImageData(j,k,j+1,k+1),h=g.data[0],d=g.data[3],255===h&&d>50&&(e||(e=k),k>e&&(e=k));return f(b,c),e},e=function(a){var b,c,e,f,g;return c=document.createElement("canvas"),e=c.getContext("2d"),c.height=c.width=2*parseInt(a.fontSize,10),e.textBaseline="top",e.textAlign="start",e.fontStretch=1,e.angle=0,e.font=""+a.fontVariant+" "+a.fontStyle+" "+a.fontWeight+" "+a.fontSize+"/"+a.lineHeight+" "+a.fontFamily,b=d("I",c,e),g=d("g",c,e),f=g-b,{baselineY:b,descenderHeight:f}},c=function(a){var b,c,d,e,f,g,h,i;return i=document.createElement("div"),i.style.display="block",i.style.position="absolute",i.style.bottom=0,i.style.right=0,i.style.width=0,i.style.height=0,i.style.margin=0,i.style.padding=0,i.style.visibility="hidden",i.style.overflow="hidden",g=document.createElement("span"),e=document.createElement("span"),g.style.display="inline",e.style.display="inline",g.style.fontSize="0px",e.style.fontSize="2000px",g.innerHTML="X",e.innerHTML="X",i.appendChild(g),i.appendChild(e),a.appendChild(i),h=g.getBoundingClientRect(),f=e.getBoundingClientRect(),a.removeChild(i),b=h.top-f.top,d=f.height,c=Math.abs(b/d)},b={},o=function(d){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;return n=getComputedStyle(d),l="font:"+n.fontFamily+"size:"+n.fontSize+"weight:"+n.fontWeight,(k=b[l])?k:(t=e(n),i=t.baselineY,o=t.descenderHeight,m=d.getClientRects(),(null!=m?m.length:void 0)?(f=1,s=m[0].height-f,-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&(f=.98,j=c(d),i=j*s*f),p=i+o,q=parseInt(n.fontSize,10),r=3,g=i+Math.max(r,o/a),4===o&&(g=p-1),3===o&&(g=p),h=Math.round(100*g/s),o>2&&q>10&&100>=h?(b[l]=h,h):void 0):void 0)},t=function(a){var b,c;return"transparent"===a||"rgba(0, 0, 0, 0)"===a?!0:(c=a.match(/^rgba\(.*,(.+)\)/i),2===(null!=c?c.length:void 0)&&(b=parseFloat(c[1]),1e-4>b)?!0:!1)},m=function(a){var b,c,d,e;return c=getComputedStyle(a),b=c.backgroundColor,d=a.parentNode,e=!d||d===document.documentElement||d===a,"none"!==c.backgroundImage?null:t(b)?e?a.parentNode||a:m(d):a},p=function(a){return i(a)||h(a)},i=function(a){var b,c,d,e,f,g;for(e=a.children,c=0,d=e.length;d>c;c++)return b=e[c],"img"===(f=null!=(g=b.tagName)?g.toLowerCase():void 0)||"video"===f||"canvas"===f||"embed"===f||"object"===f||"iframe"===f?!0:i(b);return!1},h=function(a){var b,c,d,e,f;for(f=a.children,d=0,e=f.length;e>d;d++)return b=f[d],c=getComputedStyle(b),"inline"!==c.display?!0:h(b);return!1},l=function(a){var b;return b=getComputedStyle(a).backgroundColor,a===document.documentElement&&t(b)?"rgb(255, 255, 255)":b},n=function(a){return getComputedStyle(a).color},F=document.createElement("style"),j=function(a,b){var c,d;return null==b&&(b=0),c=a.parentNode,d=!c||c===document||c===a,d?b:(c.hasAttribute(g)&&(b+=1),b+j(c))},E=function(a){var b,c,d;d=[];for(c in a)b=a[c],b.depth=j(b.container),d.push(b);return d.sort(function(a,b){return a.depth<b.depth?-1:a.depth>b.depth?1:0}),d},r=function(a){var b,c,d,e,f;return f=getComputedStyle(a),d=parseFloat(f.fontSize),console.log("style.textDecoration",a,f.textDecoration),"inline"===f.display&&d>=10&&!p(a)&&(c=m(a),c&&(b=o(a)))?(a.setAttribute(w,n(a)),a.setAttribute(v,b),e=c.getAttribute(g),e?x[e].links.push(a):(e=H(),c.setAttribute(g,e),x[e]={id:e,container:c,links:[a]}),!0):!1},C=function(){var a,b,c,d,e,f,h,i,j,k,m,p,q,r,s;for(k="",e=E(x),h={},m=0,q=e.length;q>m;m++){for(d=e[m],i={},s=d.links,p=0,r=s.length;r>p;p++)f=s[p],i[n(f)]=!0,h[o(f)]=!0;a=l(d.container);for(c in i)j=function(a){return null==a&&(a=""),"["+g+'="'+d.id+'"] a['+w+'="'+c+'"]['+u+"]"+a+",\n["+g+'="'+d.id+'"] a['+w+'="'+c+'"]['+y+"]"+a+":hover"},k+=""+j()+", "+j(":visited")+" {\n  color: "+c+";\n  text-decoration: none !important;\n  text-shadow: 0.03em 0 "+a+", -0.03em 0 "+a+", 0 0.03em "+a+", 0 -0.03em "+a+", 0.06em 0 "+a+", -0.06em 0 "+a+", 0.09em 0 "+a+", -0.09em 0 "+a+", 0.12em 0 "+a+", -0.12em 0 "+a+", 0.15em 0 "+a+", -0.15em 0 "+a+";\n  background-color: transparent;\n  background-image: -webkit-linear-gradient("+a+", "+a+"), -webkit-linear-gradient("+a+", "+a+"), -webkit-linear-gradient("+c+", "+c+");\n  background-image: -moz-linear-gradient("+a+", "+a+"), -moz-linear-gradient("+a+", "+a+"), -moz-linear-gradient("+c+", "+c+");\n  background-image: -o-linear-gradient("+a+", "+a+"), -o-linear-gradient("+a+", "+a+"), -o-linear-gradient("+c+", "+c+");\n  background-image: -ms-linear-gradient("+a+", "+a+"), -ms-linear-gradient("+a+", "+a+"), -ms-linear-gradient("+c+", "+c+");\n  background-image: linear-gradient("+a+", "+a+"), linear-gradient("+a+", "+a+"), linear-gradient("+c+", "+c+");\n  -webkit-background-size: 0.05em 1px, 0.05em 1px, 1px 1px;\n  -moz-background-size: 0.05em 1px, 0.05em 1px, 1px 1px;\n  background-size: 0.05em 1px, 0.05em 1px, 1px 1px;\n  background-repeat: no-repeat, no-repeat, repeat-x;\n}\n\n"+j("::selection")+" {\n  text-shadow: 0.03em 0 "+D+", -0.03em 0 "+D+", 0 0.03em "+D+", 0 -0.03em "+D+", 0.06em 0 "+D+", -0.06em 0 "+D+", 0.09em 0 "+D+", -0.09em 0 "+D+", 0.12em 0 "+D+", -0.12em 0 "+D+", 0.15em 0 "+D+", -0.15em 0 "+D+";\n  background: "+D+";\n}\n\n"+j("::-moz-selection")+" {\n  text-shadow: 0.03em 0 "+D+", -0.03em 0 "+D+", 0 0.03em "+D+", 0 -0.03em "+D+", 0.06em 0 "+D+", -0.06em 0 "+D+", 0.09em 0 "+D+", -0.09em 0 "+D+", 0.12em 0 "+D+", -0.12em 0 "+D+", 0.15em 0 "+D+", -0.15em 0 "+D+";\n  background: "+D+";\n}"}for(b in h)k+="a["+v+'="'+b+'"] {\n  background-position: 0% '+b+"%, 100% "+b+"%, 0% "+b+"%;\n}";return F.innerHTML=k},s=function(){var a,b,c;return b=this,a=b.hasAttribute(y),!a&&(c=r(b))?(b.setAttribute(y,""),C()):void 0},q=function(a){var b,c,d,e,f,g;if(e=G(),c=document.querySelectorAll(""+(a.location?a.location+" ":"")+"a"),c.length){for(x={},f=0,g=c.length;g>f;f++)b=c[f],d=r(b),console.log("madeSmart",d),d?b.setAttribute(u,""):(b.removeEventListener("mouseover",s),b.addEventListener("mouseover",s));return C(),document.body.appendChild(F),B.push(G()-e)}},k=function(){var a,b,c,d,e,f;for(null!=(d=F.parentNode)&&d.removeChild(F),Array.prototype.forEach.call(document.querySelectorAll("["+y+"]"),function(a){return a.removeEventListener(s)}),e=[w,A,z,u,y,g],f=[],b=0,c=e.length;c>b;b++)a=e[b],f.push(Array.prototype.forEach.call(document.querySelectorAll("["+a+"]"),function(b){return b.removeAttribute(a)}));return f},window.SmartUnderline={init:function(a){return null==a&&(a={}),"loading"===document.readyState?(window.addEventListener("DOMContentLoaded",function(){return q(a)}),window.addEventListener("load",function(){return k(),q(a)})):(k(),q(a))},destroy:function(){return k()},performanceTimes:function(){return B}})}.call(this),console.log("Smart undrline"),"document"in self&&("classList"in document.createElement("_")?!function(){"use strict";var a=document.createElement("_");if(a.classList.add("c1","c2"),!a.classList.contains("c2")){var b=function(a){var b=DOMTokenList.prototype[a];DOMTokenList.prototype[a]=function(a){var c,d=arguments.length;for(c=0;d>c;c++)a=arguments[c],b.call(this,a)}};b("add"),b("remove")}if(a.classList.toggle("c3",!1),a.classList.contains("c3")){var c=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(a,b){return 1 in arguments&&!this.contains(a)==!b?b:c.call(this,a)}}a=null}():!function(a){"use strict";if("Element"in a){var b="classList",c="prototype",d=a.Element[c],e=Object,f=String[c].trim||function(){return this.replace(/^\s+|\s+$/g,"")},g=Array[c].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},h=function(a,b){this.name=a,this.code=DOMException[a],this.message=b},i=function(a,b){if(""===b)throw new h("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(b))throw new h("INVALID_CHARACTER_ERR","String contains an invalid character");return g.call(a,b)},j=function(a){for(var b=f.call(a.getAttribute("class")||""),c=b?b.split(/\s+/):[],d=0,e=c.length;e>d;d++)this.push(c[d]);this._updateClassName=function(){a.setAttribute("class",this.toString())}},k=j[c]=[],l=function(){return new j(this)};if(h[c]=Error[c],k.item=function(a){return this[a]||null},k.contains=function(a){return a+="",-1!==i(this,a)},k.add=function(){var a,b=arguments,c=0,d=b.length,e=!1;do a=b[c]+"",-1===i(this,a)&&(this.push(a),e=!0);while(++c<d);e&&this._updateClassName()},k.remove=function(){var a,b,c=arguments,d=0,e=c.length,f=!1;do for(a=c[d]+"",b=i(this,a);-1!==b;)this.splice(b,1),f=!0,b=i(this,a);while(++d<e);f&&this._updateClassName()},k.toggle=function(a,b){a+="";var c=this.contains(a),d=c?b!==!0&&"remove":b!==!1&&"add";return d&&this[d](a),b===!0||b===!1?b:!c},k.toString=function(){return this.join(" ")},e.defineProperty){var m={get:l,enumerable:!0,configurable:!0};try{e.defineProperty(d,b,m)}catch(n){-2146823252===n.number&&(m.enumerable=!1,e.defineProperty(d,b,m))}}else e[c].__defineGetter__&&d.__defineGetter__(b,l)}}(self)),window.TNY||(window.TNY={});var TNY=window.TNY;TNY.utils={},TNY.debug={},function(a,b,c,d){"use strict";{var e=function(){},f=c.getElementsByTagName("html"),g=b.console||{log:e,warn:e,error:e},h=a(f),i=a(c.getElementsByTagName("body"));h.add(i)}if(f[0].className=f[0].className.replace("no-js","js"),TNY.utils.parseTemplate=function(a,b){var c;for(var d in b)c=new RegExp("{{{"+d+"}}}","g"),a=a.replace(c,b[d]);return a},TNY.utils.cookie={create:function(a,b,c){var d="";if(c){var e=new Date;e.setTime(e.getTime()+24*c*60*60*1e3),d="; expires="+e.toGMTString()}else d="";document.cookie=a+"="+b+d+"; path=/"},read:function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b))return e.substring(b.length,e.length)}return null},erase:function(a){this.create(a,"",-1)}},b.location.search.indexOf("splash")>-1){var j=c.getElementById("splash-continue");j.innerText=c.referrer}i.delegate(":input","focus",function(){a(this).addClass("focused")}),window.TNY.Info=window.TNY.Info?window.TNY.Info:{};var k=window.navigator,l=k.userAgent;TNY.Info.isRetina=window.devicePixelRatio&&window.devicePixelRatio>1,TNY.Info.isIDevice=/iphone|ipod|ipad/i.test(l),TNY.Info.isMobileChrome=-1!==l.indexOf("Android")&&/Chrome\/[.0-9]*/.test(l),TNY.Info.isMobileSafari=TNY.Info.isIDevice&&-1!==l.indexOf("Safari")&&-1===l.indexOf("CriOS"),TNY.Info.isTablet=TNY.Info.isMobileSafari&&l.indexOf("iPad")>-1||TNY.Info.isMobileChrome&&l.indexOf("Mobile")<0,TNY.Info.OS=TNY.Info.isIDevice?"ios":TNY.Info.isMobileChrome?"android":"unsupported",TNY.Info.OSVersion=l.match(/(OS|Android) (\d+[_|.]\d+)/i),TNY.Info.OSVersion=TNY.Info.OSVersion&&TNY.Info.OSVersion[2]?+TNY.Info.OSVersion[2].replace("_","."):0,TNY.Info.isIosUiWebView=TNY.Info.isIDevice?/(iPhone|iPod|iPad).*AppleWebKit(?!.*Version)/i.test(l):!1,TNY.Info.isMobile=!TNY.Info.isTablet&&(TNY.Info.isMobileSafari||TNY.Info.isMobileChrome||document.documentElement.clientWidth<590)?!0:!1,TNY.Info.view=TNY.Info.isMobile?"mobile":TNY.Info.isTablet?"tablet":"desktop",TNY.urlParams=a.deparam.querystring(),TNY.Info.pageType=function(){if(document.body.className.indexOf("homepage")>-1)return"homepage";var a=document.getElementById("articleBody")||!1;if(a)return"article";var b=document.querySelector("#main.index")||!1;if(b)return"index";var c=document.querySelector("meta[content='Magazine']")||!1;if(c)return"index";var d=document.querySelector("meta[content='Goings On About Town']")||!1;return d?"index":""}(),TNY.trackEvent=function(a,b,c,d,e){window.optimizely=window.optimizely||[],window.pageTracker=window.pageTracker||{};window.optimizely.push(["trackEvent",b+", "+c])};var m=c.getElementsByName("specificPage");a(m).on("keyup",function(){isNaN(parseFloat(m[0].value))||!isFinite(m[0].value)||m[0].value<=0||m[0].value>parseInt(c.getElementById("maxPages").innerHTML,10)||""===m[0].value?a(this).addClass("error"):a(this).removeClass("error")}),a("#goToPage").on("submit",function(a){var d;a.preventDefault(),!isNaN(parseFloat(m[0].value))&&isFinite(m[0].value)&&m[0].value>0&&m[0].value<=parseInt(c.getElementById("maxPages").innerHTML,10)&&(b.location.pathname.toString().indexOf("/contributors/")>-1?b.location.pathname.toString().indexOf("/all/")>-1?b.location=b.location.origin+b.location.pathname.replace(/\/all\/\d{1,5}/,"/all/"+m[0].value)+b.location.search:b.location.pathname.toString().indexOf("/all")>-1?b.location=b.location.origin+b.location.pathname.replace(/\/all/,"/all/"+m[0].value)+b.location.search:(d="/"===window.location.pathname.toString().charAt(window.location.pathname.toString().length-1)?"all/":"/all/",b.location=b.location.origin+b.location.pathname+d+m[0].value+b.location.search):b.location.pathname.toString().indexOf("/page/")>-1?b.location=b.location.origin+b.location.pathname.replace(/\/page\/\d{1,5}/,"/page/"+m[0].value)+b.location.search:(d="/"===window.location.pathname.toString().charAt(window.location.pathname.toString().length-1)?"page/":"/page/",b.location=b.location.origin+b.location.pathname+d+m[0].value+b.location.search))}),TNY.getRandomCartoon=function(b){return b="undefined"==typeof b&&null!==b?"":"?issueDate="+b,a.ajax({url:"//contest.newyorker.com/randomcartoon/randomcartoon.aspx"+b,dataType:"jsonp"})},TNY.utils.staticReady=function(){function a(a){"object"==typeof a?g.log(a[0],a[1]):g.log(a)}function b(b){b=b||!1;var c={render:!0};if(b)if(TNY.utils[b])a(TNY.utils[b](c));else{var d=document,e=d.getElementsByTagName("head")[0],f=d.createElement("script"),g=!1;f.src="/wp-content/assets/js/module/helper.js",f.onload=f.onreadystatechange=function(){g||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(g=!0,TNY.utils[b]&&a(TNY.utils[b](c)),f.onload=f.onreadystatechange=null,e.removeChild(f))},e.appendChild(f)}}if("object"==typeof g)return g.quote=function(){return b("staticString")},g.creator=function(){return b("staticResult")},!1}(),navigator.userAgent&&navigator.userAgent.match(/Firefox/)&&a(document.getElementsByTagName("html")).addClass("reduce-descender-spacing"),"object"==typeof g&&g.log("The New Yorker"),document.querySelectorAll("#hd").length>0&&document.querySelector("#hd").classList.add("jsready"),"object"==typeof SmartUnderline&&SmartUnderline.init({location:"#articleBody"});window.setTimeout(function(){if("desktop"===TNY.Info.view&&localStorage){var a=localStorage.getItem("tmp")?JSON.parse(localStorage.getItem("tmp")):{},b=(new Date).getMonth()+1;if(a.lastABCheck===d||a.lastABCheck!==b){a.lastABCheck=b,localStorage.setItem("tmp",JSON.stringify(a));var c=".advertisement",e=document.querySelectorAll(c)||!1;if(e){for(var f=!0,g=e.length,h=0;g>h;h++)e[h].clientHeight>0&&(f=!1);f&&CN.stats.omniture.trackAction("blockingEnabled",document,{events:"event48"})}}}},5e3)}(jQuery,window,document),function(a){"use strict";function b(){var b=document.getElementById("page-header"),d=a(document.getElementById("page-header")),e=b.querySelector(".close-button");c.addEventListener("click",function(a){a||window.event;TNY.reajs.checkViewport("mobile")&&d.toggleClass("opened")}),e.addEventListener("click",function(){d.removeClass("opened")})}var c=document.getElementById("goat-nav-close");c&&b()}(jQuery),function(a){function b(){var b={year:h.year.value,month:h.month.value,action:h.ajaxAction.value};a.ajax({url:m,type:"get",data:b}).fail(function(){console.log("fail")}).done(function(a){o=h.year.value,p=h.month.value,g(a),c(a.length)}).always(function(){l.removeClass("loading")})}function c(){}function d(){var a=i.getElementsByTagName("li")[0];i.style.height=a.offsetHeight}function e(){i.removeAttribute("style"),k.removeAttribute("style"),j.removeClass("owl-carousel owl-loaded"),q&&(q.destroy(),q=null)}function f(a){var b,c=4,d=!1;a=a||0,TNY.reajs.checkViewport("mobile")?a>1&&(d=!0,c=1):a>4&&(d=!0),d&&(b={items:4,responsiveClass:!0,responsive:{0:{items:1,nav:!0},600:{items:4,nav:!0}},lazyLoad:!1,loop:!1,dots:!1,autoplay:!1,navText:["<img src='/wp-content/assets/img/gallery/previous.svg'>","<img src='/wp-content/assets/img/gallery/next.svg'>"],
margin:0},j.addClass("owl-carousel"),j.owlCarousel(b),q=j.data("owlCarousel"))}function g(a){if(a){for(var b="",c=k.getElementsByTagName("nav")[0],g=0,h=a.length;h>g;g++)b+=a[g];c&&k.removeChild(c),d(),i.innerHTML=b,e(),f(h)}}var h=document.getElementById("issueDateForm"),i=document.getElementById("allIssuesSlider");if(h&&i){var j=a(i),k=document.getElementById("all-issues-slider"),l=a(k),m=[window.location.protocol,"//",window.location.host,"/wp-admin/admin-ajax.php"].join(""),n=4,o=h.year.value,p=h.month.value,q=null;f(n),h.onchange=function(){(o!==h.year.value||p!==h.month.value)&&(l.addClass("loading"),b())}}}(jQuery),function(a){"use strict";function b(b){b||(b=window.event),console.log(b),b.preventDefault(),d.each(function(b,c){a(c).toggleClass("isVisible")}),c.each(function(b,c){a(c).toggleClass("closing")}),a(b.srcElement).hasClass("bignav-search")?f.focus():e.focus()}var c=a(".search-toggle"),d=a(".navSearch"),e=a(c[0]).find("input:text"),f=a(c[1]).find("input:text");document.getElementById("cse")&&(google.load("search","1",{language:"en",nocss:!0}),google.setOnLoadCallback(function(){var a="007727838613746720673:smnx4xhvj6a",b={},c={};c.keys=[{label:"Relevance",key:""},{label:"Date",key:"date"}],b.enableOrderBy=!0,b.orderByOptions=c,b.enableImageSearch=!1;var d=new google.search.CustomSearchControl(a,b);d.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);var e=new google.search.DrawOptions;e.setAutoComplete(!0),d.draw("cse",e),TNY.urlParams.q&&d.execute(TNY.urlParams.q)},!0)),c.on("click",b)}(jQuery),function(a,b){var c={init:function(){var a,c;if(a=b.getElementsByClassName("media-embed-wrapper"),0===a.length)return!1;for(c=a.length-1;c>=0;c--)this.makeElResponsive(a[c]);return a},makeElResponsive:function(a){var b,c,d,e=a,f=e.querySelector("iframe");f.offsetHeight||f.offsetWidth||!(isNaN(f.style.height)&&isNaN(f.style.width)||!f.style.height&&!f.style.width)||(f.height="9px",f.width="16px"),b=f.getAttribute("height")&&!isNaN(parseInt(f.getAttribute("height"),10))?parseInt(f.getAttribute("height"),10):getComputedStyle(f).height,c=f.getAttribute("width")&&!isNaN(parseInt(f.getAttribute("width"),10))?parseInt(f.getAttribute("width"),10):getComputedStyle(f).width,d=b/c,f.removeAttribute("height"),f.removeAttribute("width"),e.style.paddingBottom=-1!==f.src.indexOf("instagram")?"120%":100*d+"%"}};TNY.responsiveMedia=c,TNY.responsiveMedia.init()}(window,document),function(a,b,c,d){"use strict";b.TNY||(b.TNY={});var e=b.TNY;window.addEventListener=window.addEventListener||window.attachEvent;var f=function(){var a=e.utils.parseTemplate,b=function(){},c='<div class="fb-share-button" data-href="{{{linkURL}}}" data-type="{{{type}}}"></div>',f='<a href="http://twitter.com/share" class="twitter-share-button" data-size="{{{size}}}" data-align="{{{align}}}" data-url="{{{linkURL}}}" data-counturl="{{{linkURL}}}" data-text="{{{text}}}" data-count="horizontal" data-via="NewYorker" data-related="NewYorker"></a>',g='<g:plusone data-href="{{{href}}}" data-annotation="{{{annotation}}}" data-size="{{{size}}}" data-width="{{{width}}}"" data-align="{{{left}}}" data-callback="{{{callback}}}" data-recommendations="{{{recommendations}}}"></g:plusone>',h='<script type="IN/Share" data-url="{{{url}}}" data-counter="{{{counter}}}" data-showzero={{{showzero}}} data-onsuccess="{{{onsuccess}}}" data-onerror="{{{onerror}}}"></script>',i='<a href="//www.pinterest.com/pin/create/button/?url={{{linkURL}}}&media={{{imageURL}}}&description={{{description}}}" target="_blank" data-pin-do="buttonPin" data-pin-config="{{{pinLoc}}}"><img src="//assets.pinterest.com/images/pidgets/pin_it_button.png" /></a>';return{createFBButton:function(b,d,e,f){var g;if(e=e||{},b="string"==typeof b?document.querySelector(b):b,!b)throw new Error("No provided 'el'.");b.innerHTML="",g=a(c,{linkURL:d||window.location.href,type:e.type||"button-count"}),b.innerHTML=g,"undefined"!=typeof FB&&"undefined"!=typeof FB.XFBML&&(FB.XFBML.parse(b),f&&f())},createGPlusButton:function(b,c,d,e){var f,h={href:c||window.location.href,size:"medium",annotation:"none",width:"",align:"left",expandTo:"",callback:e&&"function"==typeof e?e:"",recommendations:"false"};if(b="string"==typeof b?document.querySelector(b):b,!b)throw new Error("No provided 'el'.");if(d)for(var i in d)h[i]=d[i];b.innerHTML="","undefined"!=typeof gapi&&"undefined"!=typeof gapi.plusone?gapi.plusone.render(b,h):(f=a(g,h),b.innerHTML=f)},createTwitterButton:function(b,c,e,g){var h,i=c||window.location.href,j={align:"left",count:"horizontal",size:"medium",counturl:d,text:"New Yorker"};if(b="string"==typeof b?document.querySelector(b):b,!b)throw new Error("No provided 'el'.");if(e)for(var k in e)j[k]=e[k];b.innerHTML="","undefined"!=typeof twttr&&"undefined"!=typeof twttr.widgets?(g||(g=null),twttr.widgets.createShareButton(i,b,g,j)):(j.linkURL=i,h=a(f,j),b.innerHTML=h)},createLinkedInButton:function(c,d,e,f){var g,i={url:d||window.location.href,onsuccess:f||b,onerror:f||b,counter:"right",showzero:!0};if(c="string"==typeof c?document.querySelector(c):c,!c)throw new Error("No provided 'el'.");if(e)for(var j in e)i[j]=e[j];c.innerHTML="",g=a(h,i),c.innerHTML=g,"undefined"!=typeof IN&&IN.init()},createPinItButton:function(b,c,d,e,f){var g,h={linkURL:d||window.location.href,imageURL:c||null,pinLoc:"none",description:"The New Yorker"};if(b="string"==typeof b?document.querySelector(b):b,!b||!h.imageURL)throw new Error("No provided 'el'. or 'imageURL'");if(h.linkURL=encodeURIComponent(h.linkURL),h.imageURL=encodeURIComponent(h.imageURL),e)for(var j in e)h[j]=e[j];b.innerHTML="",g=a(i,h),b.innerHTML=g,f&&f()}}}();e.Jovial=f}(jQuery,window,document),function(a){window.TNY||(window.TNY={});var b=window.TNY,c={imageSrcAttribute:"data-src-mobile",init:function(){this.setImageSrcAttribute();for(var a=document.querySelectorAll("img.lazy-image, img.post-load"),b=0,c=a.length;c>b;b++)this.loadImage(a[b])},setImageSrcAttribute:function(){var c=b.Info===a?"mobile":b.Info.view===a?"mobile":b.Info.view;"mobile"!=c&&(this.imageSrcAttribute="data-src")},loadImage:function(a){var b=a.getAttribute(this.imageSrcAttribute)||a.getAttribute("data-src")||a.getAttribute("data-lazy-src")||!1;if(b){var c=new Image;c.onload=function(){a.src=b},c.src=b}}};c.init()}(),function(a){"use strict";var b={cache:{},key:"module-cache",serviceURL:"/svc/module/",init:function(){this.cache=JSON.parse(localStorage.getItem(this.key)||"{}");for(var a=document.querySelectorAll(".lazy-module, .post-load-module"),b=0,c=a.length;c>b;b++)this.load(a[b])},load:function(b,c){if(b=b||!1){var d=this,e=b.getAttribute("data-name")||!1,f=b.getAttribute("data-args")||!1;if(e&&this.checkAgainstView(b)===!0){f&&(e+="?"+f);var g=this.getCache(e,b);g?this.insert(b,g,c):a.get(this.serviceURL+e,function(a){d.setCache(e,a),d.insert(b,a,c)})}}},insert:function(a,b,c){this.replaceInDom(a,b),c&&c()},replaceInDom:function(a,b){if(!b)return!1;var c,d=document.createElement("div"),e=a.parentNode,f=null,g=null;d.innerHTML=b,f=d.children,c=f.length,g=a;for(var h=0;c>h;h++)g=e.insertBefore(f[h],g.nextSibling);e.removeChild(a)},getCache:function(a,b){var c=this.cache[a]||!1;return c?(new Date).getTime()>c.timestamp+this.getExpireTimeInMilliseconds(b)?!1:c.content:!1},setCache:function(a,b){this.cache[a]={timestamp:(new Date).getTime(),content:b},localStorage.setItem(this.key,JSON.stringify(this.cache))},getExpireTimeInMilliseconds:function(a){var b=a.getAttribute("data-cache")||"1m",c=0,d=b.indexOf("s")>0?"s":b.indexOf("h")>0?"h":"m";switch(b=parseInt(b,10),d){case"h":c=1e3*b*60*60;break;case"s":c=1e3*b;break;default:c=1e3*b*60}return c},checkAgainstView:function(a){var b=a.getAttribute("data-view")||"all";if("all"===b)return!0;for(var c=b.split(","),d=c.length,e=0;d>e;e++)if(c[e]==TNY.Info.view)return!0;return!1}};TNY.Module=b,window.addEventListener("DOMContentLoaded",function(){TNY.Module.init()},!1)}(jQuery),function(){var a={config:[{selector:"span.magazine-date[content='2015-02-23']",path:["90th/cover-fan/app.js","90th/cover-fan/style.css"],note:"90th Anniversary",jquery:!0,view:"desktop",id:"90th"},{selector:".cover-info h3#cover-2015-02-23, body.homepage .article-cover-story-nine-ninety figure, body.homepage #cover-2015-02-23",path:["90th/reveal/app.js","90th/reveal/style.css"],note:"90th Anniversary 'reveal' on curated Homepage, Magazine module, and ToC",jQuery:!1,view:"all",id:"90th-reveal"},{selector:"#logo h1",path:["90th/logo/style.css"],note:"90th Anniversary logo",jquery:!0,view:"tablet,desktop",range:{start:"Feb 16, 2015",end:"Mar 2, 2015"},id:"90th-logo"}],init:function(){for(var a=this.config.length,b=0;a>b;b++){var c=this.config[b],d=this.checkView(c.view);if(d){var e=document.querySelectorAll(c.selector),f=this.checkRange(c),g=this.checkDebug(c.id);(f&&e.length||g)&&this.process(c)}}},checkDebug:function(a){return window.localStorage&&"true"===localStorage.getItem(a)?!0:!1},checkView:function(a){return"all"===a||a.indexOf(TNY.Info.view)>-1?!0:!1},checkRange:function(a){var b=a.range||!1;if(b){var c=b.start||!1,d=b.end||!1;if(c&&d){var e=Date.now(),f=Date.parse(c),g=Date.parse(d);if(e>f&&g>e)return!0}return!1}return!0},process:function(a){if(a.jquery)if(window.jQuery)this.processItem(a);else{var b=this;setTimeout(function(){b.process(a)},99)}else this.processItem(a)},processItem:function(a){var b=a.note||"";if("string"==typeof a.path)this.load(a.path,b);else for(var c=0;c<a.path.length;c++)this.load(a.path[c],b)},load:function(a,b){var c=!1,d="/wp-content/assets/static/";"css"===a.substr(-3)?(c=document.createElement("link"),c.setAttribute("rel","stylesheet"),c.setAttribute("type","text/css"),c.setAttribute("href",d+a)):(c=document.createElement("script"),c.setAttribute("src",d+a)),c&&(console.log("Loading "+a+"("+b+")"),document.getElementsByTagName("head")[0].appendChild(c))}};a.init()}(),function(a){"use strict";function b(a){if(!a)return null;var b=this.processSubmit.bind(this);this.form=a,this.processing=!1,this.messanger=a.parentNode.querySelector(e),this.messangerOriginalClass=this.messanger.className,this.newsletterId=[],this.form.addEventListener("submit",b),this.form.email.addEventListener("keypress",function(a){13==a.which&&(a.preventDefault(),b(a))})}b.prototype.processSubmit=function(a){return a.preventDefault(),this.processing?!1:(this.clearMessage(),this.validate()?void this.signUpNewsletters():!1)},b.prototype.signUpNewsletters=function(){var b=(this.form,{}),c=this.afterPost.bind(this);this.processing=!0,a(this.form).find("input").each(function(){b[this.name]=a(this).val()}),b["newsletterId[]"]=this.newsletterId,b=a.param(b),a.post("/wp-admin/admin-ajax.php",b,c)},b.prototype.afterPost=function(b){this.processing=!1,0!==b?(a(this.form).before('<div class="newsletter-message"><span class="newsletter-thankyou">Thank you for signing up</span></div>'),this.form.style.display="none"):(a(this.form.email).addClass("error"),this.sayMessage('<span class="newsletter-error">There was an error making your request</span>')),this.analyticsNewsletterType()},b.prototype.analyticsNewsletterType=function(){for(var a,b=[],c=this.newsletterId,d=0,e=c.length;e>d;d++){switch(c[d]){case"217":a="daily";break;case"442":a="cartoons";break;case"5129":a="borowitz";break;default:a=null}a&&b.push(a)}b=b.join(","),CN.stats.omniture.trackActionEvar("newsletterSignup",this,"list2",b),s.events="",s.list2=""},b.prototype.validate=function(){var a=this.form.email.value;return""===a||null===a.match(d)?(this.sayMessage('<span class="newsletter-error">Please enter a valid email address.</span>'),!1):(this.processIds(),this.newsletterId.length<0?(this.sayMessage('<span class="newsletter-error">Please select a newsletter preference.</span>'),!1):!0)},b.prototype.processIds=function(){var a,b;if(this.form["newsletterId[]"])for(b=0;b<this.form["newsletterId[]"].length;b++)a=this.form["newsletterId[]"][b],a.checked&&this.newsletterId.push(a.value);else{var c=f[0];if(!this.form["newsletterId[]["+c+"]"])return!1;for(b=0;b<f.length;b++)a=this.form["newsletterId[]["+f[b]+"]"],a&&""!==a.value&&this.newsletterId.push(a.value)}},b.prototype.sayMessage=function(a,b){this.messanger.innerHTML=a,b&&(this.message.className+=" "+b)},b.prototype.clearMessage=function(){this.messanger.className=this.messangerOriginalClass,this.messanger.innerHTML=""};for(var c=document.querySelectorAll(".newsletter-signup-form"),d=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/,e=".newsletter-message",f=[217,442,5122,5129],g=(window.location.origin||window.location.protocol+"//"+window.location.host,[]),h=0;h<c.length;h++)g[h]=new b(c[h]);if(a("#main").hasClass("single-contributor")&&"undefined"!=typeof TNY.reajs){var i=TNY.reajs,j=a(document.getElementById("newsletter-signup")),k=a(document.getElementById("contributor-placement")),l=k.find(".promo"),m=function(a){"up"===a?j.prependTo(k):j.insertAfter(l)};i.checkViewport("desktop")||m("down"),TNY.reajs.registerCallback(["mobile","tablet"],null,m,null,"down"),TNY.reajs.registerCallback("desktop",null,m,null,"up")}}(jQuery,window,document),window.TNY||(window.TNY={});var TNY=window.TNY;!function(a){"use strict";var b={delay:4,init:function(){var a=this,b=document.getElementById("you-might-like")||!1,c=document.querySelector("link[rel=canonical]")||!1;if(b&&c){var d=this.delay?1e3*this.delay:0;window.setTimeout(function(){a.build(b,c.href)},d)}},build:function(b){a.getJSON("http://api.parsely.com/v2/related?callback=?",{apikey:"newyorker.com",url:location.href,days:3,limit:10,page:1,sort:"score",strategy:"recency"}).done(function(c){function d(a){var b=a.split(".newyorker.com/")[1]||"";if(b.length>16&&"magazine"!=b&&"magazine/"!=b){var c=(b.indexOf("?")>-1?"&":"?")+"intcid=mod-yml";return"//www.newyorker.com/"+b+c}return""}function e(a){var b=/magazine\/(\d{4})\/(\d{2})\/(\d{2}).?$/i;return null!==b.exec(a)}if("undefined"!=typeof c.data){var f=document.getElementById("yml-list")||!1,g="",h=4,i=0,j="";a.each(c.data,function(a,b){if(h>i){var c=b.title.replace(" : The New Yorker",""),f=d(b.image_url),k=d(b.url),l=b.section.replace("Uncategorized","&nbsp;");if(""!==k&&""!==f&&-1===j.indexOf(k)&&!e(k)){j+=k;var m='	<article class="child'+i+' story">\n';m+="		<figure>\n",m+='			<a href="'+k+'" title="'+c+'">\n',m+='				<img src="'+f+'" alt="The New Yorker">\n',m+="			</a>\n",m+="		</figure>\n",m+="		<section>\n",m+="			<h4>"+l+"</a>\n",m+='			<h2><a href="'+k+'" itemprop="name">'+c+"</a></h2>\n",m+="			<h3>By "+b.author+"</h3>\n",m+="		</section>\n",m+="	</article>\n",g+=m,i++}}}),f.innerHTML=g,b.style.display="block"}})}};b.init()}(jQuery),function(a){var b=function(){function b(b){var c=b.currentTarget,d=a(c),e=d.find("figcaption"),f=d.find("img").attr("alt")||"The New Yorker",g=d.find("a").attr("href"),h=new Image,i=e.html()||"",j=document.createElement("figcaption"),k="",l=null;h.src=g,h.alt=f,""!==i&&(j=document.createElement("figcaption"),j.className="caption",j.innerHTML=i,-1!==i.indexOf('class="caption-text"')&&(k="has-caption")),l=document.createElement("figure"),l.className=k,l.appendChild(h),j&&l.appendChild(j),s.container.className+=" overlay-image",s.inner.insertBefore(l,s.inner.firstChild),h.onload=function(a){var b=a||window.event,c=b.target,d=window.innerHeight||document.documentElement.clientHeight;c.offsetHeight>d&&(l.style.height="100%")}}function c(b){var c=b.currentTarget;d(a(c).data("ids"),a(c).data("post"))}function d(b,c){var d=document.createElement("div"),e={ids:b,related_stories:!0};if(c&&(e.post=c),"object"==typeof TNY){var f=TNY.utils.cookie.read("gallery_posts_visited");f?(e.posts_visited=f,TNY.utils.cookie.create("gallery_posts_visited",f+","+c)):TNY.utils.cookie.create("gallery_posts_visited",c)}d.setAttribute("data-name","gallery"),d.setAttribute("data-args",a.param(e));var g=function(){var b,c,d=s.inner.querySelector(".owl-carousel");if(TNY.GalleryApp.setupGallery(d),p(),b=a(s.inner.querySelector(".gallery-caption")),c=b.find(".caption-container"),TNY.reajs.checkViewport("desktop")){var e=document.createElement("div"),f="300x250",g="yrailTopModal";e.className="content-ad-wrapper",e.innerHTML='<div class="advertisement"><div id="'+g+f+'_frame" class="displayAd" data-cb-ad-id="'+g+f+'+_frame"></div></div>',s.inner.appendChild(e),CN.dart.call(g,{sz:f,kws:"bottom"})}var h=document.createElement("span");h.className="toggle-caption",h.innerHTML='<span class="hide-label">Hide</span><span class="show-label">Show</span> Captions',b.append(h),h.addEventListener("click",function(a){a.preventDefault(),b.toggleClass("open")})};d.className="loading",d.innerHTML="loading",s.container.className+=" overlay-slideshow",s.inner.appendChild(d),TNY.Module.load(d,g)}function e(a){l(d,a)}function f(b){var c=a(b.currentTarget),d=c.data("embedCode");g(d)}function g(b){t=o,s.container.className+=" overlay-video",a(s.inner).html(b)}function h(a){l(g,a)}function i(a){return q[a]}function j(){var b=null;for(var c in q){b=document.querySelectorAll(q[c].query);for(var d=0,e=b.length;e>d;d++)r.push(b[d]),a.data(b[d],"expand-type",c),b[d].addEventListener("click",k,!1)}m()}function k(b){b.preventDefault();var c=b||window.event,d=c.currentTarget,e=a.data(d,"expand-type"),f=null;if(e){if("image"==e&&CN.isMobile)return c.preventDefault(),!1;f=i(e)}f&&(l(f.cb,c),c.preventDefault())}function l(b,c){a(document.body).addClass("media-modal"),o(),b(c),u.addClass(v),setTimeout(function(){s.container.style.opacity="1"},1)}function m(){s.container=document.createElement("aside"),s.container.id="tny-overlay",s.container.className="fs-overlay",s.header=document.createElement("div"),s.header.className="modal-header",s.header.innerHTML='<span class="modal-logo">The New Yorker</span>',a('#page-header h4 a[itemprop="articleSection"]').length>0&&(s.header.innerHTML+='<span class="modal-rubric">'+a('#page-header h4 a[itemprop="articleSection"]').html()+"<span>"),s.close=document.createElement("span"),s.close.className="modal-close",s.close.innerHTML="Close",s.inner=document.createElement("div"),s.inner.className="modal-inner",s.container.appendChild(s.header),s.container.appendChild(s.close),s.container.appendChild(s.inner),s.container.addEventListener("click",n,!1),u=a(s.container),document.body.appendChild(s.container)}function n(b){var c=b||window.event,d=c.target;(d===s.close||d===s.container||d===s.inner)&&(a(document.body).removeClass("media-modal"),a("#tny-overlay").trigger("close.modal.tny"),s.container.style.opacity="0",setTimeout(function(){t&&t(),t=null,s.container.className="fs-overlay"},500))}function o(){s.inner.innerHTML=""}function p(a){if(TNY.Jovial){var b,c=s.inner.querySelectorAll(".social-buttons"),d=document.querySelector(".gallery-wrapper").getElementsByTagName("img")[0],e=d.src||d.getAttribute("data-full-src");a=a||window.location.href;for(var f=0;f<c.length;f++)b=c[f].getElementsByTagName("li"),TNY.Jovial.createFBButton(b[0],null,{type:"button"}),TNY.Jovial.createTwitterButton(b[1],{count:"none"}),TNY.Jovial.createGPlusButton(b[2]),TNY.Jovial.createPinItButton(b[3],e)}}var q={image:{query:".img-expandable",cb:b},slideshow:{query:".slideshow-expandable",cb:c},video:{query:".video-expandable",cb:f}},r=[],s={container:null,inner:null,close:null},t=null,u=null,v="show";return j(),{resetModal:o,showGalleryModal:e,showVideoModal:h}}();TNY.Modalizer=b}(jQuery),document.getElementById("goings-on-module")&&!function(a){"use strict";function b(b){var c=b||window.event,e=c.target;if("a"===e.tagName.toLowerCase()){c.preventDefault();{var f=e.parentElement;f.id.replace("-section","")}g.className="",g=f,g.className="selected";var h=g.id.replace("-section","");a(d.querySelector(".goings-on-content.selected")).removeClass("selected"),a(d.querySelector(".goings-on-content."+h)).addClass("selected")}}function c(){"ontouchstart"in document.documentElement;f.addEventListener("mouseover",b,!1)}{var d=document.getElementById("goings-on-module"),e=d.querySelector(".goings-on-content"),f=(a(e),d.querySelector("nav")),g=f.querySelector(".selected");[window.location.protocol,"//",window.location.host,"/goat-content/"].join("")}c()}(jQuery),function(a,b,c){"use strict";a.TNY||(a.TNY={});var d=a.TNY;a.console=a.console||{};var e=function(){function a(){yepnope.injectJs("http://admin.brightcove.com/js/BrightcoveExperiences.js",function(){brightcove.createExperiences()}),g=!0}var b,f={base:"http://api.brightcove.com/services/library?",token:"&token=VVIgQcePgLXb617cBHL7WxnGVXBdIk2z4SK4q3TaMqQ.",videoById:"find_video_by_id&video_id=",playlistsById:"find_playlists_by_ids&playlist_ids=",videosByTag:"search_videos&any=tag:"},g=!1,h={};return null!==document.querySelector(".BrightcoveExperience")&&a(),{init:function(){b=this},sendRequest:function(a,b){var d=f.base+"command="+b+f.token;c.ajax({url:d,dataType:"jsonp",crossDomain:!0,success:function(b){a(b?b:null)},error:function(b){a(b)}})},getVideoData:function(a,b,c){var d=f.videoById+b;if(c)for(var g in c)d+=g+"="+c[g];e.sendRequest(a,d)},getPlaylistData:function(a,b,c){var d=f.playlistsById+b;if(c)for(var g in c)d+=g+"="+c[g];e.sendRequest(a,d)},getTagData:function(a,b,c){var d=f.videosByTag+b;if(c)for(var g in c)d+=g+"="+c[g];e.sendRequest(a,d)},getVideoObject:function(a){return h[a]},loadedCallback:function(){},readyCallback:function(){},templateLoaded:function(a){h[a]={player:brightcove.api.getExperience(a),APIModules:brightcove.api.modules.APIModules},d.trackEvent("videoLoaded","loaded","brightcoveVideo"),b.loadedCallback(a)},templateReady:function(a){var e,f=a||window.event,g=f.target.experience.id;c(document.getElementById(g).parentNode).fitVids(),h[g]&&(e=h[g].videoPlayer=h[g].player.getModule(h[g].APIModules.VIDEO_PLAYER)),d.trackEvent("videoReady","ready","brightcoveVideo"),b.readyCallback(g)},createVideo:function(b,c,e,f,h){var i='<object id="myExperience{{{vID}}}" class="BrightcoveExperience"><param name="bgcolor" value="#FFFFFF" /><param name="width" value="{{{width}}}" /><param name="height" value="{{{height}}}" /><param name="playerID" value="{{{pID}}}" /><param name="playerKey" value="AQ~~,AAAAAF1454s~,QH_ygumSKiUSM5umxH7QftbSQjDYIwCl" /><param name="isVid" value="true" /><param name="isUI" value="true" /><param name="dynamicStreaming" value="true" /><param name="@videoPlayer" value="{{{vID}}}" /><param name="includeAPI" value="true" /><param name="templateLoadHandler" value="TNY.Brightcove.templateLoaded" /><param name="templateReadyHandler" value="TNY.Brightcove.templateReady" /></object>',j=c,k=e||2323364781001,l={vID:j,pID:k,height:f||370,width:h||670};g===!1&&a(),"string"==typeof b&&(b=document.getElementById(b)),i=d.utils.parseTemplate(i,l),console.log(i),b.innerHTML=i,"undefined"!=typeof brightcove&&brightcove.createExperiences()},deleteVideoObject:function(a){h[a]&&delete h[a]}}}();d.Brightcove=e,d.Brightcove.init()}(window,document,jQuery),function(a,b,c){var d={setup:function(){var d=c.getElementById("modal-strongbox");if(d&&!CN.isMobile){var e=this;a("#links-strongbox").click(function(a){e.show(),a.preventDefault()}),"#/strongbox"==location.hash.substring(0,11)&&e.show(),a("#links-strongbox-close").click(function(){e.hide()})}else d&&CN.isMobile&&"#/strongbox"==location.hash.substring(0,11)&&(b.location=a("#links-strongbox a").attr("href"))},show:function(){a("#modal-strongbox").addClass("sb-visible"),a("#floatingAd").css("display","none"),a("body").addClass("strongbox-modal-open"),location.hash="#/strongbox/",b.scrollTo(0,0),a("body").addClass("sticky")},hide:function(){a("#modal-strongbox").removeClass("sb-visible"),a("body").removeClass("strongbox-modal-open"),location.hash="#/"}};d.setup()}(jQuery,window,document),function(a,b,c){var d=function(){if(void 0===typeof _ghearst_vars)return!1;var a={missingUnits:[],getUnits:function(){return _ghearst_vars.ams_ads_script_src.split("position_list=")[1].split("%2C")||[]},getDevice:function(){return CN.isMobile?"mobile":CN.isTablet?"tablet":"desktop"},getUnitsInDom:function(){for(var b=a.getUnits(),d=0,e=0;e<b.length;e++){var f=c.getElementById(b[e]);f?d++:a.missingUnits.push(b[e])}return d},report:function(){var c=a.getUnits(),d=a.getUnitsInDom(),e=a.getDevice().toUpperCase(),f=a.missingUnits,g=b.CN?" on "+b.CN.site.env:"";console.log("Promotheus: "+c.length+" declared Units with "+d+" present in page for "+e+g+"."),f.length>0}};return a};TNY.debug.Promotheus=new d}(jQuery,window,document),function(a){CN.isMobile||CN.isTablet||a.getElementById("floatingAd")&&triggerFloatingAd(0);for(var b=a.querySelectorAll("img.ecom-responsive"),c=b.length,d=0;c>d;d++){var e,f=b[d];e=CN.isMobile?f.getAttribute("data-src-mobile")||!1:CN.isTablet?f.getAttribute("data-src-tablet")||!1:f.getAttribute("data-src-desktop")||!1,f.src=e?e:""}if(CN.isMobile){var g=a.querySelectorAll(".ecom-placement a[data-mobile]");c=g.length;for(var h=0;c>h;h++)g[h].href=g[h].getAttribute("data-mobile")}}(document),function(a,b,c){TNY=window.TNY||{},TNY.slideshow=TNY.slideshow||{},TNY.slideshow.Slides=TNY.slideshow.Slides||{},TNY.slideshow.Slides.slides={count:0,index:0,status:"",isGrab:!1,past:{index:0,action:null}},TNY.slideshow.Slides.ad={targetIndex:0,indexArray:[],frequency:7},TNY.slideshow.Slides.ad.dfp={sizeKW:"440x330",placementKW:"inlineSlideAd-"+TNY.slideshow.Slides.ad.targetIndex,kwDesktopSlot:"",sizeMobileKW:"",kwMobileSlot:""},TNY.slideshow.Slides.owl={owlData:{},$owl:{}},TNY.slideshow.Slides.blastOff=function(){this.assignOwl(),this.setupEvents(),this.setupOwlCallback(),this.watchSlides(),this.refreshSlideNumbers()},TNY.slideshow.Slides.setupOwlCallback=function(){var b=this,c=a(".owl-carousel");c.on("translated.owl.carousel",function(){b.removeCaptionIfAd(),b.assignOwl(),b.watchSlides()})},TNY.slideshow.Slides.removeCaptionIfAd=function(){document.querySelectorAll(".owl-item.active .dfp-slide").length>0&&this.emptyCaption()},TNY.slideshow.Slides.emptyCaption=function(){document.querySelector(".caption-container .caption").innerHTML="",document.querySelector(".caption-container .credit").innerHTML=""},TNY.slideshow.Slides.setupEvents=function(){a(".owl-carousel").on("add.owl.carousel",function(a){a.preventDefault()})},TNY.slideshow.Slides.assignOwl=function(){this.owl.$owl=a(".owl-carousel"),this.owl.owlData=a(".owl-carousel").data("owlCarousel")},TNY.slideshow.Slides.countSlides=function(){this.slides.count=this.owl.owlData.num.oItems},TNY.slideshow.Slides.identifyAdSlides=function(){for(this.ad.indexArray=[],i=0;i<this.slides.count;i++)if(0!==i&&i%this.ad.frequency===0){var b,c={};c.slot=i-1,b=a(".owl-item:not(.cloned):nth("+[c.slot]+")"),b.find(".dfp-slide").length>0?c.served=!0:(c.served=!1,this.ad.indexArray.push(c))}},TNY.slideshow.Slides.checkCurrentSlide=function(){this.slides.past.index=this.slides.index,this.slides.index=this.owl.owlData!==c?this.owl.owlData._current-1:0},TNY.slideshow.Slides.setCurrentStatus=function(){var a,b,c,d,e,f;a=this.slides.index,b=this.slides.past.index,f=a!==b,c=f&&a==b+1,d=f&&a==b-1,e=f&&!c&&!d,null!==this.slides.past.action&&(this.slides.past.action=this.slides.status),c?this.slides.status="right":d?this.slides.status="left":e&&(this.slides.status="jumped")},TNY.slideshow.Slides.setupAd=function(){var a=this.slides.index,b=this.slides.status,c=this.ad.targetIndex,d=this.ad.indexArray;targetArr=d[c],"right"==b?this.ad.targetIndex=a+1:"left"==b&&(this.ad.targetIndex=a-1),this.getSlideData()},TNY.slideshow.Slides.refreshSlideNumbers=function(){this.countSlides(),this.identifyAdSlides()},TNY.slideshow.Slides.watchSlides=function(){this.checkCurrentSlide(),this.setCurrentStatus(),this.checkForAds()},TNY.slideshow.Slides.checkForAds=function(){var b,c,d=this,e=this.slides.status,f=this.slides.index;a.each(d.ad.indexArray,function(a,g){b="right"==e&&f===g.slot-1,c="left"==e&&f===g.slot+1,b?d.setupAd():c&&d.setupAd()})},TNY.slideshow.Slides.hideAdSlidesNavigationDot=function(a){var b=a;document.querySelectorAll(".owl-dot")[b].style.display="none"},TNY.slideshow.Slides.getSlideData=function(){var a=this.ad.dfp,c={placement:a.placementKW,sz:{desktop:a.sizeKW,mobile:a.sizeMobileKW},kws:{desktop:a.kwDesktopSlot,mobile:a.kwMobileSlot}},d={sz:b.isMobile?c.sz.mobile:c.sz.desktop,kws:b.isMobile?[c.kws.mobile]:[c.kws.desktop]};this.createAdSlot(c),this.getDFPAd(c.placement,d)},TNY.slideshow.Slides.createAdSlot=function(a){var c=document.createElement("div");c.id=a.placement+(b.isMobile?a.sz.mobile:a.sz.desktop)+"_frame",c.className="removed";var d=document.querySelector("#articleBody");d.appendChild(c)},TNY.slideshow.Slides.removeAdSlot=function(){var a=document.querySelector("#articleBody .removed");a.remove()},TNY.slideshow.Slides.getDFPAd=function(a,c){(b.isMobile||b.dart)&&b.dart.call(a,c)},TNY.slideshow.Slides.newSlideTemplate=function(a){var b=this.ad.targetIndex,c=document.createElement("div");return c.className="dfp-slide dfp-slide-"+b,c.dataset.adspot=b,c.style.height=document.querySelector(".owl-stage").offsetHeight+"px",c.appendChild(a),c},TNY.slideshow.Slides.moveAdToSlideSlot=function(a){var b=document.createElement("iframe");return b.src="data:text/html;charset=utf-8,"+encodeURI(a),b.width="456px",b.height="346px",b.frameborder="0",b.scrolling="no",b},TNY.slideshow.Slides.createAdSlide=function(){var a,b,c,d,e,f="#"+this.ad.dfp.placementKW+this.ad.dfp.sizeKW+"_frame iframe";d=document.querySelector(f),e=d.contentDocument||d.contentWindow.document,b=e.body.innerHTML,""!==b&&(c=this.moveAdToSlideSlot(b),target=this.ad.targetIndex,a=this.newSlideTemplate(c),this.owl.$owl.trigger("add.owl.carousel",[a,target]),this.hideAdSlidesNavigationDot(target),this.removeAdSlot(),this.refreshSlideNumbers())},TNY.slideshow.Slides.checkCallbackDFP=function(a){a.selector.indexOf("inlineSlideAd")>-1&&this.createAdSlide()},a(document).ready(function(){a(".single-post .owl-carousel, .single-article .owl-carousel").length>0&&b.isMobile!==!0&&TNY.slideshow.Slides.blastOff()})}(jQuery,CN),function(a,b,c){var d={init:function(){this.setupGallerys(),this.setupVideoPlayer(),this.setupPopups()},setupVideoPlayer:function(){var d=a(".video-module-embed");if(0!==d.length){d.click(function(a){if("false"==this.getAttribute("data-ready")){a.preventDefault();var b=this.getAttribute("data-video-id"),d="cne-player-"+Math.random().toString(36).substring(7);this.id=d;var e={videoId:b,playerId:"52f2ade769702d2e17300000",target:d,autoplay:!0,companion:"cne-companion-container"},f="//player.cnevids.com/player/brand.js?";for(var g in e)f+=g+"="+escape(e[g])+"&";var h=c.createElement("script");h.type="text/javascript",h.src=f.slice(0,-1);var i=c.getElementsByTagName("script")[0];return this.innerHTML="",i.parentNode.insertBefore(h,i),this.setAttribute("data-ready","true"),!1}});var e=d.find("img")[0]||!1;if(e){var f="data-medium-src";b.innerWidth<=400&&(f="data-thumbnail-src");var g=e.getAttribute(f);g&&(e.onload=function(){d.css({height:a(this).height()+"px"})},e.src=g)}}},setupGallery:function(d){var e={autoplay:!1,items:1,lazyLoad:!0,loop:!0,nav:!0,dots:!0,navText:["<img src='/wp-content/assets/img/gallery/previous.svg'>","<img src='/wp-content/assets/img/gallery/next.svg'>"],margin:0},f=this,g=a(d),h=g.parent();e.onInitialized=function(){var b=h.attr("id").replace("gallery","gallery-expandable"),d=a("#"+b),e=g.find(".owl-controls");g.find("img.cartoon").length>0?(h.find(".gallery-caption").prependTo(g.find(".owl-controls")),h.addClass("cartoon-slideshow")):1===g.closest("#tny-overlay").length?g.addClass("in-overlay"):d.length&&(e.append('<br class="clear">'),d.prependTo(e[0]),d.find(".slideshow-expandable").removeClass("inline-media").removeClass("inline-media-slideshow"),d.click(function(b){var c=a("#tny-overlay")[0];b.shiftKey&&("function"==typeof c.requestFullScreen?c.requestFullScreen():"function"==typeof c.webkitRequestFullScreen?c.webkitRequestFullScreen():"function"==typeof c.mozRequestFullScreen&&c.mozRequestFullScreen())}),a("#tny-overlay").on("close.modal.tny",function(){"function"==typeof c.cancelFullScreen?c.cancelFullScreen():"function"==typeof c.webkitCancelFullScreen?c.webkitCancelFullScreen():"function"==typeof c.mozCancelFullScreen&&c.mozCancelFullScreen()}),a(c).keyup(function(b){
27==b.keyCode?a("#tny-overlay .modal-close").click():37==b.keyCode?a("#tny-overlay .owl-prev").click():39==b.keyCode&&a("#tny-overlay .owl-next").click()})),f.galleryPositions&&f.galleryPositions[h.attr("id")]&&g.hasClass("in-overlay")&&setTimeout(function(){var a=f.galleryPositions[h.attr("id")];g.trigger("to.owl.carousel",[a,0])},0)};var i="data-medium-src";b.innerWidth<=400?(i="data-thumbnail-src",g.addClass("reducedHeight")):g.closest("#tny-overlay").length>0&&b.innerWidth>690&&(i="data-zoom-src"),g.find("img").each(function(a){var b=this.getAttribute(i);b&&this.setAttribute("data-src",b),this.setAttribute("data-hash","/slide/"+(a+1))}),g.on("translated.owl.carousel",function(b){var c=b.target,d=a(b.target),e=c.querySelectorAll(".owl-item"),i=e[b.item.index];f.galleryPositions[h.attr("id")]=b.item.index-1;var j=i.getElementsByTagName("img")[0];if(j){f.checkCaption(j,d);var k=d.parent().find(".gallery-caption");k&&(a(".gallery-caption .caption").length>0&&(k.find(".caption")[0].innerHTML=j.getAttribute("data-caption")||""),a(".gallery-caption .credit").length>0&&(k.find(".credit")[0].innerHTML=j.getAttribute("data-credit")||"")),g.hasClass("in-overlay")&&a("#"+h.attr("id")+".floated .owl-carousel").trigger("to.owl.carousel",[b.item.index-1,0])}}),"featured"===d.id&&(e.autoplay=!0),void 0!==g.owlCarousel&&g.owlCarousel(e)},checkCaption:function(a,b){b.addClass("no-caption"),a.getAttribute("data-caption")?b.removeClass("no-caption"):b.addClass("no-caption")},setupGallerys:function(){var b=a(".owl-carousel"),c=this;0!==b.length&&(this.galleryPositions={},b.each(function(){c.setupGallery(this)}))},setupPopups:function(){var b=a(".popup-window>a"),c=this;b.length>0&&b.on("click",c.openPopup)},openPopup:function(c){var d=a(c.currentTarget),e=d.attr("href"),f=d.attr("data-width"),g=d.attr("data-height"),h=b.innerWidth>f?(b.innerWidth-f)/2:0,i=b.innerHeight>g?(b.innerHeight-g)/2:0;b.open(e,"TNYPopup","height="+g+", width="+f+", top="+i+", left="+h+", location=no, resizable=no, status=0"),c.preventDefault()}};d.init(),TNY.GalleryApp=d}(jQuery,window,document),function(a){"use strict";window.TNY||(window.TNY={});var b=window.TNY,c="2Kf29hhC5mgWf62708A",d=function(){function b(){var a=document.querySelectorAll(".scPlayerContainer");if(a)for(var b=0,c=a.length;c>b;b++)d(a[b])}function d(b){var d=a(b),f=d.data("sctrack");f?e(b,f):a.get("http://api.soundcloud.com/resolve.json",{url:d.data("scurl"),client_id:c},function(a){a.id?e(b,a.id):b.innerHTML='<p class="oops">Error loading audio</p>'})}function e(b,c){var d=a(b).data("scheight"),e="ff5500";d?e="000000":d=166,b.innerHTML='<iframe width="100%" height="'+d+'" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/'+c+"&amp;color="+e+'&amp;auto_play=false&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false"></iframe>'}return{init:b,initPlayer:d,insertEmbed:e}}();b.lazySC=d}(jQuery),window.addEventListener("load",TNY.lazySC.init,!1),function(a){var b=window.TNY||{};b.Ads=b.Ads||{},b.Ads.callbacks=b.Ads.callbacks||{},b.Ads.callbacks.timeTopBannerSticks=2e3,b.Ads.events=function(){this.eventPubadsCallback(),this.eventLazyLoadAds()},b.Ads.checked=0,b.Ads.eventLazyLoadAds=function(){"undefined"!=typeof Verso&&(b.VersoLazyAds=new Verso({eventLabel:"tnyLazyLoadAds",query:".tny-slot",viewPrecentage:-.1,delay:10})),document.addEventListener(b.VersoLazyAds.eventLabel,function(a){b.lazyLoadPageTriggeredAd(a)})},b.Ads.eventPubadsCallback=function(){if("undefined"!=typeof googletag)if("undefined"!=typeof googletag.pubads){var c=googletag.pubads();c.addEventListener&&c.addEventListener("slotRenderEnded",function(c){var d=c.slot.b.d,e=a("#"+d),f=e.width(),g=e.height();b.adsCallbackForArticles(d,e),b.adsCallbackForWallpaperAds(),"none"!==e.css("display")&&f>2&&g>18&&e.parent().addClass("loaded");switch(e.selector){case"#header728x90_frame":case"#headerMobile320x50_frame":case"#header_mobile320x50_frame":b.Ads.callbacks.topBannerCallback(e,g);break;case"#featuredSideRail300x250_frame":b.Ads.callbacks.tallSideRailCallback(e,g)}CN.isMobile&&e.selector.indexOf("yrail")>-1&&b.articleAdsMobileFix(e.selector),b.slideshow.Slides.checkCallbackDFP(e)})}else b.Ads.checked<5&&window.setTimeout(b.Ads.eventPubadsCallback,500);else b.Ads.checked<5&&window.setTimeout(b.Ads.eventPubadsCallback,500);b.Ads.checked=1+b.Ads.checked},b.Ads.callbacks.topnavStickLoad=function(){var c=a(".header-ad").height()+a("#hd").height(),d="<style id='topnav-style'></style>",e=".header#hd.fixed-topnav{ margin-top: "+c+"px;}</style>";0===a("#topnav-style").length&&a("head").append(d),a("#topnav-style").html(e),b.Nav.topnav.offsetHeightFix()},b.Ads.callbacks.topBannerCallback=function(a,c){var d=this;c=jQuery(a.selector).height(),b.Ads.callbacks.adLoadedTopCallback(a,c),window.setTimeout(function(){},d.timeTopBannerSticks)},b.Ads.callbacks.allowAdToStickTop=function(){a("#hd").removeClass("viewed-topbanner")},b.Ads.callbacks.triggerViewedPageAd=function(){a("#hd").addClass("viewed-topbanner")},b.Ads.callbacks.adLoadedTopCallback=function(a,b){var c=document.querySelector(".content-wrapper"),d=(parseInt(window.getComputedStyle(c,null).getPropertyValue("padding-top"),10),document.querySelector(a.selector).offsetHeight);b=16!==d?d+20:0,a.parent().parent().addClass("fix_ad");var e,f,g={mobile:80,tablet:104,desktop:180},h=function(a,b,c){var d=b+"px";"translate"==a&&(d=d+", "+c+"px");var e,f="transform: "+a+"("+d+");",g=["-ms-","-webkit-",""],h=[];for(i=0;i<g.length;i++)h.push(f+g[i]);return e=h.join("")};e=16!==b?h("translateY",130-b):"",f=16!==b?h("translateY",90-b):"";var j="body .logo-container, .primary-nav{"+h("translateY",b)+"}body .fixed-topnav .logo-container, .fixed-topnav .primary-nav{"+h("translateY",b)+"}body .menu-open .logo-container, .menu-open .primary-nav{"+h("translate","230",b)+"}body .menu-open .header-ad{"+h("translate","230","0")+"}body .menu-open .fixed-topnav .logo-container, .menu-open .fixed-topnav .primary-nav{"+h("translate","230",b)+"}body .menu-open .viewed-topbanner.fixed-topnav .logo-container, .menu-open .viewed-topbanner.fixed-topnav .primary-nav{"+h("translate","230","0")+"}body .content-wrapper{ padding-top: "+(b+g.mobile)+"px;}@media (min-width: 37.5em){body .logo-container, .primary-nav{"+h("translateY",b)+"}body .content-wrapper{ padding-top: "+(b+g.tablet)+"px;}body .fixed-topnav .logo-container, .fixed-topnav .primary-nav{"+h("translateY",b)+" }body .menu-open .logo-container, .menu-open .primary-nav{"+h("translate","230",b)+"}body .menu-open .header-ad{"+h("translate","230","0")+"}body .menu-open .fixed-topnav .logo-container, .menu-open .fixed-topnav .primary-nav{"+h("translate","230",b)+"}body .menu-open .viewed-topbanner.fixed-topnav .logo-container, .menu-open .viewed-topbanner.fixed-topnav .primary-nav{"+h("translate","230","0")+"}}@media (min-width: 53.125em){body .content-wrapper{ padding-top: "+(b+g.desktop)+"px;}body #hd:not(.viewed-topbanner) .primary-nav.fixed-topnav{"+e+"}body .fixed-topnav .logo-container, .fixed-topnav .primary-nav{"+f+"}body .menu-open .logo-container, .menu-open .primary-nav{"+h("translate","0",b)+"}body .menu-open .header-ad{"+h("translate","0","0")+"}body .menu-open .fixed-topnav .logo-container, .menu-open .fixed-topnav .primary-nav{"+h("translate","0",b)+"}body .menu-open .viewed-topbanner.fixed-topnav .logo-container, .menu-open .viewed-topbanner.fixed-topnav .primary-nav{"+h("translate","0","0")+"}}";jQuery("head").append('<style id="topNavStyles">'),jQuery("#topNavStyles").html(j)},b.lazyLoadPageTriggeredAd=function(b){var c=b.detail.data.el.name,d=c.split("/"),e=parseInt(d[d.length-1],10),f="yrailTop"+e,g="300x250",h="320x250",i="lazyloadedBox",j="sideArticle",k=f+g+"_frame",l="displayAd displayAd"+g+"Js",m='.tny-slot[name="/'+e+'"]';"undefined"!=typeof CN&&CN.isMobile&&(k=f+h+"_frame");var n=a('<div class="content-ad-wrapper"><div class="advertisement adIndex_'+e+'"><div id="'+k+'" class="'+l+'" data-cb-ad-id="'+k+'"></div></div></div>'),o=function(){var b=a("#CMU_RIGHTRAIL_CONTAINER").html();a("#"+k).html(b),a("#"+k).parent().addClass("loaded"),a("#"+k).parent().addClass("isCMUnit")};0===a("#"+k).length&&e>3&&(a(m).before(n),(e-3)%5===0&&o(),e-1!=a(".tny-slot").length||a("#"+k).parent().hasClass("isCMUnit")?"undefined"!=typeof CN&&(CN.isMobile||CN.dart)&&CN.dart.call(f,{sz:CN.isMobile?h:g,kws:CN.isMobile?[i]:[j]}):"undefined"!=typeof CN&&(CN.isMobile||CN.dart)&&CN.dart.call(f,{sz:CN.isMobile?h:g,kws:[CN.isMobile?[i]:[]]}))},b.hasClass=function(a,b){return new RegExp(" "+b+" ").test(" "+a.className+" ")},b.articleAdsMobileFix=function(b){var c=b.substr(1),d="#articleBody "+b,e=a(d).parent().parent(),f=c+"-content-ad-wrapper",g=e.height(),h='<style id="'+c+'-style">@media (max-width: 340px){#articleBody .'+f+"{height: "+g+"px;}}</style>";e.addClass(f+" ad-centered"),e.append(h)},b.Ads.callbacks.tallSideRailCallback=function(a,c){if(!("homepage"!==b.Info.pageType||1e3>c)){var d=document.querySelector(".the-latest-container")||!1;if(d){var e=document.querySelector("#secondary-featured div.module-container-stacked")||!1;if(e){var f=d.querySelectorAll("span.timestamp.recent"),g=f.length;for(i=0;i<g;i++)f[i].innerHTML=f[i].innerHTML.replace("Just published","Today");var h=d.querySelectorAll("article figure");for(g=h.length,i=0;i<g;i++)h[i].style.minWidth="180px";e.appendChild(d)}}}},b.adsCallbackForWallpaperAds=function(){var b=a("body");"none"!==b.css("background-image")&&b.addClass("has-wallpaper")},b.findElementInView=function(b){var c=a(window).scrollTop(),d=c+a(window).height(),e=a(b).offset().top,f=e+a(b).height();return f>=c&&d>=e},b.findAdInView=function(){var c,d=a(".displayAd"),e=[];for(i=0;i<d.length;i++)c=b.findElementInView(d[i]),c&&e.push(d[i].id);return e},b.createEventForSlideShow=function(){a(".gallery").length>0&&a(".owl-nav > *").on("click",function(){b.findAdInView();CN.dart.refresh(b.findAdInView())})},function(a){a(document).ready(function(){b.createEventForSlideShow()})}(jQuery),b.adsCallbackForArticles=function(b,c){{var d=a("#main");a("body")}if((d.hasClass("single-article")||d.hasClass("single-blog")||d.hasClass("single-post"))&&"yrailTop300x250_frame"==b){var e=c.height(),f=a(".recirculation");f.removeClass(),f.addClass("recirculation"),250==e?f.addClass("top-ad-250px"):600==e?f.addClass("top-ad-600px"):1050==e&&f.addClass("top-ad-1050px")}},b.Ads.events()}(jQuery),function(){var a,b,c,d,e,f="",g="",h="",i="",j=!("www.newyorker.com"==location.hostname),k=jQuery("body").hasClass("business"),l=jQuery("body").hasClass("tech"),m="<div id='polar-rotator-slide'></div>",n=[];window.NATIVEADS=window.NATIVEADS||{},window.NATIVEADS.injectedAt=(new Date).getTime(),window.NATIVEADS.onReady=function(h){if(h.setPropertyID("NA-NEWYORK-11236070"),h.setSecondaryPageURL("/sample/publisher/sponsored.html"),j&&h.logging.enable(),"undefined"!=typeof CN.dart){var o="",p=CN.dart.getGPTAds();p[0]&&p[0].url&&(o=CN.dart.getGPTAds()[0].url),"prod"!=CN.site.env.toLowerCase()&&n.push(CN.site.env.toLowerCase()),n=n[0],(l||k)&&jQuery("#featured").after(m),a={label:"business-rotator",unit:{server:"dfp",id:o,size:"620x320",targets:{}},location:"body.business #polar-rotator-slide",infoText:"",infoButtonText:"",template:f,onRender:function(){jQuery(".owl-carousel").addClass("polar-loaded")},onFill:function(){var a=jQuery(".owl-carousel").data("owlCarousel");a.add(jQuery("#polar-rotator-slide"),-1,!0)},onError:function(){}},b={label:"tech-rotator",unit:{server:"dfp",id:o,size:"620x320",targets:{}},location:"body.tech #polar-rotator-slide",infoText:"",infoButtonText:"",template:f,onRender:function(){jQuery(".owl-carousel").addClass("polar-loaded")},onFill:function(){var a=jQuery(".owl-carousel").data("owlCarousel");a.add(jQuery("#polar-rotator-slide"),-1,!0)},onError:function(){}},c={label:"article-spotlight",unit:{server:"dfp",id:o,size:"317x65",targets:{}},location:"#related-stories-polar",infoText:"",infoButtonText:"",template:g,onRender:function(){jQuery(".polar-rightbar").addClass("advertisement").addClass("loaded")},onFill:function(){jQuery("#related-stories-polar").addClass("polar-loaded")},onError:function(){}},d={label:"most-popular-polar-logo",unit:{server:"dfp",id:o,size:"88x37",targets:{}},location:"#most-popular-polar-logo",infoText:"",infoButtonText:"",template:i,onRender:function(){},onFill:function(){},onError:function(){}},e={label:"most-popular-polar-text",unit:{server:"dfp",id:o,size:"300x25",targets:{}},location:"#most-popular-polar-text",infoText:"",infoButtonText:"",template:i,onRender:function(){},onFill:function(){},onError:function(){}},a.unit.targets={kw:n},b.unit.targets={kw:n},c.unit.targets={kw:n},d.unit.targets={kw:n},e.unit.targets={kw:n},h.insertPreview(a),h.insertPreview(b),h.insertPreview(c),h.insertPreview(d),h.insertPreview(e),h.injectCSS(" ","head"),h.configureSecondaryPage({binding:{sponsor:{link:"#sponsor-link",logo:"#sponsor-logo",name:"#sponsor-name"},title:"#title",summary:"#summary",content:"#content",author:"#author",pubDate:"#pub-date",image:{href:"#media",caption:"#media-caption",credits:"#media-credits"}},onFill:function(){},onRender:function(){},onError:function(){},track:function(){}})}},f=function(a,b,c,d,e){function f(a){var b,c="";return c+='<img src="'+k((b=a.image,b=null==b||b===!1?b:b.href,typeof b===j?b.apply(a):b))+'">'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i="",j="function",k=this.escapeExpression,l=this;return i+='<div class="advertisement polar-sponsored">\n<a href="',(g=c.link)?g=g.call(b,{hash:{},data:e}):(g=b.link,g=typeof g===j?g.apply(b):g),i+=k(g)+'">\n',h=c["if"].call(b,(g=b.image,null==g||g===!1?g:g.href),{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+="\n</a></div>"},g=function(a,b,c,d,e){function f(a){var b,c="";return c+='<img src="'+k((b=a.image,b=null==b||b===!1?b:b.href,typeof b===j?b.apply(a):b))+'">'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i="",j="function",k=this.escapeExpression,l=this;return i+='<div class="sponsored polar-rightbar">\n<a href="',(g=c.link)?g=g.call(b,{hash:{},data:e}):(g=b.link,g=typeof g===j?g.apply(b):g),i+=k(g)+'">\n\n',h=c["if"].call(b,(g=b.image,null==g||g===!1?g:g.href),{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+="\n<h3>",(h=c.title)?h=h.call(b,{hash:{},data:e}):(h=b.title,h=typeof h===j?h.apply(b):h),i+=k(h)+"</h3>\n</a></div>"},h=function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<div class="sponsored">\n  <a href="',(f=c.link)?f=f.call(b,{hash:{},data:e}):(f=b.link,f=typeof f===h?f.apply(b):f),g+=i(f)+'">\n     <img src="'+i((f=b.image,f=null==f||f===!1?f:f.href,typeof f===h?f.apply(b):f))+'" />\n  </a>\n</div>'},i=function(a,b,c,d,e){function f(){return"hasLogo"}function g(a){var b,c="";return c+='<img src="'+l((b=a.image,b=null==b||b===!1?b:b.href,typeof b===k?b.apply(a):b))+'" />'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i,j="",k="function",l=this.escapeExpression,m=this;return j+='<div class="sponsored ',i=c["if"].call(b,(h=b.image,null==h||h===!1?h:h.href),{hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e}),(i||0===i)&&(j+=i),j+='">\n  \n  <a href="',(i=c.link)?i=i.call(b,{hash:{},data:e}):(i=b.link,i=typeof i===k?i.apply(b):i),j+=l(i)+'">',i=c["if"].call(b,(h=b.image,null==h||h===!1?h:h.href),{hash:{},inverse:m.noop,fn:m.program(3,g,e),data:e}),(i||0===i)&&(j+=i),j+=" <p>",(i=c.title)?i=i.call(b,{hash:{},data:e}):(i=b.title,i=typeof i===k?i.apply(b):i),j+=l(i)+"</p></a>\n</div>\n\n\n\n"}}(),function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.type="text/javascript",d.async=!0,d.src="http://plugin.mediavoice.com/plugin.js",e.parentNode.insertBefore(d,e))}(document,"script","nativeads-plugin"),function(a){var b=function(){function b(a){a.preventDefault();var b=a.currentTarget;c(b)}function c(b){var c=b.querySelector(".scPlayerContainerEmbed");TNY.lazySC.initPlayer(c),b.className+=" activated",a("html, body").animate({scrollTop:a(c).offset().top-120},1e3)}return{handleClick:b,expandPlayer:c}}(),c=".soundcloud-expandable";embeds=document.querySelectorAll(c);for(var d=0;d<embeds.length;d++)embeds[d].addEventListener("click",b.handleClick.bind(this))}(jQuery),function(a,b,c){"use strict";a.TNY||(a.TNY={}),a.TNY.account||(a.TNY.account={});var d=(a.TNY,a.TNY.account,function(a){var b,c,d="home";switch(document.querySelector("meta[name=environment]").content){case"prod":return c="http://www.newyorker.com/",b="https://account.newyorker.com/",a==d?c:b;case"dev":return c="http://newyorker.local/",b="http://account.newyorker.local:8088/",a==d?c:b;case"stg":case"stag":case"staging":return c="http://stg.newyorker.com/",b="https://account-stg.newyorker.com/",a==d?c:b;default:return c="http://www.newyorker.com/",b="https://account.newyorker.com/",a==d?c:b}}),e=function(a,b){return a=a===c?"":a,d(b)+a};a.TNY.account.determineConfig=e}(window,document);var xmlhttp=new FactoryXMLHttpRequest;new TNYmodalviews,function(a){"use strict";window.TNY||(window.TNY={}),window.TNY.account||(window.TNY.account={});var b=(window.TNY,window.TNY.account);b.startLoadingIndicator=function(b,c){var d,e=document.getElementById(c),f=e.innerHTML;d='<div id="current-loading" class="spinloadWrapper">'+f+'<div class="border-gradient" style=""><div class="border-gradient-content" style="padding: 8px;border-radius: 50%;-webkit-border-radius: 50%;"></div></div></div>',"signIn"==b&&(d='<div id="current-loading" class="spinloadWrapper">'+f+'<div class="border-gradient" style="left:48%"><div class="border-gradient-content" style="padding: 8px;border-radius: 50%;-webkit-border-radius: 50%;"></div></div></div>'),e.innerHTML=d,setTimeout(function(){var c=a("#"+b);c.addClass("signIn"==b?"profile-button-start-loading-signIn":"profile-button-start-loading")},20)},b.stopLoadingIndicator=function(b,c,d){var e='<input type="button" id="'+b+'" class="profile-button small-button" value="CONTINUE" />';"signIn-link"==b||"createLogin"==b?(e='<input type="button" id="'+b+'" class="profile-button small-button" value="FINISH" />',a("#"+b).removeClass("profile-button-start-loading")):"signIn"==b&&(e='<input type="button" id="'+b+'" class="nyr-blue-button" value="SIGN IN" />',a("#"+b).removeClass("profile-button-start-loading-signIn")),setTimeout(function(){var f=document.getElementById(c);f.innerHTML=e,"signIn"==b&&a("#"+b).removeClass("profile-button-activeLoad"),d&&d()},300),setTimeout(function(){a("#"+b).addClass("hover-only-button")},900)}}(jQuery,window,document),function(a){window.TNY||(window.TNY={}),window.TNY.account||(window.TNY.account={});var b=window.TNY,c=window.TNY.account,d=function(){try{var d=b.account.readCookie("amg_user");null===d?(a(".user-ln-status-mobi").show(),a(".user-sign-in").show(),a(".mob-sign-in").css("display","inline!important")):(a("#mobi-account-link-1").html('<a href="'+c.determineConfig("","account")+'">My account</a>').show(),a("#mobi-account-link-2").html('<a href="'+c.determineConfig("logout","account")+'" id="mobi-user-sign-out" title="Sign Out" class="mobi-account-menu-sign-out">Sign out</a></li>').show(),a(".mob-sign-in").css("display","none!important"),a(".user-ln-status-mobi").hide(),a("#mobi-account-link-2").click(function(){c.signOut()}))}catch(e){}};d(),window.TNY.account.checkUserLnStatus=d}(jQuery,window,document),function(a,b,c,d){window.TNY||(window.TNY={}),window.TNY.account||(window.TNY.account={});var e=window.TNY,f=window.TNY.account,g={init:function(){var b=this;TNYmodalviews.prototype.LYS();var c=b.readCookie("amg_user");null===c||c===d||"undefined"==typeof c?(a(".user-ln-status").show(),a(".mob-sign-in").show()):(f.CheckEStatus(),a("#mobi-account-link-2").click(function(){f.signOut()})),a("#submit-link-address-lookup").on("click",function(){b.validateForm("link-account-address")}),a("#linkbutton-inter").on("click",function(){b.validateForm("link-account-inter")}),a("#linkbutton").on("click",function(){b.validateForm("link-account")}),a(".forgotpasslink").click(function(){var a=b.determineConfig("forgot-password","account");window.open(a)}),a("#step1-link").on("click",function(){a("#step1-link").removeClass("initial-step-linking"),a(this).toggleClass("grow-flex"),a("#step2-link").css({"background-color":"#f2f2f2","font-weight":"normal"}),a("#link-account-name-radio").prop("checked",!1),a("#link-account-numb-radio").prop("checked",!1),a("#link-account-numb-inter-radio").prop("checked",!1),a("#link-lookup-status-name").hide(),a("#step1-link").removeClass("initial-step-linking"),a("#step3-link").css({"background-color":"#f2f2f2","font-weight":"normal"}),a("#step1-link ").removeClass("link-currentStepProgress"),a("#step2-link ").removeClass("link-currentStepProgress"),a("#step1-link").css({"background-color":"rgb(214, 214, 214)","font-weight":"bold"}),a("#header1-number").css({color:"#555"}),a("#header2-number").css({color:"#BBB"}),a("#header3-number").css({color:"#BBB"}),a("#firstItem").toggleClass("appear-link"),a("#secondItem").removeClass("appear-link").dequeue(),a("#thirdItem").removeClass("appear-link").dequeue()});var h=function(){a("#link-subscription-modal").toggleClass("link-sub-top-respond")},j=function(){a("#link-subscription-modal").removeClass("link-sub-top-respond")};e.reajs.registerCallback("mobile",null,h,null),e.reajs.registerCallback("tablet",null,j,null),e.reajs.registerCallback("desktop",null,j,null),a("#close-link-modal").on("click",function(){i()}),a("#link-account-print").on("click",function(){var b=a("input[id='link-account-name-radio']").is(":checked"),c=a("input[id='link-account-numb-radio']").is(":checked"),d=a("input[id='link-account-numb-inter-radio']").is(":checked"),e=!a("input[name='acct']:checked").val();return e===!0?(g.errHandler("serve-resp-link","Please make a selection."),userMadeSelection=!1,!1):void(b===!0?(userMadeSelection=!0,a("#link1").css("opacity","0").dequeue(),a("#link1").css("flex-grow","1").dequeue(),a("#link-screen-2").css("flex-grow","4").dequeue(),a("#firstItem").removeClass("appear-link").dequeue(),a("#secondItem").addClass("appear-link").dequeue(),a("#link-screen-2").css("opacity","1").dequeue(),a("#step1-link").removeClass("initial-step-linking"),a("#step1-link").addClass("link-currentStepProgress"),a("#step2-link").css("background-color","#d6d6d6"),a("#step1-link").css("font-weight","normal"),a(".headingLinkStep1").toggleClass("change").dequeue(),a("h1#step2-link").css("font-weight","bold").dequeue(),a("h1#step2-link").css("color","#666").dequeue(),a("#header2-number").css("color","#666").dequeue(),a("#serve-resp").css("display","none").html(""),a("#header1-number").css({color:"#BBB"})):c===!0?(a("#firstItem").removeClass("appear-link").dequeue(),a("#secondItem").addClass("appear-link").dequeue(),a("#header2-number").css("color","#555"),a("h1#step1-link").css("font-weight","normal"),a("h1#step2-link").css("font-weight","bold"),a("h1#step2-link").css("color","#666"),a("#step1-link").css("font-weight","normal"),a("#step1-link").removeClass("initial-step-linking"),a("#step1-link").addClass("link-currentStepProgress"),a("#step2-link").css("background-color","#d6d6d6"),a("#header1-number").css({color:"#BBB"})):d===!0?(a("#firstItem").removeClass("appear-link").dequeue(),a("#secondItem").addClass("appear-link").dequeue(),a("h1#step1-link").css("font-weight","normal"),a("h1#step2-link").css("font-weight","bold"),a("h1#step2-link").css("color","#666"),a("#header2-number").css("color","#555"),a("#step1-link").css("font-weight","normal"),a("#step1-link").removeClass("initial-step-linking"),a("#step1-link").addClass("link-currentStepProgress"),a("#step2-link").css("background-color","#d6d6d6"),a("#header1-number").css({color:"#BBB"})):new Error("unknown"))}),a("#link-screen-initial").on("click",function(){userMadeSelection===!0&&(a("#link-screen-2").css("opacity","0"),a("#link-screen-2").removeClass("testing").dequeue(),a("#link-screen-3").removeClass("testing").dequeue(),a("#link1").css("opacity","1"),a("#link1").css("max-height","40em"),a(".headingLinkStep1").toggleClass("change"),document.getElementById("link-screen-initial").className="menu testing",userMadeSelection=!1)}),a("#close-modal").on("click",function(){g.CloseModal("link")}),a("#link-sub-nav").click(function(){g.showModal()})},envSwitch:function(a){var b,c,d="home";switch(document.querySelector("meta[name=environment]").content){case"prod":return c="http://www.newyorker.com/",b="https://account.newyorker.com/",a==d?c:b;case"dev":return c="http://dev.newyorker.com/",b="http://localhost:8088/",a==d?c:b;case"stg":case"stag":case"staging":return c="http://stg.newyorker.com/",b="https://account-stg.newyorker.com/",a==d?c:b;default:return c="http://www.newyorker.com/",b="https://account.newyorker.com/",a==d?c:b}},renderNewLinkView:function(b){a("#lookupWrapper").html(b).show()},createCookie:function(a,b,c){var d,e;if(c){var f=new Date;f.setTime(f.getTime()+24*c*60*60*1e3),d="; expires="+f.toUTCString()}else d="";var g,h=document.querySelector("meta[name=environment]").content;if("prod"==h||"stg"==h||"stag"==h){e="; domain=newyorker.com",g=a+"="+b+d+e+"; path=/";try{document.cookie=g}catch(i){return}}else if("dev"==h){e="; domain=newyorker.local",g=a+"="+b+d+e+"; path=/";try{document.cookie=g}catch(i){return}}else{g=a+"="+b+d+"; path=/";try{document.cookie=g}catch(i){return}}},readCookie:function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b))return e.substring(b.length,e.length)}return null},deleteCookie:function(a){var b=this;b.createCookie(a,"",-1)},sisterSites:function(b){a("#"+b).html(TNYmodalviews.prototype.sisterSites()).show(),a(".closeErrBox").click(function(){a(".cn-site-box-popover").toggleClass("reveal-cn-box")})},CloseModal:function(b){a(".mobilenav").removeClass("remove-nav-shadow"),a(".page-container").css("opacity",1),a("nav").css("opacity",1);var c="#"+b;b===d&&(c="fancyModal"),"link"===b&&(c="link-subscription-modal",a("#firstItem").toggleClass("appear-link"),a("#link-subscription-modal").removeClass("showLinkSteps"),a("#link-screen-initial").removeClass("testing"),a("#modal-overlay-full").removeClass("active-modal-step"),setTimeout(function(){a("#link-subscription-modal").css("opacity","0")},600)),a("#serve-resp").html(""),a("#serve-resp").hide(),a(".page-container").css("-webkit-user-select","text").css("-moz-user-select","text").css("user-select","text").css("pointer-events","auto"),a("div#email-msg").html(""),a("div#password-msg").html(""),a("#hd").removeClass("no-sticky")},detectModal:function(b){var c=b.target.id;(c.indexOf("modal-overlay-full")>-1||c.indexOf("close-link-modal")>-1)&&i(),a("#"+c).hasClass("final-link-step")&&window.location.reload(),c.indexOf("close-thanks-modal")>-1&&window.location.reload()},performLinkReg:function(b){var c=this;return a.ajax({url:c.determineConfig("registeruser-link","account"),data:b,type:"POST",statusCode:{200:function(b){a("#create-serv-resp-reg").html("").hide();try{CN.stats.omniture.trackAction("subscriptionLinkSuccess",document,{events:"event20"}),c.createCookie("ev_ss",b.ev_ss),c.createCookie("amg_user",b.AMGCookie),c.createCookie("amg_user_partner",b.amgUUID);f.stopLoadingIndicator("signIn-link","spinWrap-signin-link")}catch(d){throw new Error(d)}e.account.invalidateCurrentUser("amg_user_partner")},401:function(){a("#create-serv-resp").html('Unfortunately, we are unable to locate your account.<div></div><div class="serv-error-subtext">If you subscribed through a partner such as Apple, Amazon, or Google Play, please call 1-800-444-7570.</div>').show();var b=function(){a("#signIn-link").on("click",function(){c.registerUserAccount("link-signin")})};f.stopLoadingIndicator("signIn-link","spinWrap-signin-link",b)},402:function(){var b=function(){a("#signIn-link").on("click",function(){c.registerUserAccount("link-signin")})};f.stopLoadingIndicator("signIn-link","spinWrap-signin-link",b),document.getElementById("create-serv-resp").style.display="block",document.getElementById("create-serv-resp").innerHTML='You have used this e-mail address on another site in our network, so you are already registered for The New Yorker. Please <span id="sign-in-existing"> sign in.</span>',document.getElementById("sign-in-existing").addEventListener("click",function(){c.viewHelper("sign-in",null),c.assignHandlers("sign-in",null)},!1)},206:function(){var b=function(){a("#signIn-link").on("click",function(){c.registerUserAccount("link-signin")})};f.stopLoadingIndicator("signIn-link","spinWrap-signin-link",b),a("#create-serv-resp").html("Unfortunately, we are unable to locate your account.  Please try again, or call Customer Care at 1-800-444-7570.").show()},404:function(){var b=function(){a("#signIn-link").on("click",function(){c.registerUserAccount("link-signin")})};f.stopLoadingIndicator("signIn-link","spinWrap-signin-link",b),document.getElementById("create-serv-resp").innerHTML="There was a problem with the form please try again."}}}),!1},registerUserAccount:function(b,c){var d=this;switch(b){case"link-signin":var e;e={nameLookup:!1,username:document.getElementById("username-link").value,password:document.getElementById("userpass-link").value,acctNumb:document.getElementById("fromAcctLink").value};var h=e.username,i=e.password,j=!1,k=!1,l=!1;if(i.length<6&&d.errHandler("pass-msg-2","Password must be at least six characters."),i.length>=6&&(a("#pass-msg-2").html(""),k=!0),h.length<6&&d.errHandler("email-msg-1","Please enter a valid e-mail address."),h.length&&h.indexOf("@")<1&&d.errHandler("email-msg-1","Please enter a valid e-mail address."),h.length>5&&h.indexOf("@")>-1&&(d.errHandler("email-msg-1",null,null,"y"),j=!0),k&&j&&(l=!0),l){f.startLoadingIndicator("signIn-link","spinWrap-signin-link");var m=!1;m||(m=!0,d.performLinkReg(e))}break;case"link":var n,o,p,q,r,s,t,u,v=!1,w=document,x=w.getElementById("useremail1").value,y=w.getElementById("createpass1").value,z=w.getElementById("createpass2").value,A=w.getElementById("fromLink").value,B=w.getElementById("address1".value);if(null!==B){var C=navigator.userAgent;o=w.getElementById("address1").value,p=w.getElementById("address2").value,q=w.getElementById("city").value,r=w.getElementById("state").value,t=w.getElementById("link-zip").value,FEData3={nameLookup:!0,username:x,password:y,confirmPassword:z,fromLink:!0,addy1:o,addy2:p,city:q,state:r,zip:t,userAgnt:C,acctNumb:document.getElementById("fromAcct").value}}else if(y=w.getElementById("createpass1").value,z=w.getElementById("createpass2").value,n=w.getElementById("useremail2").value,y.length&&z.length||(g.errHandler("pass-msg-1","Please enter and confirm a password."),g.errHandler("pass-msg-1-confirm","Please enter and confirm a password.")),(y.length<6||z.length<6)&&(g.errHandler("pass-msg-1","Please enter a valid password."),g.errHandler("pass-msg-1-confirm","Please enter a valid password.")),y.length&&z.length&&y.length>5&&z.length>5&&y==z&&(v=!0),0===x.length&&(g.errHandler("email-msg-1-reg","Please enter a valid email address."),g.errHandler("email-msg-1-confirm","Please enter a valid email address.")),x.length&&((-1==x.indexOf("@")||-1==n.indexOf("@"))&&(g.errHandler("email-msg-1-reg","Please enter a valid email address."),g.errHandler("email-msg-1-confirm","Please enter a valid email address.")),x!==n&&(g.errHandler("email-msg-1-reg","E-mail addresses must match."),g.errHandler("email-msg-1-confirm","E-mail addresses must match.")),x==n&&(u=!0)),u&&x.length&&x.length>5&&x.indexOf("@")>-1&&n.length&&n.length>5&&n.indexOf("@")>-1&&(g.errHandler("email-msg-1-reg",null,null,"y"),g.errHandler("email-msg-1-confirm",null,null,"y")),y!==z&&(g.errHandler("pass-msg-1","Passwords must match."),g.errHandler("pass-msg-1-confirm","Passwords must match.")),u&&v&&(s=!0,g.errHandler("pass-msg-1",null,null,"y"),
g.errHandler("pass-msg-1-confirm",null,null,"y")),s){f.startLoadingIndicator("createLogin","spinWrap-create-login"),a("#create-serv-resp-reg").html("").hide();var D={username:x,password:y,confirmPassword:z,fromLink:A,acctNumb:c};a.ajax({url:g.determineConfig("registeruser","account"),data:D,type:"POST",statusCode:{200:function(b){a("#create-serv-resp-reg").html("").hide();try{CN.stats.omniture.trackAction("subscriptionLinkSuccess",document,{events:"event20"}),g.createCookie("ev_ss",b.ev_ss),g.createCookie("amg_user",b.AMGCookie),g.createCookie("amg_user_partner",b.amgUUID),f.stopLoadingIndicator("createLogin","spinWrap-create-login")}catch(c){throw new Error(c)}setTimeout(function(){g.Thanks(null)},200)},401:function(){setTimeout(function(){var b=function(){var b=document.getElementById("fromAcct").value;a("#createLogin").on("click",function(){g.registerUserAccount("link",b)})};s=!1,f.stopLoadingIndicator("createLogin","spinWrap-create-login",b)}),a("#fancyModal").removeClass("reg-modal-step3"),a("#fancyModal").addClass("reg-err-inuse-modal"),a("section#item3").addClass("reg-err-inuse"),g.sisterSites("create-serv-resp-reg"),a("#cn-site-info-box").click(function(){a(".cn-site-box-popover").toggleClass("reveal-cn-box")}),a("#close-cn-site-box").click(function(){a(".cn-site-box-popover").toggleClass("reveal-cn-box")})},402:function(){var b=function(){var b=document.getElementById("fromAcct").value;a("#createLogin").on("click",function(){g.registerUserAccount("link",b)})};s=!1,f.stopLoadingIndicator("createLogin","spinWrap-create-login",b),a("#fancyModal").removeClass("reg-modal-step3"),a("#fancyModal").addClass("reg-err-inuse-modal"),a("section#item3").addClass("reg-err-inuse"),document.getElementById("create-serv-resp").style.display="block",document.getElementById("create-serv-resp-reg").innerHTML='You have used this e-mail address on another site in our network, so you are already registered for The New Yorker. Please <span id="sign-in-existing"> sign in.</span>',document.getElementById("create-serv-resp-reg").style.display="block"},206:function(){var b=function(){var b=document.getElementById("fromAcct").value;a("#createLogin").on("click",function(){g.registerUserAccount("link",b)})};s=!1,f.stopLoadingIndicator("createLogin","spinWrap-create-login",b),a("#create-serbv-resp").html("Unfortunately, we are unable to locate your account.  Please try again, or call Customer Care at 1-800-444-7570.").show()},404:function(){var b=function(){var b=document.getElementById("fromAcct").value;a("#createLogin").on("click",function(){g.registerUserAccount("link",b)})};s=!1,f.stopLoadingIndicator("createLogin","spinWrap-create-login",b),a("#fancyModal").addClass("reg-err-inuse-modal"),a("section#item3").addClass("reg-err-inuse"),document.getElementById("create-serv-resp-reg").innerHTML="There was a problem with the form please try again."}}})}}return!1},registerAcctGen:function(b){a("#genacct-view").show(),a(".sign-in-from-modal").show(),a("#genacct-view").html(b)},renderConfModal:function(b){a("#conf-view").removeClass(" animated fadeIn"),a("#conf-view").show(),a("#conf-view").html(b).addClass(" animated fadeIn")},renderInsideModal:function(b){a("#reg-view").html(b).fadeIn("fast")},contentSwap:function(b,c){var d=this;switch(b){case"subAcct":d.renderNewLinkView(TNYmodalviews.prototype.subAcct);break;case"NameAddress":new d.renderNewLinkView(TNYmodalviews.prototype.nameAddress),a("#submit-link-address-lookup").click(function(){d.validateForm("link-account-address")});break;case"zipcode":d.renderNewLinkView(TNYmodalviews.prototype.zipCode);break;case"sign-in":d.renderInsideModal(TNYmodalviews.prototype.signIn);break;case"sign-in-link":d.renderLinkSignin(TNYmodalviews.prototype.signInLink);break;case"forgot":d.renderInsideModal(TNYmodalviews.prototype.forgotPass),a("#forgot-pass").addClass(" animated fadeIn"),a("input#forgot-field").keypress(function(a){13==a.which&&(a.preventDefault(),d.forgotPass())}),a("#forgotPass").on("click",function(){d.forgotPass()});break;case"thanks":d.renderConfModal(TNYmodalviews.prototype.thanks(c));break;case"link-account-limited":d.renderInsideModal(TNYmodalviews.prototype.limitedlinkDTO),a("#link-button-in").click(function(){d.linkPrint()});break;case"create-login":d.renderNewLinkView(TNYmodalviews.prototype.createLogin(c)),a("#createLogin").on("click",function(){d.registerUserAccount("link",c)});break;case"link-account-print":d.renderInsideModal(TNYmodalviews.prototype.linkDTO);break;case"link-account-begin":case"link-account":a("#reg-view").html(TNYmodalviews.prototype.linkInitial).show(),a("#link-button").on("click",function(){d.viewHelper("link-account-begin",null)})}},viewHelper:function(b,c){var d=this;switch(b){case"sign-in":case"thanks":default:a(".modal-content").hide(),d.contentSwap(b,c)}},forgotPass:function(){var b=this,c={username:a("#forgot-field").val(),templateId:"NYR"},e=function(){a("#forgot-field").css("border","1px solid #000"),a("#forgot-field").css("margin-top","28px"),a("#forgot-pass-body").fadeOut(),a("#final-step").html("An e-mail was sent to <b>"+c.username+"</b> with a link to reset your password.").fadeIn("slow")},f=function(){a("#forgot-field").css("margin-top","18px"),a("#forgot-resp-msg").css("opacity",0).css("color","#d22229").animate({opacity:1},{duration:360}).html('Unfortunately, we are unable to locate your account.<div></div><div class="serv-error-subtext">If you subscribed through a partner such as Apple, Amazon, or Google Play, please call 1-800-444-7570.</div>').show()},g=function(){a(".pass-err-msg").show(),a("#forgot-field").css("border","1px solid rgba(223, 51, 49, 1)"),a("#forgot-resp-msg").css("opacity",0).css("color","#d22229").animate({opacity:1},{duration:360}).html("Please enter a valid email address.")};return c.username!==d&&null!==c.username&&c.username.length>1?(a.ajax({url:b.determineConfig("forgot-password","account"),data:c,type:"POST",statusCode:{200:function(a){e(a)},404:function(){f()}}}),!1):void g()},renderLinkSignin:function(b){a(".sign-in-link-holder").html(b)},assignHandlers:function(b){var c=this;switch(b){case"sign-in-linking":a(".sign-in-from-modal").hide(),c.renderLinkSignin(TNYmodalviews.prototype.signInLink),a(".sign-in-link-holder").show();break;case"linking":a("h1#step1-link").css("font-weight","bold"),a("h1#step1-link").css("color","#666"),a("#header1-number").css("color","#666"),a("#submit-link-address-lookup").click(function(){c.validateForm("link-account-address")}),a("#close-modal").click(function(){return c.closeModal(d),!1});break;case"sign-in":a("#close-modal").click(function(){return c.closeModal("fancyModal"),!1});break;case"barrier":a("#sign-in-barrier").click(function(){c.viewHelper("sign-in",null)});break;case"limited":a("#sign-in-barrier").click(function(){c.viewHelper("sign-in",null)})}a("#create-account").click(function(){c.viewHelper("link-account-begin",null),c.assignHandlers("linking")}),a("#signout").click(function(){c.signOut()})},close:function(){},resetToStep1:function(){a("#link-account-name-radio").prop("checked",!1),a("#link-account-numb-radio").prop("checked",!1),a("#link-account-numb-inter-radio").prop("checked",!1),a("#step1-link").removeClass("initial-step-linking"),a("#step2-link").css({"background-color":"#f2f2f2","font-weight":"normal"}),a("#step1-link").removeClass("initial-step-linking"),a("#step3-link").css({"background-color":"#f2f2f2","font-weight":"normal"}),a("#step1-link ").removeClass("link-currentStepProgress"),a("#step2-link ").removeClass("link-currentStepProgress"),a("#step1-link").css({"background-color":"rgb(214, 214, 214)","font-weight":"bold"}),a("#secondItem").removeClass("appear-link").dequeue(),a("#thirdItem").removeClass("appear-link").dequeue(),a("#serve-resp-link").css("display","none").html(""),a("#header1-number").css({color:"#555"}),a("#header2-number").css({color:"#BBB"}),a("#header3-number").css({color:"#BBB"}),a("#address-msg").html(""),a("#name-msg").html(""),a("#password-msg").html(""),a("#email-msg").html(""),a("#zip-msg").html("")},getUserLinkSelection:function(){var b=a('input[name="acct"]');b.change(function(b){b.preventDefault();var c=a(this).val(),d=function(){document.getElementById("link-account-numb-radio").checked=!0,document.getElementById("link-account-name-radio").checked=!1,document.getElementById("link-account-numb-inter-radio").checked=!1,a(this).attr("checked","checked"),a(this).attr("checked",!0),a(".flow-inter").hide(),a("#serve-resp-link").hide(),a(".flow-address").hide(),a(".flow-name").show()},e=function(){document.getElementById("link-account-name-radio").checked=!0,document.getElementById("link-account-numb-radio").checked=!1,document.getElementById("link-account-numb-inter-radio").checked=!1,a(this).attr("checked",!0),a("#serve-resp-link").hide(),a(".flow-inter").hide(),a(".flow-address").show(),a(".flow-name").hide()},f=function(){a(this).attr("checked",!0),document.getElementById("link-account-numb-inter-radio").checked=!0,document.getElementById("link-account-numb-radio").checked=!1,document.getElementById("link-account-name-radio").checked=!1,a(this).attr("checked",!0),a("#serve-resp-link").hide(),a(".flow-address").hide(),a(".flow-name").hide(),a(".flow-inter").show()};"numb-lookup"===c&&d(),"name-lookup"===c&&e(),"international-lookup"===c&&f()})},signOut:function(){var a=this;try{a.deleteCookie("amg_user"),a.deleteCookie("amg_user_partner"),a.deleteCookie("ev_ss"),window.location.reload()}catch(b){throw new Error(b)}},go2step2:function(){var b=a("#link1"),c=a("#link2"),d=a("#link3");b.css("max-height","0"),c.css("max-height","39em"),d.css("max-height","0")},hideStep1:function(){a("#link1").css("max-height","0")},showStep2:function(){a("#link1").css("max-height","0"),a("#link2").css("max-height","33em")},redirect2AcctPage:function(){var a=this;window.location.href=a.determineConfig("linksubscription","account")},modalHandlerOn:function(){var b=this;a("body").addClass("linksubModalActive"),a(".linksubModalActive").on("click",function(a){b.detectModal(a)})},modalHandlerOff:function(){a("body").removeClass("linksubModalActive")},showModal:function(b){var c=this;if(window.MSInputMethodContext)return c.redirect2AcctPage(),!1;this.modalHandlerOn(),a("#hd").addClass("no-sticky");var d=a("#link-subscription-modal"),e=a(document.body),f=e.innerWidth();e.css("overflow","hidden"),e.width(f),a("#modal-overlay-full").addClass("active-modal-step"),"dismiss-sign-in"==b&&a("#signin-view").addClass("hidden-m-item"),d.removeClass("hidden-m-item"),d.removeClass("animated fadeIn"),c.resetToStep1(),a("#firstItem").addClass("appear-link"),d.addClass("showLinkSteps"),a("#link-screen-initial").addClass("testing"),a("#link1").css("opacity","1");var g=function(a){d.addClass("animated fadeIn"),a&&a()},h=function(){CN.stats.omniture.trackAction("showSubscriptionModal",document,{events:"event17"})};g(h)},determineConfig:function(a,b){var c=this;return a=a===d?"":a,c.envSwitch(b)+a},handleStep2Header:function(){a("section#item2 h1").addClass("link-completed"),a("h1#step2-link").css("color","#666"),a("#header2-number").css("color","#666"),a("h1#step3-link").css("color","#666"),a("#header3-number").css("color","#666"),a("h1#step1-link").css("font-weight","normal"),a("h1#step3-link").css("font-weight","bold"),a("h1#step2-link").css("font-weight","normal"),a("#secondItem").removeClass("appear-link"),a("#thirdItem").addClass("appear-link"),a("#step2-link").addClass("link-currentStepProgress"),a("#step3-link").css("background-color","#d6d6d6")},linkUserAccount:function(b,c){var d=this;if(!b)return!1;var e,g,h,i,j=document,k=navigator.userAgent;switch(c){case"international":return f.startLoadingIndicator("linkbutton-inter","spinWrap-inter"),e=j.getElementById("link-account-numb-inter").value,g=a("#international-link-select option:selected").text(),i={acctNumb:e,country:g,userAgnt:k},a.ajax({url:d.determineConfig("linkaccount_3","account"),data:i,type:"POST",statusCode:{200:function(b){a("#link-account-numb").css("border","1px solid #999"),a("#link-zip").css("border","1px solid #999");var c=JSON.stringify(b);c=c.replace(/"/g,""),d.renderLinkSignin(TNYmodalviews.prototype.signInLink(c)),a(".sign-in-link-holder").hide(),d.contentSwap("create-login",c),a("#before-link-prompt").hide(),d.handleStep2Header(),a(".flow-inter").hide(),a(".name-lookup").show(),a("#zip-msg-acct").html(""),a("#acct-msg").html(""),a(".sign-in-from-modal").show(),d.assignHandlers("sign-in-registering"),a("#header2-number").css({color:"#BBB"}),a("#sign-in-from-link").click(function(){a("#step3-link").text("Sign in"),a(".sign-in-from-modal").hide(),a("#create-serv-resp-reg").html("").hide(),a(".sign-in-link-holder").show(),a("#signIn-link").on("click",function(a){a.stopPropagation(),d.registerUserAccount("link-signin")})}),a("#reg-link").click(function(){a("#step3-link").text("Create a login"),a(".sign-in-link-holder").hide(),a(".sign-in-from-modal").show(),a(".sign-in-link-holder").removeClass("hide-link")});var e=function(){a("#linkbutton-inter").on("click",function(a){return a.preventDefault(),d.validateForm("link-account-inter"),!1})};f.stopLoadingIndicator("linkbutton-inter","spinWrap-inter",e)},204:function(){var b=function(){a("#linkbutton-inter").on("click",function(a){return a.preventDefault(),d.validateForm("link-account-inter"),!1})};f.stopLoadingIndicator("linkbutton-inter","spinWrap-inter",b),j.getElementById("link-lookup-status-international").style.display="block",j.getElementById("link-lookup-status-international").innerHTML="Unfortunately, we are unable to locate your account.  Please try again, or call Customer Care at 1-800-444-7570."},209:function(b){var c=function(){a("#linkbutton-inter").on("click",function(){d.validateForm("link-account-inter")})};f.stopLoadingIndicator("linkbutton-inter","spinWrap-inter",c);var e=JSON.stringify(b.message);return e=e.replace(/"/g,""),a("#link-account-numb-inter").css("border","1px solid #df3331"),a("#link-lookup-status-international").html(e).show(),!1},206:function(){var b=function(){a("#linkbutton-inter").on("click",function(){d.validateForm("link-account-inter")})};f.stopLoadingIndicator("linkbutton-inter","spinWrap-inter",b),a("#link-account-numb-inter").css("border","1px solid #df3331"),a("#link-lookup-status-international").html("Unfortunately, we are unable to locate your account.  Please try again, or call Customer Care at 1-800-444-7570.").show()},400:function(){var b=function(){a("#linkbutton-inter").on("click",function(){d.validateForm("link-account-inter")})};f.stopLoadingIndicator("linkbutton-inter","spinWrap-inter",b),j.getElementById("link-lookup-status-international").style.display="block",j.getElementById("link-lookup-status-international").innerHTML="Sorry, something was wrong with the form. Please try again."},402:function(){var b=function(){a("#linkbutton-inter").on("click",function(){d.validateForm("link-account-inter")})};f.stopLoadingIndicator("linkbutton-inter","spinWrap-inter",b),document.getElementById("create-serv-resp").style.display="block",document.getElementById("create-serv-resp").innerHTML='You have used this e-mail address on another site in our network, so you are already registered for The New Yorker. Please <span id="sign-in-existing"> sign in.</span>',document.getElementById("sign-in-existing").addEventListener("click",function(){d.viewHelper("sign-in",null),d.assignHandlers("sign-in",null)},!1)},404:function(){var b=function(){a("#linkbutton-inter").on("click",function(){d.validateForm("link-account-inter")})};f.stopLoadingIndicator("linkbutton-inter","spinWrap-inter",b),document.getElementById("create-serv-resp").innerHTML="There was a problem with the form please try again."},500:function(){var b=function(){a("#linkbutton-inter").on("click",function(){d.validateForm("link-account-inter")})};f.stopLoadingIndicator("linkbutton-inter","spinWrap-inter",b),document.getElementById("create-serv-resp").innerHTML="There was a problem with the form please try again."},error:function(b,c){if("timeout"===c){var e=function(){a("#linkbutton-inter").on("click",function(a){return a.preventDefault(),d.validateForm("link-account-inter"),!1})};f.stopLoadingIndicator("linkbutton-inter","spinWrap-inter",e)}}}}),!1;case"address":f.startLoadingIndicator("submit-link-address-lookup","spinWrap-address"),e=j.getElementById("fullname").value,g=j.getElementById("address1").value;var l=j.getElementById("address2").value,m=j.getElementById("city").value,n=j.getElementById("link-zip").value,o=j.getElementById("state").value,p=navigator.userAgent;return h={fullname:e,addy1:g,addy2:l,city:m,state:o,zip:n,userAgnt:p},a.ajax({url:d.determineConfig("linkaccount","account"),data:h,type:"POST",statusCode:{200:function(b){var c=function(){a("#submit-link-address-lookup").on("click",function(a){return a.preventDefault(),d.validateForm("link-account-address"),!1})};f.stopLoadingIndicator("submit-link-address-lookup","spinWrap-address",c),a("#link-account-numb").css("border","1px solid #999"),a("#link-zip").css("border","1px solid #999"),a("h1#step1-link").css("font-weight","normal"),a("h1#step2-link").css("font-weight","normal"),a("h1#step2-link").css("color","#666"),a("#header2-number").css("color","#666"),a("h1#step3-link").css("color","#666"),a("#header3-number").css("color","#666"),a("h1#step3-link").css("font-weight","bold");var e=JSON.stringify(b);e=e.replace(/"/g,""),d.renderLinkSignin(TNYmodalviews.prototype.signInLink(e)),a(".sign-in-link-holder").hide(),d.contentSwap("create-login",e),a("#before-link-prompt").hide(),d.handleStep2Header(),a(".flow-inter").hide(),a(".name-lookup").show(),a("#header2-number").css({color:"#BBB"}),a("#zip-msg-acct").html(""),a("#acct-msg").html(""),a(".sign-in-from-modal").show(),d.assignHandlers("sign-in-registering"),a("#sign-in-from-link").click(function(){a("#step3-link").text("Sign in"),a(".sign-in-from-modal").hide(),a("#create-serv-resp-reg").html("").hide(),a(".sign-in-link-holder").show(),a("#signIn-link").on("click",function(){return d.registerUserAccount("link-signin"),!1})}),a("#reg-link").click(function(){a("#step3-link").text("Create a login"),a(".sign-in-link-holder").hide(),a(".sign-in-from-modal").show(),a(".sign-in-link-holder").removeClass("hide-link")})},204:function(){var b=function(){a("#submit-link-address-lookup").on("click",function(){d.validateForm("link-account-address")})};f.stopLoadingIndicator("submit-link-address-lookup","spinWrap-address",b),j.getElementById("create-serv-resp").innerHTML="This account is not eligible for digital access."},206:function(){var b=function(){a("#submit-link-address-lookup").on("click",function(a){return a.preventDefault(),d.validateForm("link-account-address"),!1})};f.stopLoadingIndicator("submit-link-address-lookup","spinWrap-address",b);var c="Unfortunately, we are unable to locate your account.  Please try again, or call Customer Care at 1-800-444-7570.";a("#link-lookup-status-name").html(c).show()},209:function(b){var c=function(){a("#submit-link-address-lookup").on("click",function(a){return a.preventDefault(),d.validateForm("link-account-address"),!1})};f.stopLoadingIndicator("submit-link-address-lookup","spinWrap-address",c);var e=JSON.stringify(b.message);e=e.replace(/"/g,""),a("#link-lookup-status-name").html(e).show()},400:function(){var b=function(){a("#submit-link-address-lookup").on("click",function(a){return a.preventDefault(),d.validateForm("link-account-address"),!1})};f.stopLoadingIndicator("submit-link-address-lookup","spinWrap-address",b),j.getElementById("link-acct-state").style.display="block",j.getElementById("link-acct-state").innerHTML="Sorry, something was wrong with the form. Please try again."},401:function(b){var c=function(){a("#submit-link-address-lookup").on("click",function(a){return a.preventDefault(),d.validateForm("link-account-address"),!1})};f.stopLoadingIndicator("submit-link-address-lookup","spinWrap-address",c);var e=JSON.stringify(b.message);e=e.replace(/"/g,""),a("#link-lookup-status-name").html("Sorry, something went wrong or that email is already in use.").show()},402:function(){var b=function(){a("#submit-link-address-lookup").on("click",function(a){return a.preventDefault(),d.validateForm("link-account-address"),!1})};f.stopLoadingIndicator("submit-link-address-lookup","spinWrap-address",b),document.getElementById("create-serv-resp").style.display="block",document.getElementById("create-serv-resp").innerHTML='You have used this e-mail address on another site in our network, so you are already registered for The New Yorker. Please <span id="sign-in-existing"> sign in.</span>',document.getElementById("sign-in-existing").addEventListener("click",function(){d.viewHelper("sign-in",null),d.assignHandlers("sign-in",null)},!1)},404:function(){var b=function(){a("#submit-link-address-lookup").on("click",function(a){return a.preventDefault(),d.validateForm("link-account-address"),!1})};f.stopLoadingIndicator("submit-link-address-lookup","spinWrap-address",b),document.getElementById("create-serv-resp").innerHTML="There was a problem with the form please try again."},500:function(){var b=function(){a("#submit-link-address-lookup").on("click",function(a){return a.preventDefault(),d.validateForm("link-account-address"),!1})};f.stopLoadingIndicator("submit-link-address-lookup","spinWrap-address",b),document.getElementById("create-serv-resp").innerHTML="There was a problem with the form please try again."},error:function(b,c){if("timeout"===c){var e=function(){a("#submit-link-address-lookup").on("click",function(a){return a.preventDefault(),d.validateForm("link-account-address"),!1})};f.stopLoadingIndicator("submit-link-address-lookup","spinWrap-address",e)}}}}),!1;case"number":f.startLoadingIndicator("linkbutton","spinWrap-numb");var q=j.getElementById("link-zip-from-number").value,r=navigator.userAgent,s=j.getElementById("link-account-numb").value;i={acctNumb:s,acctZip:q,userAgnt:r};var t=!1;if(!t)return t=!0,void a.ajax({url:d.determineConfig("linkaccount_2","account"),data:i,type:"POST",statusCode:{200:function(b){var c=function(){a("#linkbutton").on("click",function(){d.validateForm("link-account")})};f.stopLoadingIndicator("linkbutton","spinWrap-numb",c),a("#link-account-numb").css("border","1px solid #999"),a("#link-zip").css("border","1px solid #999"),a("#before-link-prompt").hide(),a(".sign-in-link-holder").hide(),d.handleStep2Header(),a("#secondItem").removeClass("appear-link"),a("#thirdItem").addClass("appear-link"),a("#step2-link").addClass("link-currentStepProgress"),a("#step3-link").css("background-color","#d6d6d6"),a("#zip-msg-acct").html(""),a("#acct-msg").html("");var e;e=b.replace(/"/g,""),d.renderLinkSignin(TNYmodalviews.prototype.signInLink(e)),d.contentSwap("create-login",e),a("#signIn-link").click(function(a){a.stopPropagation(),d.registerUserAccount("link-signin")}),a("#header2-number").css({color:"#BBB"}),a(".flow-inter").hide(),a(".name-lookup").show(),a(".sign-in-from-modal").show(),d.assignHandlers("sign-in-registering"),a("#sign-in-from-link").click(function(){a("#step3-link").text("Sign in"),a(".sign-in-from-modal").hide(),a("#create-serv-resp-reg").html("").hide(),a(".sign-in-link-holder").show(),a("#signIn-link").on("click",function(a){d.registerUserAccount(a,"link-signin")})}),a("#reg-link").click(function(){a("#step3-link").text("Create a login"),a(".sign-in-link-holder").hide(),a(".sign-in-from-modal").show(),a(".sign-in-link-holder").removeClass("hide-link")})},206:function(){var b=function(){a("#linkbutton").on("click",function(){d.validateForm("link-account")})};f.stopLoadingIndicator("linkbutton","spinWrap-numb",b);var c="Unfortunately, we are unable to locate your account.  Please try again, or call Customer Care at 1-800-444-7570.";a("#link-account-numb").css("border","1px solid #df3331"),a("#link-zip").css("border","1px solid #df3331"),a("#link-lookup-status").html(c),a("#link-lookup-status").fadeOut("fast").fadeIn()},209:function(b){var c=function(){a("#linkbutton").on("click",function(){d.validateForm("link-account")})};f.stopLoadingIndicator("linkbutton","spinWrap-numb",c);var e=JSON.stringify(b.message);e=e.replace(/"/g,""),a("#link-account-numb").css("border","1px solid #df3331"),a("#link-zip").css("border","1px solid #df3331"),a("#link-lookup-status").html(e),a("#link-lookup-status").fadeOut("fast").fadeIn()},400:function(){var b=function(){a("#linkbutton").on("click",function(){d.validateForm("link-account")})};f.stopLoadingIndicator("linkbutton","spinWrap-numb",b),j.getElementById("link-acct-state").style.display="block",j.getElementById("link-acct-state").innerHTML="Sorry, something was wrong with the form. Please try again."},402:function(){var b=function(){a("#linkbutton").on("click",function(){d.validateForm("link-account")})};f.stopLoadingIndicator("linkbutton","spinWrap-numb",b),j.getElementById("create-serv-resp").style.display="block",j.getElementById("create-serv-resp").innerHTML='You have used this e-mail address on another site in our network, so you are already registered for The New Yorker. Please <span id="sign-in-existing"> sign in.</span>',j.getElementById("sign-in-existing").addEventListener("click",function(){d.viewHelper("sign-in",null),d.assignHandlers("sign-in",null)},!1)},204:function(){var b=function(){a("#linkbutton").on("click",function(){d.validateForm("link-account")})};f.stopLoadingIndicator("linkbutton","spinWrap-numb",b),j.getElementById("create-serv-resp").innerHTML="This account is not eligible for digital access.",a("#create-serv-resp").show()},404:function(){var b=function(){a("#linkbutton").on("click",function(){d.validateForm("link-account")})};f.stopLoadingIndicator("linkbutton","spinWrap-numb",b),j.getElementById("create-serv-resp").innerHTML="There was a problem with the form please try again.",a("#create-serv-resp").show()},500:function(){var b=function(){a("#linkbutton").on("click",function(){d.validateForm("link-account")})};f.stopLoadingIndicator("linkbutton","spinWrap-numb",b),j.getElementById("create-serv-resp").innerHTML="There was a problem with the form please try again."},error:function(b,c){if("timeout"===c){var e=function(){a("#linkbutton").on("click",function(){d.validateForm("link-account")})};f.stopLoadingIndicator("linkbutton","spinWrap-numb",e),j.getElementById("create-serv-resp").innerHTML="There was a problem with the form please try again."}}}});return}},validateForm:function(b){var c=this;a("input").each(function(){this.value=a(this).val().trim()});var d=!1,e=!1,f=!1,g=!1,h=!1,i=/^[0-9]+$/,j=!1,k=!1,l=!0,m=!1,n=!1,o=!1,p=!1,q=!1,r=document,s=function(a){document.activeElement.blur();for(var b=document.querySelectorAll("input"),c=0;c<b.length;c++)b[c].blur();a&&a()};switch(b){case"link-account-inter":var t=!1,u=!1,v=r.getElementById("link-account-numb-inter").value,w=a("#international-link-select option:selected").text(),x=i.test(v);w=w.toString(),"Select country"===w?setTimeout(function(){c.errHandler("inter-select-msg","Please select a country.")},0):(u=!0,c.errHandler("inter-select-msg",null,null,"y")),x?(c.errHandler("inter-enteraccount-msg",null,null,"y"),t=!0):c.errHandler("inter-enteraccount-msg","Please enter a valid account number."),t&&u&&(a("#inter-enteraccount-msg").hide(),a("#acct-inter-msg").hide(),s(c.linkUserAccount(!0,"international")));break;case"link-account-address":var y=r.getElementById("fullname").value,z=r.getElementById("address1").value,A=r.getElementById("address2").value,B=r.getElementById("city").value,C=r.getElementById("state").value,D=r.getElementById("link-zip").value;y=y.replace(/<script[^>]*>[\S\s]*?<\/script[^>]*>/gi,""),z=z.replace(/<script[^>]*>[\S\s]*?<\/script[^>]*>/gi,""),B=B.replace(/<script[^>]*>[\S\s]*?<\/script[^>]*>/gi,""),C=C.replace(/<script[^>]*>[\S\s]*?<\/script[^>]*>/gi,""),D=D.replace(/<script[^>]*>[\S\s]*?<\/script[^>]*>/gi,""),A=A.replace(/<script[^>]*>[\S\s]*?<\/script[^>]*>/gi,"");var E={canada:/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ]( )?\d[ABCEGHJKLMNPRSTVWXYZ]\d$/i,usa:/^\d{5}(-\d{4})?$/},F=E.usa.test(D),G=E.canada.test(D),H=document.getElementById("state").selectedIndex,I=H,J=document.getElementById("state").options[I].value;if("initialState"===J?c.errHandler("state-msg","Please enter a valid state or province.<br/>"):(c.errHandler("state-msg",null,null,"y"),n=!0),B.length<=2?c.errHandler("city-msg","Please enter a valid city."):(c.errHandler("city-msg",null,null,"y"),m=!0),y.length<=4?c.errHandler("name-msg","Please enter a valid name."):(c.errHandler("name-msg",null,null,"y"),j=!0),z.length<=4?c.errHandler("address-msg","Please enter a valid address."):(c.errHandler("address-msg",null,null,"y"),k=!0),D.length||c.errHandler("zip-msg","Please enter a valid zip or postal code."),G||F||c.errHandler("zip-msg","Please enter a valid zip or postal code."),(G||F)&&D.length&&(o=!0,c.errHandler("zip-msg",null,null,"y")),F&&D.length&&(o=!0,c.errHandler("zip-msg",null,null,"y")),G&&D.length&&(o=!0,c.errHandler("zip-msg",null,null,"y")),o&&k&&j&&l&&(p=!0,c.errHandler("zip-msg",null,null,"y")),e&&d&&(q=!0),!p)return q?(c.errHandler("zip-msg",null,null,"y"),void c.linkUserAccount(!0,"number")):!1;c.errHandler("zip-msg",null,null,"y"),s(c.linkUserAccount(!0,"address"));break;case"create-login":{r.getElementById("useremail1").value,r.getElementById("useremail2").value,r.getElementById("createpass1").value,r.getElementById("createpass2").value}N.length<6&&c.errHandler("password-msg","Password must be at least six characters."),N.length>=6&&(a("#password-msg").html(""),h=!0),M.length<6&&c.errHandler("email-msg","Please enter a valid e-mail address."),M.length>5&&M.indexOf("@")>-1&&(c.errHandler("email-msg",null,null,"y"),g=!0),h&&g&&(a("#password-msg").html(""),a("#email-msg").html(""),f=!0);break;case"link-account":var K=document.getElementById("link-account-numb").value,L=document.getElementById("link-zip-from-number").value;return E={canada:/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ]( )?\d[ABCEGHJKLMNPRSTVWXYZ]\d$/i,usa:/^\d{5}(-\d{4})?$/},F=E.usa.test(L),G=E.canada.test(L),G||F||c.errHandler("zip-msg-acct","Please enter a valid zip or postal code."),K.length||c.errHandler("acct-msg","Please enter a valid account number."),K.length<4&&c.errHandler("acct-msg","Please enter a valid account number."),K.length>=5&&(d=!0),(G||F)&&L.length&&(e=!0,c.errHandler("zip-msg-acct",null,null,"y")),F&&L.length&&(e=!0,c.errHandler("zip-msg-acct",null,null,"y")),G&&L.length&&(e=!0,c.errHandler("zip-msg-acct",null,null,"y")),d&&c.errHandler("acct-msg",null,null,"y"),d&&e?(c.errHandler("zip-msg-acct",null,null,"y"),c.errHandler("acct-msg-acct",null,null,"y"),void c.linkUserAccount(!0,"number")):!1;case"sign-in":var M=a("#username").val(),N=a("#userpass").val();g=!1,h=!1,f=!1,N.length<6&&c.errHandler("password-msg","Password must be at least six characters."),N.length>=6&&(c.errHandler("password-msg",null,null,"y"),h=!0),M.length<6&&c.errHandler("email-msg","Please enter a valid e-mail address."),M.length>5&&M.indexOf("@")>-1&&(c.errHandler("email-msg",null,null,"y"),g=!0),h&&g&&(c.errHandler("email-msg",null,null,"y"),c.errHandler("password-msg",null,null,"y"),f=!0)}},errHandler:function(b,c,d,e){"y"==e&&a("#"+b).css("opacity",0).css("color","#d22229").animate({opacity:1},{duration:360}).html("").hide(),a("#"+b).css("opacity",0).css({color:"#d22229","font-size":"1.4rem","margin-top":"8px","margin-bottom":"8px"}).animate({opacity:1},{duration:360}).html(c).show()},Thanks:function(b){var c=this;h(),a("#conf-view").removeClass("hidden-m-item"),a("#conf-view").addClass("showLinkSteps"),a("#modal-overlay-full").addClass("final-link-step"),c.viewHelper("thanks",b),this.modalHandlerOn(),a("#link-subscription-modal").removeClass("fadeIn"),a("#link-subscription-modal").addClass("fadeOut").hide(),f.CheckEStatus(),window.scrollTo(0,0)}},h=function(){document.body.className=document.body.className.replace("bg-modal-activated",""),a("#link-subscription-modal").addClass("animated fadeOut"),a(".mobilenav").removeClass("remove-nav-shadow"),a(".page-container").css("opacity",1),
a("nav").css("opacity",1),a("#serve-resp").html(""),a("#serve-resp").hide(),a(".page-container").css("-webkit-user-select","text").css("-moz-user-select","text").css("user-select","text").css("pointer-events","auto"),a("div#email-msg").html(""),a("div#password-msg").html(""),a("#hd").removeClass("no-sticky"),a("div#city-msg").html(""),a("div#state-msg").html(""),a("body").removeClass("linksubModalActive"),a(".linksubModalActive").off("click",function(a){f.detectModal(a.target.id)})},i=function(){a(".mobilenav").removeClass("remove-nav-shadow");try{var b=localStorage.getItem("notifcation-shown"),c=JSON.parse(b);c.viewed!==!0&&(a(".page-container").css("opacity",1),a("nav").css("opacity",1),a(".page-container").css("-webkit-user-select","text").css("-moz-user-select","text").css("user-select","text").css("pointer-events","auto"))}catch(d){}a("#modal-overlay-full").removeClass("active-modal-step"),a("#link-subscription-modal").removeClass("showLinkSteps"),a("#serve-resp").html(""),a("#serve-resp").hide(),a("#link-subscription-modal").addClass("hidden-m-item"),a("#signin-view").addClass("hidden-m-item"),a("#reg-view").addClass("hidden-m-item");for(var e=document.getElementById("link-subscription-modal");e.firstChild;)e.removeChild(e.firstChild);e.className="hidden-m-item nyr-flex-modal";var f=a(document.body);f.css("overflow","auto"),f.width("auto"),f.removeClass("linksubModalActive"),a("#hd").removeClass("no-sticky")};window.TNY.account.linksubscriptionProcess=g,a(document).ready(function(){})}(jQuery,window,document),function(a,b,c,d){"use strict";window.TNY||(window.TNY={}),window.TNY.account||(window.TNY.account={});var e=window.TNY,f=window.TNY.account,g={messages:{LoggedInUserNav:'<b><li class="nyer-plain-lnk big plain"><a href="'+e.account.determineConfig("myaccount/profile","account")+'">My account</a></b></li><li id="link-sub-nav" class="nyer-plain-lnk nav-menu">Link your subscription</li><li class="nyer-plain-lnk big plain"><span id="signout" class="big plain"><a href="'+window.TNY.account.determineConfig("logout","account")+'">Sign out</a></span>',invalidEmail:"Please enter a valid e-mail address.",passwordErr:"Password must be at least six characters.",unsuccessfulLogin:'Unfortunately, we are unable to locate your account.<div></div><div class="serv-error-subtext">If you subscribed through a partner such as Apple, Amazon, or Google Play, please call 1-800-444-7570.</div>',forgotpasswordModal:'<h2 class="forgot-header">Forgot <div class="breakForgot"></div>Password?</h2><div id="final-step"></div><fieldset class="signin-modal" id="forgot-pass-body"><div class="forgot-info">Please enter the e-mail address associated with your newyorker.com account. We\'ll send you instructions to reset your password.</div><div class="pass-err-msg" id="forgot-resp-msg"></div><input id="forgot-field" placeholder="E-mail address" type="email"/></div><div id="forgot-pass-msg"></div><div class="signInBorder"><input type="button" value="SUBMIT" id="forgotPass" class="hover-only-button nyr-blue-button" /> </div></div><div class="modal-intro"><div class="forgot-mini-spacer"></div><div class="modal-intro"><div class="mob-breakln signin-sub">Need help? </div> Call 1-800-444-7570 &nbsp;&nbsp;|&nbsp;&nbsp; <b><a href="javascript:void(0)" onclick="javascript:window.open(\'http://cricket.bamboocricket.com:8080/ersweb/chatClientLogin?email=cdsusa_nyr@inbound2.bamboocricket.com\',\'\',\'height=520, width=500,toolbar=no,top=100,left=100, menubar=no, scrollbars=no, resizable=no, location=no, status=no\');">Live chat</a></b> &nbsp;&nbsp;|&nbsp;&nbsp; <span id="email-link"><b><a href="mailto:help@newyorker.com">Email</a></b></span></div><span class="modal-intro signin-sub"><div class="forgot-subtext-spacer"></div>We are available Mon&#8211;Fri,  8 am - 12 am E.T., and Sat&#8211;Sun, 9 am - 7 pm E.T. </span></fieldset>'},selectors:{passmsg:a("#password-msg"),barrierHome:a("#CM-nofication-home-link")},passErrFn:function(){a(this.selectors.passmsg.selector).css("opacity",0).css("color","#d22229").css("margin-top","9px").animate({opacity:1},{duration:360}).html(this.messages.passwordErr)}},h=window.orientation,i=function(){a("#CM-nofication-home-link").css({position:"relative",top:"20px"}),a(".main-mobi-break").css("display","block"),a(".center-modal-button").css("margin-bottom","inherit"),a(".mob-message-item-nest").css("margin-bottom","9%"),a("div#learn-more-mobi-button").css("margin-top","9%"),a(".barrier-type").css({position:"absolute",top:"10px!important"}),window.scrollTo(0,0)},j=function(){a("#CM-nofication-home-link").css({position:"relative",top:"20px"}),a(".center-modal-button").css("margin-bottom","120px"),a(".main-mobi-break").css("display","none"),a(".mob-message-item-nest").css("margin-bottom","1%"),a("div#learn-more-mobi-button").css("margin-top","2%"),window.scrollTo(0,0)},k=function(a){window.orientation!==h&&(h=window.orientation,-90==window.orientation||90==window.orientation?(j(),a!==event&&a()):(i(),a!==event&&a()))},l=function(a){var b,c,d=navigator.userAgent,g={IE:/MSIE[\/\s](\d+\.\d+)/.test(d),Kindle:/\bSilk\b/.test(d),FF20:/Firefox\/20.0/.test(d),FF21:/Firefox\/21.0/.test(d),FF22:/Firefox\/22.0/.test(d),FF23:/Firefox\/23.0/.test(d),FF24:/Firefox\/24.0/.test(d),FF25:/Firefox\/25.0/.test(d),Safari6:/Safari\/8536.25/.test(d),Safari6dot2:/6.2 Safari\/537.85.10/.test(d),Safari5dot1:/5.1 Safari/.test(d),Safari5dotX:/5.0 Safari/.test(d)};for(var h in g)if(g[h]===!0){if(c=!0,"sign-in"==a&&c===!0)return b=window.TNY.account.redirectToSignInPage(),void new b;if("link"==a&&c===!0)return b=window.TNY.account.redirectToLinkPage(),void new b}return c=!1,"sign-in"==a&&c===!1?void f.launchSignInModal():void("link"==a&&c===!1&&(e.account.linksubscriptionProcess.init(),e.account.linksubscriptionProcess.getUserLinkSelection(null),e.account.linksubscriptionProcess.showModal()))};window.addEventListener("orientationchange",k,!1),f.invalidateCurrentUser=function(b){var c=e.account.readCookie(b),d={amg_user_partner:c};a.ajax({url:e.account.determineConfig("invalidateCurrentSession","account"),data:d,type:"POST",statusCode:{200:function(){e.account.linksubscriptionProcess.Thanks()},500:function(){e.account.linksubscriptionProcess.Thanks()}}})},f.createCookie=function(a,b,c){var d,e;if(c){var f=new Date;f.setTime(f.getTime()+24*c*60*60*1e3),d="; expires="+f.toUTCString()}else d="";var g,h=document.querySelector("meta[name=environment]").content;if("prod"==h||"stg"==h||"stag"==h){e="; domain=newyorker.com",g=a+"="+b+d+e+"; path=/";try{document.cookie=g}catch(i){return}}else if("dev"==h){e="; domain=newyorker.local",g=a+"="+b+d+e+"; path=/";try{document.cookie=g}catch(i){return}}else{g=a+"="+b+d+"; path=/";try{document.cookie=g}catch(i){return}}},f.readCookie=function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b))return e.substring(b.length,e.length)}return null},f.deleteCookie=function(a){f.createCookie(a,"",-1)},f.DrawAccessNav=function(b){switch(b){case"reset-signin":setTimeout(function(){a("#wrapper").css("opacity",1).removeClass("dismissal"),a("#step2").hide(),a("#forgot-pass").hide(),a("#reg-view").hide(),a("#login").show(),a(".modal-content").show()},680),a("#login-create").remove()}},f.forgotPass=function(){a("#forgot-resp-msg").hide(),a("#forgot-pass-msg").hide();var b={username:a("#forgot-field").val(),templateId:"NYR"},c=function(){a(".forgot-header").text("Thank You"),a("#forgot-field").css("border","1px solid #000"),a("#forgot-resp-msg").hide(),a("#forgot-pass-msg").hide(),a("#final-step").html("An e-mail was sent to <b>"+b.username+"</b> with a link to reset your password.").fadeIn("fast"),a("#forgot-pass-body").fadeOut()},e=function(){a("#forgot-pass-msg").hide(),a("#forgot-field").css("margin-top","18px"),a("#forgot-resp-msg").css("opacity",0).css("color","#d22229").animate({opacity:1},{duration:360}).html(g.messages.unsuccessfulLogin).show()},h=function(){a("#forgot-field").css("border","1px solid rgba(223, 51, 49, 1)"),a("#forgot-pass-msg").css("opacity",0).css("color","#d22229").animate({opacity:1},{duration:360}).html(g.messages.invalidEmail).show()};b.username!==d&&null!==b.username&&b.username.length>1?(a("#forgot-resp-msg").hide(),a("#forgot-pass-msg").hide(),a.ajax({url:f.determineConfig("forgot-password","account"),data:b,type:"POST",statusCode:{200:function(a){c(a)},404:function(){e()}}})):h()},f.signOut=function(){try{f.deleteCookie("amg_user"),f.deleteCookie("amg_user_partner"),f.deleteCookie("ev_ss"),window.location.href=f.determineConfig("logout","account")}catch(a){throw new Error(a)}},f.CheckEStatus=function(){{var b=f.readCookie("ee_status");f.determineConfig("","home")}"true"===b?(a("#sign_in").html('<b><li class="nyer-plain-lnk big plain"><a href="'+window.TNY.account.determineConfig("myaccount/profile","account")+'">My account</a></b></li><li></li><li class="nyer-plain-lnk big plain"><span id="signout" class="big plain"><a href="'+window.TNY.account.determineConfig("logout","account")+'">Sign out</a></span>').show(),a("#signout").click(function(){f.signOut()}),a("#link-sub-nav").hide()):(a("#sign_in").html('<b><li class="nyer-plain-lnk big plain"><a href="'+window.TNY.account.determineConfig("myaccount/profile","account")+'">My account</a></b></li><li id="link-sub-nav" class="nyer-plain-lnk nav-menu">Link your subscription</li><li class="nyer-plain-lnk big plain"><span id="signout" class="big plain"><a href="'+window.TNY.account.determineConfig("logout","account")+'">Sign out</a></span>').show(),a("#link-sub-nav").show(),a("#signout").click(function(){f.signOut()}),a("#link-sub-nav").click(function(){new l("link"),a("#signin-view").addClass("hidden-m-item")}),a("#link-sub-nav").show())},f.nuLogin=function(){var b=function(b,c){a(".barrier-type").remove(),a("#sign_in").html(g.messages.LoggedInUserNav),a("#link-sub-nav").hide(),a("#sign_in").show(),f.createCookie("ee_status",b.ee_status,1),f.createCookie("ev_ss",b.ev_sid,1),f.createCookie("amg_user",b.AMGCookie,1),f.createCookie("amg_user_partner",b.amgUUID,1),f.createCookie("nyrsess",b.nyrsess,1);var d=e.account.determineConfig("myaccount/profile","account"),h=e.account.determineConfig("logout","account");a("#mobi-account-link-1").html('<a href="'+d+'">My account</a>').show(),a("#mobi-account-link-2").html('<a href="'+h+'" id="mobi-user-sign-out" title="Sign out" class="mobi-account-menu-sign-out">Sign out</a></li>').show();var i=f.readCookie("ee_status");"true"===i&&a(".link-sub-nav").hide(),a("#mobi-account-link-2").click(function(){f.signOut()});var j;a("#sign-in-list").html(""),a(".mob-sign-in").hide();document;c&&c(),f.CloseModal(),b.remembered===!0||"true"==b.remembered?(f.createCookie("reDir",!0),f.createCookie("ev_ss",b.ev_sid,30),f.createCookie("amg_user",b.AMGCookie,30),f.createCookie("amg_user_partner",b.amgUUID,30),f.createCookie("ee_status",b.ee_status,1),j=function(){f.signOut()},a(".mob-sign-in").hide(),a("#sign-in-list").html("")):(f.createCookie("reDir",!0),f.createCookie("ev_ss",b.ev_sid),f.createCookie("amg_user",b.AMGCookie),f.createCookie("amg_user_partner",b.amgUUID),f.createCookie("nyrsess",b.nyrsess),f.createCookie("ee_status",b.ee_status,1),j=function(){f.signOut()},a(".mob-sign-in").hide(),a("#sign-in-list").html(""),c&&c(),f.CloseModal());try{var k=localStorage.getItem("notifcation-shown"),l=JSON.parse(k);if(a(".barrier-type").remove(),l.viewed===!0)try{a(".barrier-type").hide(),a("#CM-notification").hide(),window.location.reload(),window.location=window.location.pathname,history.go(0)}catch(m){}}catch(m){}},c={rememberBool:a("#rememberme").is(":checked"),username:a("#username").val(),password:a("#userpass").val()},d=a("#username").val(),h=a("#userpass").val(),i=!1,j=!1;h.length<6&&g.passErrFn(),h.length>=6&&(a("#password-msg").html(""),j=!0),d.length<6&&a("#email-msg").css("opacity",0).css("color","#d22229").css("margin-top","9px").animate({opacity:1},{duration:360}).html(g.messages.invalidEmail),d.length&&d.indexOf("@")<1&&a("#email-msg").css("opacity",0).css("color","#d22229").css("margin-top","9px").animate({opacity:1},{duration:360}).html(g.messages.invalidEmail),d.length>5&&d.indexOf("@")>-1&&(a("#email-msg").css("opacity",0).animate({opacity:1},{duration:360}).html(""),i=!0),j&&i&&(f.startLoadingIndicator("signIn","spinWrap-signin"),a("#password-msg").html(""),a("#email-msg").html(""),a.ajax({url:f.determineConfig("login","account"),data:c,type:"POST",statusCode:{200:function(a){f.stopLoadingIndicator("signIn","spinWrap-signin");try{CN.stats.omniture.trackActionEvar("login",!0,"eVar16","logged in")}catch(c){throw new Error(c)}var d=function(){f.CheckEStatus()};b(a,d)},405:function(){var b=function(){a("#signIn").on("click",function(){f.nuLogin()})};f.stopLoadingIndicator("signIn","spinWrap-signin",b),a("#signIn").attr("enabled","enabled"),document.getElementById("serve-resp").innerHTML=g.messages.unsuccessfulLogin,a("#forgot-modal-link").clone().appendTo("#serve-resp").click(function(){f.forgotPass()}),a("#serve-resp").fadeOut("fast").fadeIn()},401:function(){var b=function(){a("#signIn").on("click",function(){f.nuLogin()})};f.stopLoadingIndicator("signIn","spinWrap-signin",b),a("#signIn").attr("enabled","enabled"),document.getElementById("serve-resp").innerHTML=g.messages.unsuccessfulLogin,a("#serve-resp").fadeOut("fast").fadeIn()},450:function(){var b=function(){a("#signIn").on("click",function(){f.nuLogin()})};f.stopLoadingIndicator("signIn","spinWrap-signin",b),a("#signIn").attr("enabled","enabled"),document.getElementById("serve-resp").innerHTML=g.messages.unsuccessfulLogin,a("#forgot-modal-link").clone().appendTo("#serve-resp").click(function(){f.forgotPass()}),a("#serve-resp").fadeOut("fast").fadeIn()},failure:function(){var b=function(){a("#signIn").on("click",function(){f.nuLogin()})};f.stopLoadingIndicator("signIn","spinWrap-signin",b),a("#signIn").attr("enabled","enabled")}}}))},f.CloseModal=function(b,c){var e="#"+b;a(e).css("z-index","-1");var g=a(document.body);g.css("overflow","auto"),g.width("auto"),b===d&&(e="fancyModal"),document.body.className=document.body.className.replace("bg-modal-activated",""),a(".mobilenav").removeClass("remove-nav-shadow"),a(".page-container").css("opacity",1),a(".content-wrapper").css("opacity",1),document.getElementsByTagName("nav")[0].style.opacity=1,a("#serve-resp").html(""),a("#serve-resp").hide(),a(".page-container").css("-webkit-user-select","text").css("-moz-user-select","text").css("user-select","text").css("pointer-events","auto"),a(".content-wrapper").css("-webkit-user-select","text").css("-moz-user-select","text").css("user-select","text").css("pointer-events","auto"),a("div#email-msg").html(""),a("div#password-msg").html(""),a("#hd").removeClass("no-sticky"),f.DrawAccessNav("reset-signin"),a(e).removeClass("link-main"),a(".page-container").css({"max-height":"none","overflow-y":"auto"}),a(".content-wrapper").css({"max-height":"none",overflow:"auto"}),a("#modal-overlay-full").removeClass("active-modal-step"),a("#link-subscription-modal").removeClass("showLinkSteps"),a("#PAYWALL_BARRIER_wrapper").hide(),a("body").removeClass("signinModalActive"),a(".signinModalActive").off("click",function(a){f.detectModal(a.target.id)}),c&&c()},f.assignHandlers=function(b){switch(b){case"sign-in":break;case"barrier":a("#sign-in-barrier").click(function(){f.viewHelper("sign-in",null)})}a("#forgotpassWord").click(function(){a("#forgot-pass").show(),a("#wrapper").addClass("dismissal").css("opacity",0),a(".forgot-pass-button").click(function(){f.forgotPass()}),f.viewHelper("forgot",null)}),a("#signout").click(function(){f.signOut()})},f.renderNewLinkView=function(b){a("#lookupWrapper").removeClass(" animated fadeIn"),a("#lookupWrapper").show(),a("#lookupWrapper").addClass("dismissal").css("opacity",0),a("#lookupWrapper").html(b).addClass(" animated fadeIn")},f.registerAcctGen=function(b){a("#genacct-view").show(),a(".sign-in-from-modal").show(),a("#genacct-view").html(b)},f.renderInsideModal=function(b){a("#reg-view").removeClass(" animated fadeIn"),a("#reg-view").show(),a("#reg-view").html(b).addClass(" animated fadeIn")},f.renderLinkSignin=function(b){a(".sign-in-link-holder").html(b)},f.contentSwap=function(b){switch(b){case"zipcode":f.renderNewLinkView(TNYmodalviews.prototype.zipCode());break;case"sign-in":f.renderInsideModal(TNYmodalviews.prototype.signIn());break;case"forgot":a("#forgot-pass").html(g.messages.forgotpasswordModal).addClass(" animated fadeIn"),a("input#forgot-field").keypress(function(b){13==b.which&&(b.preventDefault(),a("#forgot-resp-msg").hide(),a("#forgot-pass-msg").hide(),f.forgotPass())}),a("#forgotPass").click(function(){f.forgotPass()})}},f.linkflowHelper=function(){a("#lookupWrapper").hide(),window.addEventListener("click",f.handleReset,!1),f.contentSwap(type,null)},f.viewHelper=function(b,c){switch(b){case"sign-in":a(".modal-content").hide(),f.contentSwap(b,c);break;case"forgot":a(".modal-content").hide(),a(".forgot-pass-button").on("click",function(){f.forgotPass()}),f.contentSwap(b,c);break;default:a(".modal-content").hide(),f.contentSwap(b,c)}},f.redirectToSignInPage=function(){window.location=f.determineConfig("retURL=","account")+encodeURIComponent(window.location.href)},f.redirectToLinkPage=function(){window.location=f.determineConfig("linksubscription?retURL=","account")+encodeURIComponent(window.location.href)},f.closeSliderMenu=function(b){var c=a(".mobile-nav"),d=a(".page-container");d.toggleClass("menu-open"),c.toggleClass("open"),b&&b()},f.setupMobileNav=function(){a("#mobile-nav").on("click",function(a){a.preventDefault(),f.checkUserLnStatus()})},f.launchSignInModal=function(){f.setupMobileNav(),TNYmodalviews.prototype.signIn(),a("#signIn").on("click",function(a){a.preventDefault();var b=function(a){document.activeElement.blur();for(var b=document.querySelectorAll("input"),c=0;c<b.length;c++)b[c].blur();a&&a()};b(f.nuLogin())}),a("#signin-view").removeClass("hidden-m-item"),a("#modal-overlay-full").addClass("active-modal-step"),a("#signin-view").addClass("showLinkSteps animated fadeIn"),a("body").addClass("signinModalActive"),a(".signinModalActive").on("click",function(a){f.detectModal(a.target.id)});var b=function(){a("#signin-view").css({position:"absolute!important"})};document.getElementsByTagName("nav")[0].style.opacity=.12,CN.stats.omniture.trackAction("lightLogin",document,{events:"event32"}),a("input").keypress(function(a){13==a.which&&(a.preventDefault(),f.nuLogin())}),a("#create-account").click(function(){e.account.linksubscriptionProcess.init(),e.account.linksubscriptionProcess.getUserLinkSelection(null),e.account.linksubscriptionProcess.showModal("dismiss-sign-in")}),f.assignHandlers("sign-in"),a("#forgotpassWord").on("click",function(){a("#forgot-pass").show(),a("#wrapper").addClass("dismissal").css("opacity",0),f.viewHelper("forgot",null)}),a("#hd").addClass("no-sticky");var c=a(document.body),d=c.innerWidth();c.css("overflow","hidden"),c.width(d),document.getElementsByTagName("nav")[0].style.opacity=.12,document.getElementById("username").focus(),e.reajs.registerCallback("mobile",null,b,null),f.closeSliderMenu(function(){})};var m=function(){var b=function(){var b=f.readCookie("amg_user");null!==b&&b!==d&&"undefined"!=typeof b&&(a("#login-text-wrapper").hide(),a("#mobile-login-text-wrap").hide(),a(".mobile-barrier-divide-right begin-notification-msg").hide(),a(".bottom-barrier-divide-right").hide(),a("#sign-in-from-notfication-mob").hide(),a("#sign-in-from-notfication").hide(),a(".signin-from-external-mobi").hide(),a("#sign-in-from-notfication-mobilink").hide())};b(),a("#sign-in-from-notfication").on("click",function(){new l("sign-in")}),a("#sign-in-from-notfication-mobilink").on("click",function(){new l("sign-in")}),a("#linksub-from-external").on("click",function(){new l("link")}),a(".linksub-from-external-mobi").on("click",function(){new l("link")}),a(".signin-from-external-mobi").on("click",function(){new l("sign-in")}),a("#linksub-from-external-promo").on("click",function(){new l("link")})};f.Barrier=function(b){var c=function(){var b=f.determineConfig("","home");a("#CM-nofication-home-link").html('<a href="'+b+'">GO TO NEWYORKER.COM<div class="small-link-chev"></div></a>'),a("#close-b-modal").css("display","none"),a("#hd").addClass("no-sticky"),a("#CM-nofication-home-link").css("display","block"),a("#CM-nofication-home-line").css("display","block"),a("#b-view").removeClass("hidden-m-item")},e=function(){a("#CM-nofication-home-link").css("display","none"),a("#CM-nofication-home-line").css("display","none");var b=function(){a("#CM-notification").hide()};a("#close-b-modal").click(function(){f.CloseModal("CM-notification",b())}),a(".remind-later-text").click(function(){f.CloseModal("CM-notification",b())})},g=function(){a(".page-container").css("opacity",.12).css("-webkit-user-select","none").css("-moz-user-select","none").css("user-select","none").css("pointer-events","none"),a(".content-wrapper").css("-webkit-user-select","none").css("-moz-user-select","none").css("user-select","none").css("pointer-events","none")},h=function(b){var c={viewed:!0};try{localStorage.setItem("notifcation-shown",JSON.stringify(c))}catch(d){}var e=navigator.userAgent,f=e.indexOf("Android")>-1&&e.indexOf("Mozilla/5.0")>-1&&e.indexOf("AppleWebKit")>-1,g=function(){f&&a(".mob-message-item").css("margin-top","90px")};setInterval(k(g),2e3),a(".mobile-nav").addClass("remove-nav-shadow"),a("#hd").addClass("no-sticky"),a("#b-view").removeClass("hidden-m-item"),a("#CM-notification").css("z-index","9999000").toggleClass("show"),m(),b&&b(),window.scrollTo(0,0)},i=function(){a("#subscribe-text-container").css("margin-bottom","0"),a("#PAYWALL_BARRIER_wrapper").css({position:"absolute",top:"0px"}),a("#CM-notification").css({"min-height":"420px"}),a(".barrier-type").css({position:"absolute!important","margin-top":"3%"}),a("#PAYWALL_BARRIER_wrapper").css("min-height","0"),window.scrollTo(0,0)},j=function(){a("#PAYWALL_BARRIER_wrapper").css("min-height","0");var b=navigator.userAgent,c=b.indexOf("Android")>-1&&b.indexOf("Mozilla/5.0")>-1&&b.indexOf("AppleWebKit")>-1;c&&a("#CM-notification").css({height:"100%"}),a("#PAYWALL_BARRIER_wrapper").css("min-height","0"),a(".barrier-type").css({position:"absolute!important",top:"0",left:"0","margin-top":"0!important"}),window.scrollTo(0,0)};switch(b){case"half":h(function(){"undefined"==typeof pageAds.AMS_NYR_PAYWALL_BARRIER||typeof pageAds.AMS_NYR_PAYWALL_BARRIER===d||null===typeof pageAds.AMS_NYR_PAYWALL_BARRIER?a("#PAYWALL_BARRIER_wrapper").html(TNYmodalviews.prototype.barrierHalf(null)):(g(),a("#PAYWALL_BARRIER_wrapper").html(pageAds.AMS_NYR_PAYWALL_BARRIER))}),setTimeout(function(){CN.isMobile&&i(),e()},0);break;case"mhalf":h(function(){"undefined"==typeof pageAds.AMS_NYR_PAYWALL_BARRIER||typeof pageAds.AMS_NYR_PAYWALL_BARRIER===d||null===typeof pageAds.AMS_NYR_PAYWALL_BARRIER?a("#PAYWALL_BARRIER_wrapper").html(TNYmodalviews.prototype.barrierHalfMobile(null)):(g(),a("#PAYWALL_BARRIER_wrapper").html(pageAds.AMS_NYR_PAYWALL_BARRIER))}),setTimeout(function(){e(),i()},0);break;case"full":h(function(){"undefined"==typeof pageAds.AMS_NYR_PAYWALL_BARRIER||typeof pageAds.AMS_NYR_PAYWALL_BARRIER===d||null===typeof pageAds.AMS_NYR_PAYWALL_BARRIER?a("#PAYWALL_BARRIER_wrapper").html(TNYmodalviews.prototype.barrierFull(null)):(g(),a("#PAYWALL_BARRIER_wrapper").html(pageAds.AMS_NYR_PAYWALL_BARRIER))}),setTimeout(function(){CN.isMobile&&j(),c()},0);break;case"mfull":h(function(){"undefined"==typeof pageAds.AMS_NYR_PAYWALL_BARRIER||typeof pageAds.AMS_NYR_PAYWALL_BARRIER===d||null===typeof pageAds.AMS_NYR_PAYWALL_BARRIER?a("#PAYWALL_BARRIER_wrapper").html(TNYmodalviews.prototype.barrierFullMobile(null)):(g(),a("#PAYWALL_BARRIER_wrapper").html(pageAds.AMS_NYR_PAYWALL_BARRIER))}),setTimeout(function(){j(),c()},0)}k()},a(document).ready(function(){a(".icon-menu").on("click",function(a){a.preventDefault(),window.TNY.account.checkUserLnStatus()}),window.matchMedia("(orientation: portrait)").matches&&CN.isMobile===!0&&i(),window.matchMedia("(orientation: landscape)").matches&&CN.isMobile===!0&&j(),a("#signout").click(function(){f.signOut()});{var b=f.readCookie("amg_user");f.readCookie("ev_ss")}null===b||b===d||""===b?(a(".user-ln-status").show(),a(".mob-sign-in").show()):(f.CheckEStatus(),a("#mobi-account-link-2").click(function(){f.signOut()})),f.detectModal=function(b){var c=b,d=function(){var b=a(document.body);b.css("overflow","auto"),b.width("auto"),a("#modal-overlay-full").removeClass("active-modal-step"),a(".mobilenav").removeClass("remove-nav-shadow"),a("#link-subscription-modal").removeClass("showLinkSteps"),a("#serve-resp").html(""),a("#serve-resp").hide(),a("div#email-msg").html(""),a("div#password-msg").html(""),a("#hd").removeClass("no-sticky"),a("div#city-msg").html(""),a("div#state-msg").html(""),a("#signin-view").removeClass("showLinkSteps"),a("#link-subscription-modal").removeClass("showLinkSteps"),a("#link-subscription-modal").removeClass("animated fadeIn"),a("body").removeClass("signinModalActive"),document.getElementsByTagName("nav")[0].style.opacity=1,a(".signinModalActive").off("click",function(a){f.detectModal(a.target.id)});for(var c=document.getElementById("signin-view");c.firstChild;)c.removeChild(c.firstChild);c.className="hidden-m-item nyr-flex-modal"},e=function(){a(".page-container").css("opacity",1),a("nav").css("opacity",1),a(".page-container").css("-webkit-user-select","text").css("-moz-user-select","text").css("user-select","text").css("pointer-events","auto")};if(c.indexOf("modal-overlay-full")>-1||c.indexOf("close-link-modal")>-1||c.indexOf("close-thanks-modal")>-1||c.indexOf("close-signin-modal")>-1){document.body.className=document.body.className.replace("bg-modal-activated",""),d();try{var g=localStorage.getItem("notifcation-shown"),h=JSON.parse(g);h.viewed!==!0&&e()}catch(i){}}},a("#mobi-nav-link").click(function(){new l("link")}),a(".red-box").on("click",function(){new l("link")}),a("#link-sub-nav").on("click",function(){new l("link")}),a("#user-sign-in").on("click",function(){new l("sign-in")}),a("#sign-in-from-conf").on("click",function(){new l("sign-in")}),a("#sign-in").on("click",function(){new l("sign-in")})})}(jQuery,window,document);